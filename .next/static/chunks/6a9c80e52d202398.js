(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},13849,e=>{"use strict";var t=e.i(18566),s=e.i(71645);function a(i=12){let r=function(){try{let{useSearchParams:t}=e.r(18566);return t()}catch{return null}}(),l=(0,t.useRouter)(),n=(0,t.usePathname)(),o=(0,s.useMemo)(()=>{if(!r)return 1;let e=r.get("p"),t=e?parseInt(e,10):1;return t>0?t:1},[r]),d=(0,s.useCallback)(e=>{let t=new URLSearchParams(r?.toString()||"");1===e?t.delete("p"):t.set("p",e.toString());let s=t.toString(),a=s?`${n}?${s}`:n;l.replace(a,{scroll:!1})},[r,n,l]),c=(0,s.useCallback)((e,t)=>{let s=new URLSearchParams;return s.set("page",o.toString()),s.set("limit",i.toString()),t&&s.set("search",t),`${e}?${s.toString()}`},[o,i]);return{currentPage:o,setPage:d,buildApiUrl:c,itemsPerPage:i}}e.s(["useServerPagination",()=>a])},18050,e=>{"use strict";var t=e.i(43476),s=e.i(73375),a=e.i(63059),i=e.i(26299);function r({currentPage:e,totalPages:r,onPageChange:l,className:n=""}){if(r<=1)return null;let o=(()=>{let t=[];if(r<=5)for(let e=1;e<=r;e++)t.push(e);else{t.push(1),e>3&&t.push("...");let s=Math.max(2,e-1),a=Math.min(r-1,e+1);for(let e=s;e<=a;e++)t.push(e);e<r-2&&t.push("..."),t.push(r)}return t})();return(0,t.jsxs)("div",{className:`flex items-center justify-center gap-2 ${n}`,children:[(0,t.jsx)(i.Button,{onClick:()=>l(e-1),disabled:1===e,variant:"outline",className:"h-10 w-10 p-0 border-gray-300 hover:bg-gray-50 disabled:opacity-50 cursor-pointer disabled:cursor-not-allowed hidden sm:flex items-center justify-center",children:(0,t.jsx)(s.ChevronLeft,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{className:"flex sm:hidden items-center gap-2",children:[(0,t.jsx)(i.Button,{onClick:()=>l(e-1),disabled:1===e,variant:"outline",className:"h-10 px-3 border-gray-300 hover:bg-gray-50 disabled:opacity-50 cursor-pointer disabled:cursor-not-allowed",children:(0,t.jsx)(s.ChevronLeft,{className:"w-4 h-4"})}),(0,t.jsxs)("span",{className:"text-sm text-gray-700 min-w-[80px] text-center",children:[e," / ",r]}),(0,t.jsx)(i.Button,{onClick:()=>l(e+1),disabled:e===r,variant:"outline",className:"h-10 px-3 border-gray-300 hover:bg-gray-50 disabled:opacity-50 cursor-pointer disabled:cursor-not-allowed",children:(0,t.jsx)(a.ChevronRight,{className:"w-4 h-4"})})]}),(0,t.jsx)("div",{className:"hidden sm:flex items-center gap-2",children:o.map((s,a)=>{if("..."===s)return(0,t.jsx)("span",{className:"px-2 text-gray-500",children:"..."},`ellipsis-${a}`);let r=s===e;return(0,t.jsx)(i.Button,{onClick:()=>l(s),variant:r?"default":"outline",className:`h-10 w-10 p-0 cursor-pointer ${r?"bg-[#18A36C] hover:bg-[#18A36C]/90 text-white border-[#18A36C]":"border-gray-300 hover:bg-gray-50 text-gray-700"}`,children:s},s)})}),(0,t.jsx)(i.Button,{onClick:()=>l(e+1),disabled:e===r,variant:"outline",className:"h-10 w-10 p-0 border-gray-300 hover:bg-gray-50 disabled:opacity-50 cursor-pointer disabled:cursor-not-allowed hidden sm:flex items-center justify-center",children:(0,t.jsx)(a.ChevronRight,{className:"w-5 h-5"})})]})}e.s(["Pagination",()=>r])},9056,e=>{"use strict";var t=e.i(43476),s=e.i(26999),a=e.i(95926),i=e.i(46932),r=e.i(80809);function l({...e}){return(0,t.jsx)(s.Root,{"data-slot":"sheet",...e})}function n({...e}){return(0,t.jsx)(s.Trigger,{"data-slot":"sheet-trigger",...e})}function o({...e}){return(0,t.jsx)(s.Portal,{"data-slot":"sheet-portal",...e})}let d={hidden:{opacity:0},visible:{opacity:1}},c={left:{hidden:{x:"-100%"},visible:{x:0}},right:{hidden:{x:"100%"},visible:{x:0}},top:{hidden:{y:"-100%"},visible:{y:0}},bottom:{hidden:{y:"100%"},visible:{y:0}}};function x({className:e,children:l,side:n="right",...x}){return(0,t.jsxs)(o,{children:[(0,t.jsx)(s.Overlay,{asChild:!0,children:(0,t.jsx)(i.motion.div,{"data-slot":"sheet-overlay",className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm",initial:"hidden",animate:"visible",exit:"hidden",variants:d,transition:{duration:.3,ease:"easeOut"}})}),(0,t.jsx)(s.Content,{asChild:!0,...x,children:(0,t.jsxs)(i.motion.div,{"data-slot":"sheet-content",className:(0,r.cn)("bg-background fixed z-50 flex flex-col shadow-2xl","right"===n&&"inset-y-0 right-0 h-full w-3/4 border-none sm:max-w-sm","left"===n&&"inset-y-0 left-0 h-full w-3/4 border-none sm:max-w-sm","top"===n&&"inset-x-0 top-0 h-auto border-b","bottom"===n&&"inset-x-0 bottom-0 h-auto border-t",e),initial:"hidden",animate:"visible",exit:"hidden",variants:c[n],transition:{type:"spring",damping:30,stiffness:300,mass:.8},children:[l,(0,t.jsxs)(s.Close,{className:"ring-offset-background focus:ring-ring absolute top-4 right-4 rounded-full w-8 h-8 flex items-center justify-center bg-gray-100 hover:bg-gray-200 transition-all duration-200 hover:scale-110 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none z-10",children:[(0,t.jsx)(a.XIcon,{className:"size-4 text-gray-600"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})})]})}function m({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"sheet-header",className:(0,r.cn)("flex flex-col gap-1.5 p-4",e),...s})}function u({className:e,...a}){return(0,t.jsx)(s.Title,{"data-slot":"sheet-title",className:(0,r.cn)("text-foreground font-semibold",e),...a})}function h({className:e,...a}){return(0,t.jsx)(s.Description,{"data-slot":"sheet-description",className:(0,r.cn)("text-muted-foreground text-sm",e),...a})}e.s(["Sheet",()=>l,"SheetContent",()=>x,"SheetDescription",()=>h,"SheetHeader",()=>m,"SheetTitle",()=>u,"SheetTrigger",()=>n])},19964,e=>{"use strict";var t=e.i(43476),s=e.i(80809);function a({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",e),...a})}function i({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function r({className:e,...a}){return(0,t.jsx)("h4",{"data-slot":"card-title",className:(0,s.cn)("leading-none",e),...a})}function l({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6 [&:last-child]:pb-6",e),...a})}e.s(["Card",()=>a,"CardContent",()=>l,"CardHeader",()=>i,"CardTitle",()=>r])},87316,e=>{"use strict";let t=(0,e.i(75254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},70756,e=>{"use strict";let t=(0,e.i(75254).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>t],70756)},69524,e=>{"use strict";var t=e.i(43476),s=e.i(46932),a=e.i(88653),i=e.i(78894),r=e.i(37727),l=e.i(26299);function n({isOpen:e,onClose:n,onConfirm:o,title:d,message:c,confirmText:x="Удалить",cancelText:m="Отмена",variant:u="danger",loading:h=!1}){return e?(0,t.jsx)(a.AnimatePresence,{children:e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n,className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9998]"}),(0,t.jsx)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:(0,t.jsxs)(s.motion.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",duration:.3},className:"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("div",{className:`px-6 py-5 border-b border-gray-100 ${"danger"===u?"bg-red-50":"bg-yellow-50"}`,children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${"danger"===u?"bg-red-100":"bg-yellow-100"}`,children:(0,t.jsx)(i.AlertTriangle,{className:`w-6 h-6 ${"danger"===u?"text-red-600":"text-yellow-600"}`})}),(0,t.jsx)("div",{children:(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:d})})]}),(0,t.jsx)("button",{onClick:n,disabled:h,className:"text-gray-400 hover:text-gray-600 transition-colors disabled:opacity-50 cursor-pointer",children:(0,t.jsx)(r.X,{className:"w-5 h-5"})})]})}),(0,t.jsx)("div",{className:"px-6 py-5",children:(0,t.jsx)("p",{className:"text-gray-600 leading-relaxed",children:c})}),(0,t.jsxs)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100 flex items-center justify-end gap-3",children:[(0,t.jsx)(l.Button,{onClick:n,disabled:h,variant:"ghost",className:"px-5 py-2.5 cursor-pointer",children:m}),(0,t.jsx)("button",{onClick:()=>{o()},disabled:h,className:`px-5 py-2.5 rounded-xl font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer ${"danger"===u?"bg-red-600 hover:bg-red-700 text-white shadow-lg shadow-red-600/30":"bg-yellow-600 hover:bg-yellow-700 text-white shadow-lg shadow-yellow-600/30"}`,children:h?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),(0,t.jsx)("span",{children:"Удаление..."})]}):x})]})]})})]})}):null}e.s(["ConfirmDialog",()=>n])},91900,e=>{"use strict";var t=e.i(71645);function s(){let[e,s]=(0,t.useState)(!1),[a,i]=(0,t.useState)(!1),[r,l]=(0,t.useState)({title:"",message:""}),[n,o]=(0,t.useState)(null),d=(0,t.useCallback)(e=>(l(e),s(!0),i(!1),new Promise(e=>{o({resolve:e})})),[]);return{confirm:d,isOpen:e,loading:a,options:r,handleConfirm:(0,t.useCallback)(async()=>{n&&(i(!0),await new Promise(e=>setTimeout(e,300)),n.resolve(!0),s(!1),i(!1),o(null))},[n]),handleCancel:(0,t.useCallback)(()=>{n&&(n.resolve(!1),s(!1),i(!1),o(null))},[n])}}e.s(["useConfirmDialog",()=>s])},87690,e=>{"use strict";e.i(51651),e.i(5901),e.i(86633),e.s([])},68707,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(17255),i=e.i(88653),r=e.i(46932),l=e.i(86311),n=e.i(31278),o=e.i(70273),d=e.i(87316),c=e.i(69638),x=e.i(3116),m=e.i(78745),m=m,u=e.i(86536),h=e.i(37727),g=e.i(18050);e.i(94662);var p=e.i(1558),f=e.i(75961),b=e.i(4125),j=e.i(29306),v=e.i(18026),y=e.i(45347),w=e.i(73250),N=e.i(69524),C=e.i(91900);e.i(87690);var k=e.i(86633),S=e.i(13849),A=e.i(42002);function P(){let{status:e}=(0,a.useSession)(),{sessionVerified:P,isLoading:T,verifySession:_}=(0,y.useAdminSession)(),[$,F]=(0,s.useState)(null),[D,O]=(0,s.useState)(!0),B=(0,C.useConfirmDialog)(),{success:U,error:M}=(0,k.useAlert)(),{refetch:E}=(0,A.useUnreadCountsContext)(),{currentPage:z,setPage:L,buildApiUrl:R,itemsPerPage:I}=(0,S.useServerPagination)(12),[q,X]=(0,s.useState)([]),[H,J]=(0,s.useState)(1),[K,V]=(0,s.useState)(0),[G,Q]=(0,s.useState)(0),[W,Y]=(0,s.useState)(0),[Z,ee]=(0,s.useState)([]),[et,es]=(0,s.useState)(!1),[ea,ei]=(0,s.useState)(""),[er,el]=(0,s.useState)("pending"),[en,eo]=(0,s.useState)(null),[ed,ec]=(0,s.useState)(null),[ex,em]=(0,s.useState)({service_id:"",verified:!0}),[eu,eh]=(0,s.useState)(!1),[eg,ep]=(0,s.useState)(!1),[ef,eb]=(0,s.useState)(null),[ej,ev]=(0,s.useState)(!1),[ey,ew]=(0,s.useState)({name:"",text:"",date:"",grade:"5",image_url:"",verified:!1,service_id:""});(0,s.useEffect)(()=>{"authenticated"===e?eN():"unauthenticated"===e&&F(!1)},[e]),(0,s.useEffect)(()=>{P&&$&&ek()},[P,$]);let eN=async()=>{O(!0);try{let e=await fetch("/api/admin/auth"),t=await e.json();F(t.isAdmin)}catch(e){F(!1)}finally{O(!1)}},eC=async()=>{try{let[e,t]=await Promise.all([fetch("/api/admin/feedbacks?page=1&limit=1&status=pending"),fetch("/api/admin/feedbacks?page=1&limit=1&status=approved")]);if(e.ok){let t=await e.json();Q(t.totalCount||0)}if(t.ok){let e=await t.json();Y(e.totalCount||0)}}catch(e){console.error("Error loading counts:",e)}},ek=async()=>{es(!0);try{let e=R("/api/admin/feedbacks",ea)+`&status=${er}`,[t,s]=await Promise.all([fetch(e),fetch("/api/services"),eC()]);if(t.ok){let e=await t.json();X(e.data||[]),J(e.totalPages||1),V(e.totalCount||0)}if(s.ok){let e=await s.json();ee(e)}}catch(e){console.error("Error loading data:",e)}finally{es(!1)}};(0,s.useEffect)(()=>{P&&$&&ek()},[P,$,z,ea,er]),(0,s.useEffect)(()=>{L(1)},[ea,er]);let eS=()=>{ew({name:"",text:"",date:"",grade:"5",image_url:"",verified:!1,service_id:""}),eb(null),ep(!1)},eA=()=>{eS(),ew(e=>({...e,date:new Date().toISOString().split("T")[0],verified:!0})),ep(!0)},eP=async()=>{ev(!0);try{let e=ef?`/api/admin/feedbacks/${ef.id}`:"/api/admin/feedbacks",t=ef?"PUT":"POST",s=await fetch(e,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(ey)});if(s.ok)await ek(),eS(),U(ef?"Отзыв обновлен":"Отзыв создан");else{let e=await s.json();M(e.error||"Ошибка сохранения")}}catch(e){M("Ошибка сохранения")}finally{ev(!1)}},eT=e=>{ec(e),em({service_id:"",verified:!0})},e_=async()=>{if(ed){eh(!0);try{let e=await fetch(`/api/admin/feedbacks/${ed.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({verified:ex.verified,service_id:ex.service_id||null})});if(e.ok)await ek(),ec(null),U("Отзыв одобрен"),await E();else{let t=await e.json();M(t.error||"Ошибка одобрения")}}catch(e){M("Ошибка одобрения")}finally{eh(!1)}}},e$=async(e,t)=>{if(await B.confirm({title:"Удаление отзыва",message:`Вы уверены, что хотите удалить отзыв от "${t}"? Это действие нельзя отменить.`,confirmText:"Удалить",cancelText:"Отмена",variant:"danger"}))try{let t=await fetch(`/api/admin/feedbacks/${e}`,{method:"DELETE"});if(t.ok)await ek(),U("Отзыв удален"),await E();else{let e=await t.json();M(e.error||"Ошибка удаления")}}catch(e){M("Ошибка удаления")}},eF=e=>(0,t.jsx)("div",{className:"flex items-center gap-0.5",children:[1,2,3,4,5].map(s=>(0,t.jsx)(o.Star,{className:`w-4 h-4 ${s<=e?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},s))});return"loading"===e||null===$||T||D?(0,t.jsx)(w.AdminAccessSkeleton,{}):"unauthenticated"===e||!1===$?(0,t.jsx)(j.default,{}):P?(0,t.jsxs)("div",{className:"flex min-h-screen bg-gray-50",children:[(0,t.jsx)(f.AdminMenu,{}),(0,t.jsx)("div",{className:"flex-1 p-4 lg:p-8 overflow-auto",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsxs)(b.AdminSection,{title:"Отзывы",icon:l.MessageSquare,count:K,loading:et,searchValue:ea,onSearchChange:ei,onAdd:eA,addButtonText:"Добавить отзыв",loadingSkeleton:(0,t.jsx)(w.AdminFeedbacksGridSkeleton,{count:I}),children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,t.jsxs)("button",{onClick:()=>el("pending"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all flex items-center gap-2 cursor-pointer ${"pending"===er?"bg-amber-500 text-white shadow-md":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}`,children:[(0,t.jsx)(x.Clock,{className:"w-4 h-4"}),"На модерации",G>0&&(0,t.jsx)("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${"pending"===er?"bg-white/20 text-white":"bg-amber-100 text-amber-700"}`,children:G})]}),(0,t.jsxs)("button",{onClick:()=>el("approved"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all flex items-center gap-2 cursor-pointer ${"approved"===er?"bg-[#18A36C] text-white shadow-md":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}`,children:[(0,t.jsx)(c.CheckCircle,{className:"w-4 h-4"}),"Одобренные"]})]}),0===q.length?(0,t.jsx)(b.EmptyState,{icon:l.MessageSquare,title:"Отзывы не найдены",description:ea?"Попробуйте изменить поисковый запрос":"Добавьте первый отзыв",actionText:ea?void 0:"Добавить отзыв",onAction:ea?void 0:eA}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,t.jsx)(i.AnimatePresence,{children:q.map(e=>{var s;let a;return(0,t.jsxs)(b.ItemCard,{children:[(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("div",{className:"w-14 h-14 rounded-full overflow-hidden flex-shrink-0 bg-gray-100 flex items-center justify-center",children:e.image_url?(0,t.jsx)("img",{src:e.image_url,alt:e.name,className:"w-full h-full object-cover"}):(0,t.jsx)("span",{className:"text-lg font-semibold text-gray-500",children:(a=(s=e.name).trim().split(/\s+/)).length>=2?(a[0][0]+a[1][0]).toUpperCase():s.slice(0,2).toUpperCase()})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-800",children:e.name}),e.verified&&(0,t.jsx)(c.CheckCircle,{className:"w-4 h-4 text-[#18A36C]"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[eF(e.grade),(0,t.jsxs)("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[(0,t.jsx)(d.Calendar,{className:"w-3 h-3"}),new Date(e.date).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})]})]}),(0,t.jsx)("p",{className:"text-sm text-gray-500 line-clamp-2",children:e.text})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-3",children:[e.service&&(0,t.jsx)(b.Badge,{variant:"secondary",children:e.service.title}),!e.service&&(0,t.jsx)(b.Badge,{variant:"primary",children:"Без услуги"}),e.verified?(0,t.jsx)(b.Badge,{variant:"success",children:"Опубликован"}):(0,t.jsx)(b.Badge,{variant:"warning",children:"На модерации"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-100",children:[e.verified?(0,t.jsx)("div",{}):(0,t.jsxs)("button",{onClick:()=>eT(e),className:"flex items-center gap-1.5 px-3 py-1.5 bg-[#18A36C] text-white text-sm font-medium rounded-lg hover:bg-[#15905f] transition-colors cursor-pointer",children:[(0,t.jsx)(m.default,{className:"w-4 h-4"}),"Одобрить"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[e.verified?(0,t.jsx)(b.CardActions,{onEdit:()=>{eb(e),ew({name:e.name,text:e.text,date:new Date(e.date).toISOString().split("T")[0],grade:e.grade.toString(),image_url:e.image_url,verified:e.verified,service_id:e.service_id?.toString()||""}),ep(!0)},onDelete:()=>e$(e.id,e.name)}):(0,t.jsx)("button",{onClick:()=>eo(e),className:"p-2 text-gray-400 hover:text-[#18A36C] hover:bg-[#18A36C]/10 rounded-lg transition-colors cursor-pointer",title:"Просмотреть",children:(0,t.jsx)(u.Eye,{className:"w-4 h-4"})}),!e.verified&&(0,t.jsx)("button",{onClick:()=>e$(e.id,e.name),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors cursor-pointer",title:"Удалить",children:(0,t.jsx)(h.X,{className:"w-4 h-4"})})]})]})]},e.id)})})}),H>1&&(0,t.jsx)(g.Pagination,{currentPage:z,totalPages:H,onPageChange:L,className:"mt-6"})]})]}),(0,t.jsx)(b.FormModal,{isOpen:eg,onClose:eS,title:ef?"Редактирование отзыва":"Новый отзыв",onSubmit:eP,loading:ej,disabled:!ey.name||!ey.text,children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(b.FormField,{label:"Имя автора",required:!0,children:(0,t.jsx)(b.FormInput,{type:"text",value:ey.name,onChange:e=>ew({...ey,name:e.target.value}),placeholder:"Иван Иванов"})}),(0,t.jsx)(b.FormField,{label:"Дата",required:!0,children:(0,t.jsx)(b.FormDateInput,{value:ey.date,onChange:e=>ew({...ey,date:e})})})]}),(0,t.jsx)(b.FormField,{label:"Текст отзыва",required:!0,children:(0,t.jsx)(b.FormTextarea,{value:ey.text,onChange:e=>ew({...ey,text:e.target.value}),rows:4,placeholder:"Текст отзыва"})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(b.FormField,{label:"Оценка (1-5)",required:!0,children:(0,t.jsxs)(b.FormSelect,{value:ey.grade,onChange:e=>ew({...ey,grade:e.target.value}),children:[(0,t.jsx)("option",{value:"5",children:"5 - Отлично"}),(0,t.jsx)("option",{value:"4",children:"4 - Хорошо"}),(0,t.jsx)("option",{value:"3",children:"3 - Нормально"}),(0,t.jsx)("option",{value:"2",children:"2 - Плохо"}),(0,t.jsx)("option",{value:"1",children:"1 - Ужасно"})]})}),(0,t.jsx)(b.FormField,{label:"Привязка к услуге",children:(0,t.jsxs)(b.FormSelect,{value:ey.service_id,onChange:e=>ew({...ey,service_id:e.target.value}),children:[(0,t.jsx)("option",{value:"",children:"Без привязки к услуге"}),Z.map(e=>(0,t.jsx)("option",{value:e.id,children:e.title},e.id))]})})]}),(0,t.jsx)(b.FormField,{label:"Фото автора",children:(0,t.jsx)(p.ImageUploader,{value:ey.image_url,onChange:e=>ew({...ey,image_url:e}),folder:"smartmedical/feedbacks",placeholder:"Загрузите фото автора отзыва",maxSizeMB:5})}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:()=>ew({...ey,verified:!ey.verified}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors cursor-pointer ${ey.verified?"bg-[#18A36C]":"bg-gray-300"}`,children:(0,t.jsx)("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${ey.verified?"translate-x-6":"translate-x-1"}`})}),(0,t.jsx)("span",{className:"text-sm text-gray-700",children:ey.verified?"Показывать в общих отзывах клиники":"Не показывать в общих отзывах клиники"})]})]})}),(0,t.jsx)(i.AnimatePresence,{children:en&&(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,t.jsx)(r.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>eo(null),className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),(0,t.jsxs)(r.motion.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative w-full max-w-lg mx-4 bg-white rounded-2xl shadow-2xl overflow-hidden",children:[(0,t.jsx)("div",{className:"bg-[#18A36C] px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Просмотр отзыва"}),(0,t.jsx)("button",{onClick:()=>eo(null),className:"p-1.5 hover:bg-white/20 rounded-lg transition-colors cursor-pointer",children:(0,t.jsx)(h.X,{className:"w-5 h-5 text-white"})})]})}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-start gap-4 mb-4",children:[(0,t.jsx)("div",{className:"w-14 h-14 rounded-full overflow-hidden flex-shrink-0 bg-gray-100 flex items-center justify-center",children:en.image_url?(0,t.jsx)("img",{src:en.image_url,alt:en.name,className:"w-full h-full object-cover"}):(0,t.jsx)("span",{className:"text-lg font-semibold text-gray-500",children:en.name.trim().split(/\s+/).length>=2?(en.name.trim().split(/\s+/)[0][0]+en.name.trim().split(/\s+/)[1][0]).toUpperCase():en.name.slice(0,2).toUpperCase()})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-800 text-lg",children:en.name}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[eF(en.grade),(0,t.jsx)("span",{className:"text-sm text-gray-500",children:new Date(en.date).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]})]})]}),(0,t.jsx)("div",{className:"bg-gray-50 rounded-xl p-4 mb-4",children:(0,t.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:en.text})}),en.service&&(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("span",{className:"text-sm text-gray-500",children:"Услуга: "}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:en.service.title})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 pt-4 border-t border-gray-100",children:[(0,t.jsxs)("button",{onClick:()=>{eT(en),eo(null)},className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-[#18A36C] text-white font-medium rounded-xl hover:bg-[#15905f] transition-colors cursor-pointer",children:[(0,t.jsx)(m.default,{className:"w-4 h-4"}),"Одобрить"]}),(0,t.jsxs)("button",{onClick:()=>{e$(en.id,en.name),eo(null)},className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-red-500 text-white font-medium rounded-xl hover:bg-red-600 transition-colors cursor-pointer",children:[(0,t.jsx)(h.X,{className:"w-4 h-4"}),"Отклонить"]})]})]})]})]})}),(0,t.jsx)(i.AnimatePresence,{children:ed&&(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,t.jsx)(r.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>!eu&&ec(null),className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),(0,t.jsxs)(r.motion.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative w-full max-w-md bg-white rounded-2xl shadow-2xl overflow-hidden",children:[(0,t.jsx)("div",{className:"bg-[#18A36C] px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Одобрение отзыва"}),(0,t.jsx)("button",{onClick:()=>!eu&&ec(null),className:"p-1.5 hover:bg-white/20 rounded-lg transition-colors cursor-pointer",children:(0,t.jsx)(h.X,{className:"w-5 h-5 text-white"})})]})}),(0,t.jsxs)("div",{className:"p-6 space-y-5",children:[(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-xl",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Отзыв от"}),(0,t.jsx)("p",{className:"font-medium text-gray-800",children:ed.name}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-2 line-clamp-2",children:ed.text})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Привязка к услуге"}),(0,t.jsxs)("select",{value:ex.service_id,onChange:e=>em({...ex,service_id:e.target.value}),className:"w-full px-4 py-2.5 border border-gray-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-[#18A36C]/20 focus:border-[#18A36C] transition-all",children:[(0,t.jsx)("option",{value:"",children:"Без привязки к услуге"}),Z.map(e=>(0,t.jsx)("option",{value:e.id,children:e.title},e.id))]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:()=>em({...ex,verified:!ex.verified}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors cursor-pointer ${ex.verified?"bg-[#18A36C]":"bg-gray-300"}`,children:(0,t.jsx)("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${ex.verified?"translate-x-6":"translate-x-1"}`})}),(0,t.jsx)("span",{className:"text-sm text-gray-700",children:"Показывать в общих отзывах клиники"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 pt-2",children:[(0,t.jsx)("button",{onClick:()=>ec(null),disabled:eu,className:"flex-1 px-4 py-2.5 border border-gray-200 text-gray-700 font-medium rounded-xl hover:bg-gray-50 transition-colors disabled:opacity-50 cursor-pointer",children:"Отмена"}),(0,t.jsxs)("button",{onClick:e_,disabled:eu,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-[#18A36C] text-white font-medium rounded-xl hover:bg-[#15905f] transition-colors disabled:opacity-50 cursor-pointer",children:[eu?(0,t.jsx)(n.Loader2,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(m.default,{className:"w-4 h-4"}),"Одобрить"]})]})]})]})]})}),(0,t.jsx)(N.ConfirmDialog,{isOpen:B.isOpen,onClose:B.handleCancel,onConfirm:B.handleConfirm,title:B.options.title,message:B.options.message,confirmText:B.options.confirmText,cancelText:B.options.cancelText,variant:B.options.variant,loading:B.loading})]})})]}):(0,t.jsx)(v.AdminAuthForm,{onSuccess:()=>{_()}})}e.s(["default",()=>P],68707)}]);