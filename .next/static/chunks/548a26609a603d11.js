(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},13849,e=>{"use strict";var t=e.i(18566),r=e.i(71645);function a(i=12){let n=function(){try{let{useSearchParams:t}=e.r(18566);return t()}catch{return null}}(),l=(0,t.useRouter)(),s=(0,t.usePathname)(),o=(0,r.useMemo)(()=>{if(!n)return 1;let e=n.get("p"),t=e?parseInt(e,10):1;return t>0?t:1},[n]),c=(0,r.useCallback)(e=>{let t=new URLSearchParams(n?.toString()||"");1===e?t.delete("p"):t.set("p",e.toString());let r=t.toString(),a=r?`${s}?${r}`:s;l.replace(a,{scroll:!1})},[n,s,l]),d=(0,r.useCallback)((e,t)=>{let r=new URLSearchParams;return r.set("page",o.toString()),r.set("limit",i.toString()),t&&r.set("search",t),`${e}?${r.toString()}`},[o,i]);return{currentPage:o,setPage:c,buildApiUrl:d,itemsPerPage:i}}e.s(["useServerPagination",()=>a])},18050,e=>{"use strict";var t=e.i(43476),r=e.i(73375),a=e.i(63059),i=e.i(26299);function n({currentPage:e,totalPages:n,onPageChange:l,className:s=""}){if(n<=1)return null;let o=(()=>{let t=[];if(n<=5)for(let e=1;e<=n;e++)t.push(e);else{t.push(1),e>3&&t.push("...");let r=Math.max(2,e-1),a=Math.min(n-1,e+1);for(let e=r;e<=a;e++)t.push(e);e<n-2&&t.push("..."),t.push(n)}return t})();return(0,t.jsxs)("div",{className:`flex items-center justify-center gap-2 ${s}`,children:[(0,t.jsx)(i.Button,{onClick:()=>l(e-1),disabled:1===e,variant:"outline",className:"h-10 w-10 p-0 border-gray-300 hover:bg-gray-50 disabled:opacity-50 cursor-pointer disabled:cursor-not-allowed hidden sm:flex items-center justify-center",children:(0,t.jsx)(r.ChevronLeft,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{className:"flex sm:hidden items-center gap-2",children:[(0,t.jsx)(i.Button,{onClick:()=>l(e-1),disabled:1===e,variant:"outline",className:"h-10 px-3 border-gray-300 hover:bg-gray-50 disabled:opacity-50 cursor-pointer disabled:cursor-not-allowed",children:(0,t.jsx)(r.ChevronLeft,{className:"w-4 h-4"})}),(0,t.jsxs)("span",{className:"text-sm text-gray-700 min-w-[80px] text-center",children:[e," / ",n]}),(0,t.jsx)(i.Button,{onClick:()=>l(e+1),disabled:e===n,variant:"outline",className:"h-10 px-3 border-gray-300 hover:bg-gray-50 disabled:opacity-50 cursor-pointer disabled:cursor-not-allowed",children:(0,t.jsx)(a.ChevronRight,{className:"w-4 h-4"})})]}),(0,t.jsx)("div",{className:"hidden sm:flex items-center gap-2",children:o.map((r,a)=>{if("..."===r)return(0,t.jsx)("span",{className:"px-2 text-gray-500",children:"..."},`ellipsis-${a}`);let n=r===e;return(0,t.jsx)(i.Button,{onClick:()=>l(r),variant:n?"default":"outline",className:`h-10 w-10 p-0 cursor-pointer ${n?"bg-[#18A36C] hover:bg-[#18A36C]/90 text-white border-[#18A36C]":"border-gray-300 hover:bg-gray-50 text-gray-700"}`,children:r},r)})}),(0,t.jsx)(i.Button,{onClick:()=>l(e+1),disabled:e===n,variant:"outline",className:"h-10 w-10 p-0 border-gray-300 hover:bg-gray-50 disabled:opacity-50 cursor-pointer disabled:cursor-not-allowed hidden sm:flex items-center justify-center",children:(0,t.jsx)(a.ChevronRight,{className:"w-5 h-5"})})]})}e.s(["Pagination",()=>n])},71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},94351,e=>{"use strict";let t=(0,e.i(75254).default)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]);e.s(["Home",()=>t],94351)},98183,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={assign:function(){return o},searchParamsToUrlQuery:function(){return n},urlQueryToSearchParams:function(){return s}};for(var i in a)Object.defineProperty(r,i,{enumerable:!0,get:a[i]});function n(e){let t={};for(let[r,a]of e.entries()){let e=t[r];void 0===e?t[r]=a:Array.isArray(e)?e.push(a):t[r]=[e,a]}return t}function l(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function s(e){let t=new URLSearchParams;for(let[r,a]of Object.entries(e))if(Array.isArray(a))for(let e of a)t.append(r,l(e));else t.set(r,l(a));return t}function o(e,...t){for(let r of t){for(let t of r.keys())e.delete(t);for(let[t,a]of r.entries())e.append(t,a)}return e}},95057,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={formatUrl:function(){return s},formatWithValidation:function(){return c},urlObjectKeys:function(){return o}};for(var i in a)Object.defineProperty(r,i,{enumerable:!0,get:a[i]});let n=e.r(90809)._(e.r(98183)),l=/https?|ftp|gopher|file/;function s(e){let{auth:t,hostname:r}=e,a=e.protocol||"",i=e.pathname||"",s=e.hash||"",o=e.query||"",c=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?c=t+e.host:r&&(c=t+(~r.indexOf(":")?`[${r}]`:r),e.port&&(c+=":"+e.port)),o&&"object"==typeof o&&(o=String(n.urlQueryToSearchParams(o)));let d=e.search||o&&`?${o}`||"";return a&&!a.endsWith(":")&&(a+=":"),e.slashes||(!a||l.test(a))&&!1!==c?(c="//"+(c||""),i&&"/"!==i[0]&&(i="/"+i)):c||(c=""),s&&"#"!==s[0]&&(s="#"+s),d&&"?"!==d[0]&&(d="?"+d),i=i.replace(/[?#]/g,encodeURIComponent),d=d.replace("#","%23"),`${a}${c}${i}${d}${s}`}let o=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function c(e){return s(e)}},18581,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return i}});let a=e.r(71645);function i(e,t){let r=(0,a.useRef)(null),i=(0,a.useRef)(null);return(0,a.useCallback)(a=>{if(null===a){let e=r.current;e&&(r.current=null,e());let t=i.current;t&&(i.current=null,t())}else e&&(r.current=n(e,a)),t&&(i.current=n(t,a))},[e,t])}function n(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},18967,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={DecodeError:function(){return x},MiddlewareNotFoundError:function(){return j},MissingStaticPage:function(){return v},NormalizeError:function(){return y},PageNotFoundError:function(){return b},SP:function(){return p},ST:function(){return f},WEB_VITALS:function(){return n},execOnce:function(){return l},getDisplayName:function(){return u},getLocationOrigin:function(){return c},getURL:function(){return d},isAbsoluteUrl:function(){return o},isResSent:function(){return m},loadGetInitialProps:function(){return h},normalizeRepeatedSlashes:function(){return g},stringifyError:function(){return _}};for(var i in a)Object.defineProperty(r,i,{enumerable:!0,get:a[i]});let n=["CLS","FCP","FID","INP","LCP","TTFB"];function l(e){let t,r=!1;return(...a)=>(r||(r=!0,t=e(...a)),t)}let s=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,o=e=>s.test(e);function c(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function d(){let{href:e}=window.location,t=c();return e.substring(t.length)}function u(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function m(e){return e.finished||e.headersSent}function g(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function h(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await h(t.Component,t.ctx)}:{};let a=await e.getInitialProps(t);if(r&&m(r))return a;if(!a)throw Object.defineProperty(Error(`"${u(e)}.getInitialProps()" should resolve to an object. But found "${a}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return a}let p="undefined"!=typeof performance,f=p&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class x extends Error{}class y extends Error{}class b extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class v extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class j extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function _(e){return JSON.stringify({message:e.message,stack:e.stack})}},73668,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isLocalURL",{enumerable:!0,get:function(){return n}});let a=e.r(18967),i=e.r(52817);function n(e){if(!(0,a.isAbsoluteUrl)(e))return!0;try{let t=(0,a.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,i.hasBasePath)(r.pathname)}catch(e){return!1}}},84508,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"errorOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},22016,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={default:function(){return x},useLinkStatus:function(){return b}};for(var i in a)Object.defineProperty(r,i,{enumerable:!0,get:a[i]});let n=e.r(90809),l=e.r(43476),s=n._(e.r(71645)),o=e.r(95057),c=e.r(8372),d=e.r(18581),u=e.r(18967),m=e.r(5550);e.r(33525);let g=e.r(91949),h=e.r(73668),p=e.r(65165);function f(e){return"string"==typeof e?e:(0,o.formatUrl)(e)}function x(t){var r;let a,i,n,[o,x]=(0,s.useOptimistic)(g.IDLE_LINK_STATUS),b=(0,s.useRef)(null),{href:v,as:j,children:_,prefetch:N=null,passHref:w,replace:C,shallow:S,scroll:k,onClick:P,onMouseEnter:A,onTouchStart:I,legacyBehavior:O=!1,onNavigate:E,ref:T,unstable_dynamicOnHover:L,...R}=t;a=_,O&&("string"==typeof a||"number"==typeof a)&&(a=(0,l.jsx)("a",{children:a}));let $=s.default.useContext(c.AppRouterContext),M=!1!==N,F=!1!==N?null===(r=N)||"auto"===r?p.FetchStrategy.PPR:p.FetchStrategy.Full:p.FetchStrategy.PPR,{href:B,as:U}=s.default.useMemo(()=>{let e=f(v);return{href:e,as:j?f(j):e}},[v,j]);if(O){if(a?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});i=s.default.Children.only(a)}let D=O?i&&"object"==typeof i&&i.ref:T,z=s.default.useCallback(e=>(null!==$&&(b.current=(0,g.mountLinkInstance)(e,B,$,F,M,x)),()=>{b.current&&((0,g.unmountLinkForCurrentNavigation)(b.current),b.current=null),(0,g.unmountPrefetchableInstance)(e)}),[M,B,$,F,x]),W={ref:(0,d.useMergedRef)(z,D),onClick(t){O||"function"!=typeof P||P(t),O&&i.props&&"function"==typeof i.props.onClick&&i.props.onClick(t),!$||t.defaultPrevented||function(t,r,a,i,n,l,o){if("undefined"!=typeof window){let c,{nodeName:d}=t.currentTarget;if("A"===d.toUpperCase()&&((c=t.currentTarget.getAttribute("target"))&&"_self"!==c||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,h.isLocalURL)(r)){n&&(t.preventDefault(),location.replace(r));return}if(t.preventDefault(),o){let e=!1;if(o({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:u}=e.r(99781);s.default.startTransition(()=>{u(a||r,n?"replace":"push",l??!0,i.current)})}}(t,B,U,b,C,k,E)},onMouseEnter(e){O||"function"!=typeof A||A(e),O&&i.props&&"function"==typeof i.props.onMouseEnter&&i.props.onMouseEnter(e),$&&M&&(0,g.onNavigationIntent)(e.currentTarget,!0===L)},onTouchStart:function(e){O||"function"!=typeof I||I(e),O&&i.props&&"function"==typeof i.props.onTouchStart&&i.props.onTouchStart(e),$&&M&&(0,g.onNavigationIntent)(e.currentTarget,!0===L)}};return(0,u.isAbsoluteUrl)(U)?W.href=U:O&&!w&&("a"!==i.type||"href"in i.props)||(W.href=(0,m.addBasePath)(U)),n=O?s.default.cloneElement(i,W):(0,l.jsx)("a",{...R,...W,children:a}),(0,l.jsx)(y.Provider,{value:o,children:n})}e.r(84508);let y=(0,s.createContext)(g.IDLE_LINK_STATUS),b=()=>(0,s.useContext)(y);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},29306,e=>{"use strict";var t=e.i(43476),r=e.i(46932),a=e.i(94351),i=e.i(71689),n=e.i(26299),l=e.i(22016);function s(){return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center px-4 py-12",children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto text-center",children:[(0,t.jsx)(r.motion.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:.5,ease:"easeOut"},className:"mb-8",children:(0,t.jsx)("span",{className:"text-[150px] lg:text-[200px] font-bold text-[#18A36C] leading-none select-none",children:"404"})}),(0,t.jsx)(r.motion.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"text-2xl lg:text-4xl text-[#2E2E2E] mb-4",children:"Страница не найдена"}),(0,t.jsx)(r.motion.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"text-gray-600 text-lg mb-8 max-w-md mx-auto",children:"К сожалению, запрашиваемая страница не существует или была перемещена. Возможно, вы перешли по устаревшей ссылке."}),(0,t.jsxs)(r.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"flex flex-col sm:flex-row gap-4 justify-center items-center mb-12",children:[(0,t.jsx)(l.default,{href:"/",children:(0,t.jsxs)(n.Button,{className:"bg-[#18A36C] hover:bg-[#18A36C]/90 text-white px-8 py-4 h-auto text-lg rounded-lg transition-all duration-300",children:[(0,t.jsx)(a.Home,{className:"w-5 h-5 mr-2"}),"На главную"]})}),(0,t.jsxs)(n.Button,{variant:"outline",onClick:()=>window.history.back(),className:"border-[#18A36C] text-[#18A36C] px-8 py-4 h-auto text-lg rounded-lg hover:shadow-xl hover:shadow-[#18A36C]/20",children:[(0,t.jsx)(i.ArrowLeft,{className:"w-5 h-5 mr-2"}),"Назад"]})]})]})})}e.s(["default",()=>s])},69524,e=>{"use strict";var t=e.i(43476),r=e.i(46932),a=e.i(88653),i=e.i(78894),n=e.i(37727),l=e.i(26299);function s({isOpen:e,onClose:s,onConfirm:o,title:c,message:d,confirmText:u="Удалить",cancelText:m="Отмена",variant:g="danger",loading:h=!1}){return e?(0,t.jsx)(a.AnimatePresence,{children:e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:s,className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9998]"}),(0,t.jsx)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:(0,t.jsxs)(r.motion.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",duration:.3},className:"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("div",{className:`px-6 py-5 border-b border-gray-100 ${"danger"===g?"bg-red-50":"bg-yellow-50"}`,children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${"danger"===g?"bg-red-100":"bg-yellow-100"}`,children:(0,t.jsx)(i.AlertTriangle,{className:`w-6 h-6 ${"danger"===g?"text-red-600":"text-yellow-600"}`})}),(0,t.jsx)("div",{children:(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:c})})]}),(0,t.jsx)("button",{onClick:s,disabled:h,className:"text-gray-400 hover:text-gray-600 transition-colors disabled:opacity-50 cursor-pointer",children:(0,t.jsx)(n.X,{className:"w-5 h-5"})})]})}),(0,t.jsx)("div",{className:"px-6 py-5",children:(0,t.jsx)("p",{className:"text-gray-600 leading-relaxed",children:d})}),(0,t.jsxs)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100 flex items-center justify-end gap-3",children:[(0,t.jsx)(l.Button,{onClick:s,disabled:h,variant:"ghost",className:"px-5 py-2.5 cursor-pointer",children:m}),(0,t.jsx)("button",{onClick:()=>{o()},disabled:h,className:`px-5 py-2.5 rounded-xl font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer ${"danger"===g?"bg-red-600 hover:bg-red-700 text-white shadow-lg shadow-red-600/30":"bg-yellow-600 hover:bg-yellow-700 text-white shadow-lg shadow-yellow-600/30"}`,children:h?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),(0,t.jsx)("span",{children:"Удаление..."})]}):u})]})]})})]})}):null}e.s(["ConfirmDialog",()=>s])},91900,e=>{"use strict";var t=e.i(71645);function r(){let[e,r]=(0,t.useState)(!1),[a,i]=(0,t.useState)(!1),[n,l]=(0,t.useState)({title:"",message:""}),[s,o]=(0,t.useState)(null),c=(0,t.useCallback)(e=>(l(e),r(!0),i(!1),new Promise(e=>{o({resolve:e})})),[]);return{confirm:c,isOpen:e,loading:a,options:n,handleConfirm:(0,t.useCallback)(async()=>{s&&(i(!0),await new Promise(e=>setTimeout(e,300)),s.resolve(!0),r(!1),i(!1),o(null))},[s]),handleCancel:(0,t.useCallback)(()=>{s&&(s.resolve(!1),r(!1),i(!1),o(null))},[s])}}e.s(["useConfirmDialog",()=>r])},20230,e=>{"use strict";var t=e.i(43476),r=e.i(71645);function a(e){let[a,i]=(0,r.useState)(!1),{src:n,alt:l,style:s,className:o,...c}=e;return a||!n?(0,t.jsx)("div",{className:`inline-block bg-gray-100 text-center align-middle ${o??""}`,style:s,children:(0,t.jsx)("div",{className:"flex items-center justify-center w-full h-full",children:(0,t.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==",alt:l||"Нет фото",...c,"data-original-url":n})})}):(0,t.jsx)("img",{src:n,alt:l,className:o,style:s,...c,onError:()=>{i(!0)}})}e.s(["ImageWithFallback",()=>a])},31171,e=>{"use strict";let t=(0,e.i(75254).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["default",()=>t])},64659,e=>{"use strict";var t=e.i(31171);e.s(["ChevronDown",()=>t.default])},25276,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(17255),i=e.i(88653),n=e.i(50965),l=e.i(18050),s=e.i(1558),o=e.i(64659);function c({images:e,onChange:a,folder:i,maxSizeMB:n=10}){let l=[{key:"image_url",label:"Главное изображение",value:e.image_url},{key:"image_url_1",label:"Изображение 1",value:e.image_url_1},{key:"image_url_2",label:"Изображение 2",value:e.image_url_2},{key:"image_url_3",label:"Изображение 3",value:e.image_url_3},{key:"image_url_4",label:"Изображение 4 (опционально)",value:e.image_url_4}],[c,d]=(0,r.useState)(l[0].key),u=l.find(e=>e.key===c)||l[0];return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Выберите слот изображения"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("select",{value:c,onChange:e=>d(e.target.value),className:"w-full px-4 py-3 bg-white border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#18A36C] focus:border-transparent appearance-none cursor-pointer transition-all",children:l.map(e=>(0,t.jsxs)("option",{value:e.key,children:[e.label,e.value?" ✓":""]},e.key))}),(0,t.jsx)(o.ChevronDown,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"})]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[(0,t.jsx)("p",{className:"text-xs font-medium text-gray-600 mb-3",children:"Загруженные изображения:"}),(0,t.jsx)("div",{className:"grid grid-cols-5 gap-2",children:l.map(e=>(0,t.jsxs)("button",{type:"button",onClick:()=>d(e.key),className:`relative aspect-square rounded-lg overflow-hidden border-2 transition-all ${c===e.key?"border-[#18A36C] ring-2 ring-[#18A36C]/20":"border-gray-200 hover:border-gray-300"}`,title:e.label,children:[e.value?(0,t.jsx)("img",{src:e.value,alt:e.label,className:"w-full h-full object-cover"}):(0,t.jsx)("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-xs text-gray-400 font-medium",children:"image_url"===e.key?"Главное":e.key.replace("image_url_","")})}),c===e.key&&(0,t.jsx)("div",{className:"absolute inset-0 bg-[#18A36C]/10 flex items-center justify-center",children:(0,t.jsx)("div",{className:"w-6 h-6 bg-[#18A36C] rounded-full flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})})]},e.key))})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl p-4 border-2 border-dashed border-gray-300",children:[(0,t.jsxs)("p",{className:"text-sm font-medium text-gray-700 mb-3",children:["Загрузка для: ",(0,t.jsx)("span",{className:"text-[#18A36C]",children:u.label})]}),(0,t.jsx)(s.ImageUploader,{value:u.value,onChange:e=>a(c,e),folder:i,placeholder:`Загрузите ${u.label.toLowerCase()}`,maxSizeMB:n})]})]})}var d=e.i(75961),u=e.i(13849),m=e.i(4125),g=e.i(29306),h=e.i(18026),p=e.i(45347),f=e.i(86633),x=e.i(73250),y=e.i(20230),b=e.i(69524),v=e.i(91900),j=e.i(63059);let _=(0,e.i(75254).default)("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var N=e.i(95468);function w({categories:e,value:r,onChange:a,placeholder:i="Выберите категорию",maxHeight:n="320px",showHeader:l=!0,showFooter:s=!0}){let o=r?parseInt(r.toString()):null;return(0,t.jsxs)("div",{className:"w-full border border-gray-200 rounded-xl bg-white overflow-hidden",children:[l&&(0,t.jsx)("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200",children:(0,t.jsx)("p",{className:"text-sm text-gray-600",children:o&&e.find(e=>e.id===o)?.name||i})}),(0,t.jsx)("div",{className:"overflow-y-auto",style:{maxHeight:n},children:e.map(e=>{let r=e.id===o,i=e.disabled;return(0,t.jsx)("div",{onClick:()=>!i&&a(e.id.toString()),className:`
                px-4 py-3 border-b border-gray-100 transition-all cursor-pointer
                ${i?"bg-gray-50 cursor-not-allowed opacity-60":"hover:bg-[#18A36C]/5 hover:border-l-4 hover:border-l-[#18A36C]"}
                ${r&&!i?"bg-[#18A36C]/10 border-l-4 border-l-[#18A36C]":"border-l-4 border-l-transparent"}
              `,style:{paddingLeft:`${16+20*e.level}px`},children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.level>0&&(0,t.jsx)(j.ChevronRight,{className:"w-3 h-3 text-gray-400 flex-shrink-0"}),r?(0,t.jsx)(N.CheckCircle2,{className:"w-4 h-4 text-[#18A36C] flex-shrink-0"}):(0,t.jsx)(_,{className:"w-4 h-4 text-gray-300 flex-shrink-0"}),(0,t.jsx)("span",{className:`
                    text-sm flex-1 truncate
                    ${i?"text-gray-400":"text-gray-800"}
                    ${r?"font-semibold text-[#18A36C]":""}
                  `,children:e.name})]}),i&&e.disabledReason&&(0,t.jsx)("span",{className:"text-xs text-gray-400 italic flex-shrink-0",children:e.disabledReason})]})},e.id)})}),s&&(0,t.jsx)("div",{className:"px-4 py-2 bg-gray-50 border-t border-gray-200",children:(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Доступны только категории без подкатегорий"})})]})}function C(){let{status:e}=(0,a.useSession)(),{sessionVerified:s,isLoading:o,verifySession:j}=(0,p.useAdminSession)(),[_,N]=(0,r.useState)(null),[C,S]=(0,r.useState)(!0),{success:k,error:P}=(0,f.useAlert)(),A=(0,v.useConfirmDialog)(),{currentPage:I,setPage:O,buildApiUrl:E}=(0,u.useServerPagination)(12),[T,L]=(0,r.useState)([]),[R,$]=(0,r.useState)(1),[M,F]=(0,r.useState)(0),[B,U]=(0,r.useState)([]),[D,z]=(0,r.useState)([]),[W,H]=(0,r.useState)(!1),[Z,K]=(0,r.useState)(""),[q,G]=(0,r.useState)(!1),[X,J]=(0,r.useState)(null),[Q,Y]=(0,r.useState)(!1),[V,ee]=(0,r.useState)({title:"",subtitle:"",price:"",video_url:"",description:"",image_url:"",image_url_1:"",image_url_2:"",image_url_3:"",image_url_4:"",specialist_ids:[],service_category_id:""});(0,r.useEffect)(()=>{"authenticated"===e?et():"unauthenticated"===e&&N(!1)},[e]),(0,r.useEffect)(()=>{s&&_&&er()},[s,_,I,Z]);let et=async()=>{S(!0);try{let e=await fetch("/api/admin/auth"),t=await e.json();N(t.isAdmin)}catch(e){N(!1)}finally{S(!1)}},er=async()=>{H(!0);try{let e=E("/api/admin/services",Z),[t,r,a]=await Promise.all([fetch(e),fetch("/api/service-categories"),fetch("/api/specialists")]);if(t.ok){let e=await t.json();L(e.data||[]),$(e.totalPages||1),F(e.totalCount||0)}if(r.ok){let e=await r.json();U(e)}if(a.ok){let e=await a.json();z(e)}}catch(e){P("Ошибка загрузки данных")}finally{H(!1)}};(0,r.useEffect)(()=>{O(1)},[Z]);let ea=(0,r.useMemo)(()=>{let e=new Set(T.filter(e=>e.service_category_id&&(!X||e.id!==X.id)).map(e=>e.service_category_id)),t=(r,a=0)=>{let i=[];for(let n of r){let r=n.children&&n.children.length>0,l=e.has(n.id),s=!1,o="";r?(s=!0,o="имеет подкатегории"):l&&(s=!0,o="уже занята"),i.push({...n,level:a,disabled:s,disabledReason:o}),n.children&&n.children.length>0&&i.push(...t(n.children,a+1))}return i};return t(B)},[B,T,X]),ei=()=>{ee({title:"",subtitle:"",price:"",video_url:"",description:"",image_url:"",image_url_1:"",image_url_2:"",image_url_3:"",image_url_4:"",specialist_ids:[],service_category_id:""}),J(null),G(!1)},en=()=>{ei(),G(!0)},el=async()=>{Y(!0);try{let e=X?`/api/admin/services/${X.id}`:"/api/admin/services",t=X?"PUT":"POST",r=await fetch(e,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(V)});if(r.ok)await er(),ei(),k(X?"Услуга обновлена":"Услуга создана");else{let e=await r.json();P(e.error||"Ошибка сохранения")}}catch(e){P("Ошибка сохранения")}finally{Y(!1)}},es=async(e,t)=>{if(await A.confirm({title:"Удаление услуги",message:`Вы уверены, что хотите удалить услугу "${t}"? Это действие нельзя отменить.`,confirmText:"Удалить",cancelText:"Отмена",variant:"danger"}))try{let t=await fetch(`/api/admin/services/${e}`,{method:"DELETE"});if(t.ok)await er(),k("Услуга удалена");else{let e=await t.json();P(e.error||"Ошибка удаления")}}catch(e){P("Ошибка удаления")}};return"loading"===e||null===_||o||C?(0,t.jsx)(x.AdminAccessSkeleton,{}):"unauthenticated"===e||!1===_?(0,t.jsx)(g.default,{}):s?(0,t.jsxs)("div",{className:"flex min-h-screen bg-gray-50",children:[(0,t.jsx)(d.AdminMenu,{}),(0,t.jsx)("div",{className:"flex-1 p-4 lg:p-8 overflow-auto",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsx)(m.AdminSection,{title:"Услуги",icon:n.ShoppingBag,count:M,loading:W,searchValue:Z,onSearchChange:K,onAdd:en,addButtonText:"Добавить услугу",children:0===T.length?(0,t.jsx)(m.EmptyState,{icon:n.ShoppingBag,title:"Услуги не найдены",description:Z?"Попробуйте изменить поисковый запрос":"Добавьте первую услугу",actionText:Z?void 0:"Добавить услугу",onAction:Z?void 0:en}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:(0,t.jsx)(i.AnimatePresence,{children:T.map(e=>(0,t.jsxs)(m.ItemCard,{children:[(0,t.jsx)("div",{className:"w-full h-32 rounded-xl overflow-hidden bg-gray-100 mb-3",children:(0,t.jsx)(y.ImageWithFallback,{src:e.image_url,alt:e.title,className:"w-full h-full object-cover"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-800 line-clamp-1",children:e.title}),(0,t.jsx)("p",{className:"text-sm text-gray-500 line-clamp-2 mt-1",children:e.subtitle})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-3 flex-wrap",children:[e.serviceCategory&&(0,t.jsx)(m.Badge,{variant:"primary",children:e.serviceCategory.name}),(0,t.jsxs)(m.Badge,{variant:"success",children:[e.price," BYN"]})]}),e.specialists.length>0&&(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsxs)(m.Badge,{variant:"secondary",children:["Специалисты (",e.specialists.length,")"]})}),(0,t.jsx)("div",{className:"flex items-center justify-end mt-4 pt-4 border-t border-gray-100",children:(0,t.jsx)(m.CardActions,{onEdit:()=>{J(e),ee({title:e.title,subtitle:e.subtitle,price:e.price.toString(),video_url:e.video_url,description:e.description,image_url:e.image_url,image_url_1:e.image_url_1,image_url_2:e.image_url_2,image_url_3:e.image_url_3,image_url_4:e.image_url_4||"",specialist_ids:e.specialists.map(e=>e.id.toString()),service_category_id:e.service_category_id?.toString()||""}),G(!0)},onDelete:()=>es(e.id,e.title)})})]},e.id))})}),R>1&&(0,t.jsx)(l.Pagination,{currentPage:I,totalPages:R,onPageChange:O,className:"mt-6"})]})}),(0,t.jsx)(m.FormModal,{isOpen:q,onClose:ei,title:X?"Редактирование услуги":"Новая услуга",onSubmit:el,loading:Q,disabled:!V.title||!V.subtitle||!V.price||!V.service_category_id||0===V.specialist_ids.length,children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(m.FormField,{label:"Название",required:!0,children:(0,t.jsx)(m.FormInput,{type:"text",value:V.title,onChange:e=>ee({...V,title:e.target.value}),placeholder:"Лечение кариеса"})}),(0,t.jsx)(m.FormField,{label:"Цена (BYN)",required:!0,children:(0,t.jsx)(m.FormInput,{type:"number",value:V.price,onChange:e=>ee({...V,price:e.target.value}),placeholder:"100"})})]}),(0,t.jsx)(m.FormField,{label:"Подзаголовок",required:!0,children:(0,t.jsx)(m.FormInput,{type:"text",value:V.subtitle,onChange:e=>ee({...V,subtitle:e.target.value}),placeholder:"Краткое описание услуги"})}),(0,t.jsx)(m.FormField,{label:"Категория услуги",required:!0,children:(0,t.jsx)(w,{categories:ea,value:V.service_category_id,onChange:e=>ee({...V,service_category_id:e}),placeholder:"Выберите категорию"})}),(0,t.jsx)("div",{className:"grid grid-cols-1 gap-4",children:(0,t.jsxs)(m.FormField,{label:"Специалисты",required:!0,children:[(0,t.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto border border-gray-200 rounded-xl p-3 bg-gray-50",children:D.map(e=>(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 p-2 rounded-lg transition-colors",children:[(0,t.jsx)("input",{type:"checkbox",checked:V.specialist_ids.includes(e.id.toString()),onChange:t=>{t.target.checked?ee({...V,specialist_ids:[...V.specialist_ids,e.id.toString()]}):ee({...V,specialist_ids:V.specialist_ids.filter(t=>t!==e.id.toString())})},className:"w-4 h-4 text-[#18A36C] border-gray-300 rounded focus:ring-[#18A36C]"}),(0,t.jsx)("span",{className:"text-sm text-gray-700",children:e.name})]},e.id))}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Выбрано: ",V.specialist_ids.length]})]})}),(0,t.jsx)(m.FormField,{label:"Описание",children:(0,t.jsx)(m.FormTextarea,{value:V.description,onChange:e=>ee({...V,description:e.target.value}),rows:4,placeholder:"Полное описание услуги..."})}),(0,t.jsx)(m.FormField,{label:"Ссылка на видео (YouTube)",children:(0,t.jsx)(m.FormInput,{type:"text",value:V.video_url,onChange:e=>ee({...V,video_url:e.target.value}),placeholder:"https://youtube.com/watch?v=..."})}),(0,t.jsxs)("div",{className:"border-t border-gray-100 pt-6",children:[(0,t.jsx)("h4",{className:"font-medium text-gray-700 mb-4",children:"Изображения услуги"}),(0,t.jsx)(c,{images:{image_url:V.image_url,image_url_1:V.image_url_1,image_url_2:V.image_url_2,image_url_3:V.image_url_3,image_url_4:V.image_url_4},onChange:(e,t)=>ee({...V,[e]:t}),folder:"smartmedical/services",maxSizeMB:10})]})]})}),(0,t.jsx)(b.ConfirmDialog,{isOpen:A.isOpen,onClose:A.handleCancel,onConfirm:A.handleConfirm,title:A.options.title,message:A.options.message,confirmText:A.options.confirmText,cancelText:A.options.cancelText,variant:A.options.variant,loading:A.loading})]})})]}):(0,t.jsx)(h.AdminAuthForm,{onSuccess:()=>{j()}})}e.s(["default",()=>C],25276)}]);