(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,a,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"warnOnce",{enumerable:!0,get:function(){return i}});let i=e=>{}},69524,91900,e=>{"use strict";var a=e.i(43476),t=e.i(46932),i=e.i(88653),s=e.i(78894),n=e.i(37727),r=e.i(26299);function l({isOpen:e,onClose:l,onConfirm:o,title:c,message:d,confirmText:m="Удалить",cancelText:x="Отмена",variant:u="danger",loading:h=!1}){return e?(0,a.jsx)(i.AnimatePresence,{children:e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:l,className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9998]"}),(0,a.jsx)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:(0,a.jsxs)(t.motion.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",duration:.3},className:"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("div",{className:`px-6 py-5 border-b border-gray-100 ${"danger"===u?"bg-red-50":"bg-yellow-50"}`,children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${"danger"===u?"bg-red-100":"bg-yellow-100"}`,children:(0,a.jsx)(s.AlertTriangle,{className:`w-6 h-6 ${"danger"===u?"text-red-600":"text-yellow-600"}`})}),(0,a.jsx)("div",{children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:c})})]}),(0,a.jsx)("button",{onClick:l,disabled:h,className:"text-gray-400 hover:text-gray-600 transition-colors disabled:opacity-50",children:(0,a.jsx)(n.X,{className:"w-5 h-5"})})]})}),(0,a.jsx)("div",{className:"px-6 py-5",children:(0,a.jsx)("p",{className:"text-gray-600 leading-relaxed",children:d})}),(0,a.jsxs)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100 flex items-center justify-end gap-3",children:[(0,a.jsx)(r.Button,{onClick:l,disabled:h,variant:"ghost",className:"px-5 py-2.5",children:x}),(0,a.jsx)("button",{onClick:()=>{o()},disabled:h,className:`px-5 py-2.5 rounded-xl font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed ${"danger"===u?"bg-red-600 hover:bg-red-700 text-white shadow-lg shadow-red-600/30":"bg-yellow-600 hover:bg-yellow-700 text-white shadow-lg shadow-yellow-600/30"}`,children:h?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),(0,a.jsx)("span",{children:"Удаление..."})]}):m})]})]})})]})}):null}e.s(["ConfirmDialog",()=>l],69524);var o=e.i(71645);function c(){let[e,a]=(0,o.useState)(!1),[t,i]=(0,o.useState)(!1),[s,n]=(0,o.useState)({title:"",message:""}),[r,l]=(0,o.useState)(null),c=(0,o.useCallback)(e=>(n(e),a(!0),i(!1),new Promise(e=>{l({resolve:e})})),[]);return{confirm:c,isOpen:e,loading:t,options:s,handleConfirm:(0,o.useCallback)(async()=>{r&&(i(!0),await new Promise(e=>setTimeout(e,300)),r.resolve(!0),a(!1),i(!1),l(null))},[r]),handleCancel:(0,o.useCallback)(()=>{r&&(r.resolve(!1),a(!1),i(!1),l(null))},[r])}}e.s(["useConfirmDialog",()=>c],91900)},87690,e=>{"use strict";e.i(51651),e.i(5901),e.i(86633),e.s([])},32714,e=>{"use strict";var a=e.i(43476),t=e.i(71645),i=e.i(17255),s=e.i(88653),n=e.i(63727),r=e.i(3116),l=e.i(75961),o=e.i(4125),c=e.i(29306),d=e.i(18026),m=e.i(45347),x=e.i(73250),u=e.i(69524),h=e.i(91900);e.i(87690);var p=e.i(86633);function g(){let{status:e}=(0,i.useSession)(),{sessionVerified:g,isLoading:y,verifySession:j}=(0,m.useAdminSession)(),[f,b]=(0,t.useState)(null),v=(0,h.useConfirmDialog)(),{success:w,error:N}=(0,p.useAlert)(),[C,S]=(0,t.useState)([]),[F,T]=(0,t.useState)(!1),[A,k]=(0,t.useState)(""),[q,P]=(0,t.useState)(!1),[O,B]=(0,t.useState)(null),[E,$]=(0,t.useState)(!1),[D,I]=(0,t.useState)({name:"",category:"",description:"",payment:"",experience:"0",requirements:""});(0,t.useEffect)(()=>{"authenticated"===e?L():"unauthenticated"===e&&b(!1)},[e]),(0,t.useEffect)(()=>{g&&f&&M()},[g,f]);let L=async()=>{try{let e=await fetch("/api/admin/auth"),a=await e.json();b(a.isAdmin)}catch(e){b(!1)}},M=async()=>{T(!0);try{let e=await fetch("/api/admin/vacancies");if(e.ok){let a=await e.json();S(a)}}catch(e){console.error("Error loading vacancies:",e)}finally{T(!1)}},U=(0,t.useMemo)(()=>{if(!A)return C;let e=A.toLowerCase();return C.filter(a=>a.name.toLowerCase().includes(e)||a.category.toLowerCase().includes(e)||a.description.toLowerCase().includes(e))},[C,A]),R=()=>{I({name:"",category:"",description:"",payment:"",experience:"0",requirements:""}),B(null),P(!1)},z=()=>{R(),P(!0)},K=async()=>{$(!0);try{let e=O?`/api/admin/vacancies/${O.id}`:"/api/admin/vacancies",a=O?"PUT":"POST",t=await fetch(e,{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify(D)});if(t.ok)await M(),R(),w(O?"Вакансия обновлена":"Вакансия создана");else{let e=await t.json();N(e.error||"Ошибка сохранения")}}catch(e){N("Ошибка сохранения")}finally{$(!1)}},Y=async(e,a)=>{if(await v.confirm({title:"Удаление вакансии",message:`Вы уверены, что хотите удалить вакансию "${a}"? Это действие нельзя отменить.`,confirmText:"Удалить",cancelText:"Отмена",variant:"danger"}))try{let a=await fetch(`/api/admin/vacancies/${e}`,{method:"DELETE"});if(a.ok)await M(),w("Вакансия удалена");else{let e=await a.json();N(e.error||"Ошибка удаления")}}catch(e){N("Ошибка удаления")}};return"loading"===e||null===f||y?(0,a.jsx)(x.AdminAccessSkeleton,{}):"unauthenticated"!==e&&f?g?(0,a.jsxs)("div",{className:"flex min-h-screen bg-gray-50",children:[(0,a.jsx)(l.AdminMenu,{}),(0,a.jsx)("div",{className:"flex-1 p-4 lg:p-8 overflow-auto",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsx)(o.AdminSection,{title:"Вакансии",icon:n.Briefcase,count:C.length,loading:F,searchValue:A,onSearchChange:k,onAdd:z,addButtonText:"Добавить вакансию",children:0===U.length?(0,a.jsx)(o.EmptyState,{icon:n.Briefcase,title:"Вакансии не найдены",description:A?"Попробуйте изменить поисковый запрос":"Добавьте первую вакансию",actionText:A?void 0:"Добавить вакансию",onAction:A?void 0:z}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:(0,a.jsx)(s.AnimatePresence,{children:U.map(e=>{let t;return(0,a.jsxs)(o.ItemCard,{children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4 mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800",children:e.name}),(0,a.jsx)(o.Badge,{variant:"primary",children:e.category})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsx)("div",{className:"text-lg font-bold text-[#18A36C]",children:(t=e.payment,new Intl.NumberFormat("ru-RU").format(t)+" BYN")})})]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 line-clamp-2 mb-3",children:e.description}),(0,a.jsx)("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-4",children:(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(r.Clock,{className:"w-4 h-4"}),e.experience>0?`от ${e.experience} лет`:"Без опыта"]})}),(0,a.jsx)("div",{className:"text-xs text-gray-400 bg-gray-50 rounded-lg p-3 line-clamp-2",children:e.requirements}),(0,a.jsx)("div",{className:"flex items-center justify-end mt-4 pt-4 border-t border-gray-100",children:(0,a.jsx)(o.CardActions,{onEdit:()=>{B(e),I({name:e.name,category:e.category,description:e.description,payment:e.payment.toString(),experience:e.experience.toString(),requirements:e.requirements}),P(!0)},onDelete:()=>Y(e.id,e.name)})})]},e.id)})})})}),(0,a.jsx)(o.FormModal,{isOpen:q,onClose:R,title:O?"Редактирование вакансии":"Новая вакансия",onSubmit:K,loading:E,disabled:!D.name||!D.category||!D.payment,children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(o.FormField,{label:"Название должности",required:!0,children:(0,a.jsx)(o.FormInput,{type:"text",value:D.name,onChange:e=>I({...D,name:e.target.value}),placeholder:"Стоматолог-терапевт"})}),(0,a.jsx)(o.FormField,{label:"Категория",required:!0,children:(0,a.jsx)(o.FormInput,{type:"text",value:D.category,onChange:e=>I({...D,category:e.target.value}),placeholder:"Медицина"})}),(0,a.jsx)(o.FormField,{label:"Описание",required:!0,children:(0,a.jsx)(o.FormTextarea,{value:D.description,onChange:e=>I({...D,description:e.target.value}),rows:4,placeholder:"Описание вакансии и обязанностей"})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(o.FormField,{label:"Зарплата (BYN)",required:!0,children:(0,a.jsx)(o.FormInput,{type:"number",value:D.payment,onChange:e=>I({...D,payment:e.target.value}),placeholder:"100000"})}),(0,a.jsx)(o.FormField,{label:"Опыт (лет)",children:(0,a.jsx)(o.FormInput,{type:"number",min:"0",value:D.experience,onChange:e=>I({...D,experience:e.target.value}),placeholder:"0"})})]}),(0,a.jsx)(o.FormField,{label:"Требования",children:(0,a.jsx)(o.FormTextarea,{value:D.requirements,onChange:e=>I({...D,requirements:e.target.value}),rows:4,placeholder:"Требования к кандидату"})})]})}),(0,a.jsx)(u.ConfirmDialog,{isOpen:v.isOpen,onClose:v.handleCancel,onConfirm:v.handleConfirm,title:v.options.title,message:v.options.message,confirmText:v.options.confirmText,cancelText:v.options.cancelText,variant:v.options.variant,loading:v.loading})]})})]}):(0,a.jsx)(d.AdminAuthForm,{onSuccess:()=>{j()}}):(0,a.jsx)(c.default,{})}e.s(["default",()=>g])}]);