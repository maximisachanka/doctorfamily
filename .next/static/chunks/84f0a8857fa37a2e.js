(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,s,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"warnOnce",{enumerable:!0,get:function(){return t}});let t=e=>{}},56909,e=>{"use strict";let s=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>s],56909)},93595,e=>{"use strict";var s=e.i(43476),a=e.i(71645),t=e.i(17255),r=e.i(43432),l=e.i(31278),i=e.i(46897),n=e.i(3116),d=e.i(63488),c=e.i(56909),o=e.i(55436),m=e.i(75961),h=e.i(4125),x=e.i(29306),u=e.i(18026),p=e.i(45347),g=e.i(86633),j=e.i(73250);function f(){let{status:e}=(0,t.useSession)(),{sessionVerified:f,isLoading:y,verifySession:v}=(0,p.useAdminSession)(),[b,w]=(0,a.useState)(null),{success:N,error:_}=(0,g.useAlert)(),[F,k]=(0,a.useState)(!1),[C,A]=(0,a.useState)(!1),[S,P]=(0,a.useState)(!1),[T,M]=(0,a.useState)(""),[O,I]=(0,a.useState)({address:"",map_geo:"",work_hours_main:"",work_hours_sunday:"",phone_number:"",phone_number_sec:"",email:""});(0,a.useEffect)(()=>{"authenticated"===e?E():"unauthenticated"===e&&w(!1)},[e]),(0,a.useEffect)(()=>{f&&b&&q()},[f,b]);let E=async()=>{try{let e=await fetch("/api/admin/auth"),s=await e.json();w(s.isAdmin)}catch(e){w(!1)}},q=async()=>{k(!0);try{let e=await fetch("/api/admin/contacts");if(e.ok){let s=await e.json();I({address:s.address||"",map_geo:s.map_geo||"",work_hours_main:s.work_hours_main||"",work_hours_sunday:s.work_hours_sunday||"",phone_number:s.phone_number||"",phone_number_sec:s.phone_number_sec||"",email:s.email||""})}}catch(e){console.error("Error loading contacts:",e),_("Ошибка загрузки контактов")}finally{k(!1)}},K=async()=>{if(!T||0===T.trim().length)return void _("Введите адрес для поиска координат");P(!0);try{let e=await fetch("/api/geocode",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:T})});if(e.ok){let s=await e.json();I({...O,map_geo:s.coordinates}),N(`Координаты найдены: ${s.coordinates}`)}else{let s=await e.json();_(s.error||"Адрес не найден")}}catch(e){_("Ошибка при поиске координат")}finally{P(!1)}},L=async()=>{if(!O.address||!O.phone_number||!O.email)return void _("Заполните обязательные поля");A(!0);try{let e=await fetch("/api/admin/contacts",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)});if(e.ok)N("Контакты успешно сохранены");else{let s=await e.json();_(s.error||"Ошибка сохранения")}}catch(e){_("Ошибка сохранения")}finally{A(!1)}};return"loading"===e||null===b||y?(0,s.jsx)(j.AdminAccessSkeleton,{}):"unauthenticated"!==e&&b?f?(0,s.jsxs)("div",{className:"flex min-h-screen bg-gray-50",children:[(0,s.jsx)(m.AdminMenu,{}),(0,s.jsx)("div",{className:"flex-1 p-4 lg:p-8 overflow-auto",children:(0,s.jsx)("div",{className:"max-w-7xl",children:F?(0,s.jsx)(j.AdminContactsSkeleton,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 mb-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-[#18A36C]/10 rounded-xl flex items-center justify-center",children:(0,s.jsx)(r.Phone,{className:"w-6 h-6 text-[#18A36C]"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Контакты"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Редактирование контактной информации клиники"})]})]})}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-[#18A36C]/10 rounded-lg flex items-center justify-center flex-shrink-0 mt-6",children:(0,s.jsx)(i.MapPin,{className:"w-5 h-5 text-[#18A36C]"})}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(h.FormField,{label:"Адрес",required:!0,children:(0,s.jsx)(h.FormTextarea,{value:O.address,onChange:e=>I({...O,address:e.target.value}),rows:2,placeholder:"г. Минск, пр. Победителей, д. 119, пом. 504"})})})]}),(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-[#18A36C]/10 rounded-lg flex items-center justify-center flex-shrink-0 mt-6",children:(0,s.jsx)(o.Search,{className:"w-5 h-5 text-[#18A36C]"})}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)(h.FormField,{label:"Поиск координат по адресу",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(h.FormInput,{type:"text",value:T,onChange:e=>M(e.target.value),placeholder:"Беларусь, Витебская область, г. Новополоцк, ул. Парковая, д. 16А",onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),K())}}),(0,s.jsx)("button",{onClick:K,disabled:S||!T,className:"px-4 py-2 bg-[#18A36C] hover:bg-[#15905f] disabled:bg-gray-300 text-white text-sm font-medium rounded-lg transition-colors flex items-center gap-2 whitespace-nowrap cursor-pointer",title:"Автоматически найти координаты по введенному адресу",children:S?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Loader2,{className:"w-4 h-4 animate-spin"}),"Поиск..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Search,{className:"w-4 h-4"}),"Найти"]})})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Введите адрес в формате: Витебская область, Новополоцк, улица Парковая, 16А"})]})})]}),(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-green-50 rounded-lg flex items-center justify-center flex-shrink-0 mt-6",children:(0,s.jsx)(i.MapPin,{className:"w-5 h-5 text-green-500"})}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)(h.FormField,{label:"Координаты карты",children:[(0,s.jsx)(h.FormInput,{type:"text",value:O.map_geo,onChange:e=>I({...O,map_geo:e.target.value}),placeholder:"53.9045,27.5615"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Координаты в формате: широта,долгота (автоматически заполняется при поиске)"})]})})]}),(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-orange-50 rounded-lg flex items-center justify-center flex-shrink-0 mt-6",children:(0,s.jsx)(n.Clock,{className:"w-5 h-5 text-orange-500"})}),(0,s.jsxs)("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(h.FormField,{label:"Режим работы (Пн-Сб)",children:(0,s.jsx)(h.FormInput,{type:"text",value:O.work_hours_main,onChange:e=>I({...O,work_hours_main:e.target.value}),placeholder:"09:00-20:00"})}),(0,s.jsx)(h.FormField,{label:"Режим работы (Воскресенье)",children:(0,s.jsx)(h.FormInput,{type:"text",value:O.work_hours_sunday,onChange:e=>I({...O,work_hours_sunday:e.target.value}),placeholder:"10:00-18:00"})})]})]}),(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-purple-50 rounded-lg flex items-center justify-center flex-shrink-0 mt-6",children:(0,s.jsx)(r.Phone,{className:"w-5 h-5 text-purple-500"})}),(0,s.jsxs)("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(h.FormField,{label:"Основной телефон",required:!0,children:(0,s.jsx)(h.FormInput,{type:"text",value:O.phone_number,onChange:e=>I({...O,phone_number:e.target.value}),placeholder:"+375(29)161-01-01"})}),(0,s.jsx)(h.FormField,{label:"Дополнительный телефон",children:(0,s.jsx)(h.FormInput,{type:"text",value:O.phone_number_sec,onChange:e=>I({...O,phone_number_sec:e.target.value}),placeholder:"+375(29)162-02-02"})})]})]}),(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-red-50 rounded-lg flex items-center justify-center flex-shrink-0 mt-6",children:(0,s.jsx)(d.Mail,{className:"w-5 h-5 text-red-500"})}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(h.FormField,{label:"Email",required:!0,children:(0,s.jsx)(h.FormInput,{type:"email",value:O.email,onChange:e=>I({...O,email:e.target.value}),placeholder:"info@clinic.by"})})})]}),(0,s.jsx)("div",{className:"pt-4 border-t border-gray-100",children:(0,s.jsx)("button",{onClick:L,disabled:C,className:"w-full md:w-auto px-6 py-3 bg-[#18A36C] hover:bg-[#149259] disabled:bg-gray-300 text-white font-medium rounded-xl transition-colors flex items-center justify-center gap-2 cursor-pointer",children:C?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Loader2,{className:"w-5 h-5 animate-spin"}),"Сохранение..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Save,{className:"w-5 h-5"}),"Сохранить изменения"]})})})]})]})})})]}):(0,s.jsx)(u.AdminAuthForm,{onSuccess:()=>{v()}}):(0,s.jsx)(x.default,{})}e.s(["default",()=>f])}]);