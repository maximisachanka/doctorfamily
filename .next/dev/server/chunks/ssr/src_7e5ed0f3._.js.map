{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Study/commercial-projects/smartmedical/src/components/SMAdmin/SMAdminSkeleton.tsx"],"sourcesContent":["'use client';\n\n// Базовый компонент скелетона\nfunction Skeleton({ className = '' }: { className?: string }) {\n  return (\n    <div className={`animate-pulse bg-gray-200 rounded ${className}`} />\n  );\n}\n\n// Скелетон для карточки в админке\nexport function AdminItemCardSkeleton() {\n  return (\n    <div className=\"bg-white rounded-xl p-5 border border-gray-100 shadow-sm\">\n      <div className=\"flex gap-4 mb-4\">\n        {/* Изображение/Аватар */}\n        <Skeleton className=\"w-16 h-16 rounded-xl flex-shrink-0\" />\n\n        {/* Информация */}\n        <div className=\"flex-1 min-w-0 space-y-2\">\n          <Skeleton className=\"h-5 w-3/4\" />\n          <Skeleton className=\"h-4 w-full\" />\n          <Skeleton className=\"h-4 w-2/3\" />\n        </div>\n      </div>\n\n      {/* Теги/Badges */}\n      <div className=\"flex items-center gap-2 mb-4\">\n        <Skeleton className=\"h-6 w-20 rounded-full\" />\n        <Skeleton className=\"h-6 w-16 rounded-full\" />\n      </div>\n\n      {/* Нижняя часть с кнопками */}\n      <div className=\"flex items-center justify-between pt-4 border-t border-gray-100\">\n        <Skeleton className=\"h-4 w-24\" />\n        <div className=\"flex gap-2\">\n          <Skeleton className=\"h-8 w-8 rounded-lg\" />\n          <Skeleton className=\"h-8 w-8 rounded-lg\" />\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Скелетон для верхней части секции (заголовок + поиск + кнопка)\nexport function AdminSectionHeaderSkeleton() {\n  return (\n    <div className=\"bg-white rounded-2xl p-6 mb-6 border border-gray-100\">\n      <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4\">\n        {/* Заголовок с иконкой */}\n        <div className=\"flex items-center gap-3\">\n          <Skeleton className=\"w-10 h-10 rounded-xl\" />\n          <div>\n            <Skeleton className=\"h-7 w-40 mb-2\" />\n            <Skeleton className=\"h-4 w-32\" />\n          </div>\n        </div>\n\n        {/* Поиск и кнопка */}\n        <div className=\"flex flex-col sm:flex-row gap-3 lg:w-auto w-full\">\n          <Skeleton className=\"h-11 w-full sm:w-64 rounded-xl\" />\n          <Skeleton className=\"h-11 w-full sm:w-48 rounded-xl\" />\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Скелетон для сетки карточек\nexport function AdminGridSkeleton({ count = 12 }: { count?: number }) {\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4\">\n      {Array.from({ length: count }).map((_, i) => (\n        <AdminItemCardSkeleton key={i} />\n      ))}\n    </div>\n  );\n}\n\n// Полный скелетон для секции админки\nexport function AdminSectionSkeleton({ itemCount = 12 }: { itemCount?: number }) {\n  return (\n    <>\n      <AdminSectionHeaderSkeleton />\n      <AdminGridSkeleton count={itemCount} />\n    </>\n  );\n}\n\n// Скелетон для списка (2 колонки, как в отзывах)\nexport function AdminListSkeleton({ count = 6 }: { count?: number }) {\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n      {Array.from({ length: count }).map((_, i) => (\n        <AdminItemCardSkeleton key={i} />\n      ))}\n    </div>\n  );\n}\n\n// Скелетон для карточки отзыва\nexport function AdminFeedbackCardSkeleton() {\n  return (\n    <div className=\"bg-white rounded-xl p-5 border border-gray-100 shadow-sm\">\n      <div className=\"flex gap-4 mb-3\">\n        {/* Круглое фото автора */}\n        <Skeleton className=\"w-14 h-14 rounded-full flex-shrink-0\" />\n\n        {/* Информация */}\n        <div className=\"flex-1 min-w-0 space-y-2\">\n          <Skeleton className=\"h-5 w-2/5\" />\n          {/* Звезды и дата */}\n          <div className=\"flex items-center gap-3\">\n            <Skeleton className=\"h-4 w-24\" />\n            <Skeleton className=\"h-3 w-20\" />\n          </div>\n          <Skeleton className=\"h-4 w-full\" />\n          <Skeleton className=\"h-4 w-4/5\" />\n        </div>\n      </div>\n\n      {/* Badges */}\n      <div className=\"flex items-center gap-2 mb-4\">\n        <Skeleton className=\"h-6 w-32 rounded-full\" />\n        <Skeleton className=\"h-6 w-28 rounded-full\" />\n      </div>\n\n      {/* Actions */}\n      <div className=\"flex items-center justify-end pt-4 border-t border-gray-100\">\n        <div className=\"flex gap-2\">\n          <Skeleton className=\"h-8 w-8 rounded-lg\" />\n          <Skeleton className=\"h-8 w-8 rounded-lg\" />\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Скелетон для сетки отзывов (2 колонки как в реальном компоненте)\nexport function AdminFeedbacksGridSkeleton({ count = 12 }: { count?: number }) {\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n      {Array.from({ length: count }).map((_, i) => (\n        <AdminFeedbackCardSkeleton key={i} />\n      ))}\n    </div>\n  );\n}\n\n// Скелетон для карточки вопроса (длинная карточка на всю ширину)\nexport function AdminQuestionCardSkeleton() {\n  return (\n    <div className=\"bg-white rounded-xl p-5 border border-gray-100 shadow-sm\">\n      <div className=\"flex items-start justify-between gap-4\">\n        <div className=\"flex-1\">\n          {/* Вопрос */}\n          <Skeleton className=\"h-5 w-3/4 mb-2\" />\n\n          {/* Ответ */}\n          <Skeleton className=\"h-4 w-full mb-2\" />\n          <Skeleton className=\"h-4 w-5/6 mb-3\" />\n\n          {/* Badges */}\n          <div className=\"flex items-center gap-2\">\n            <Skeleton className=\"h-6 w-24 rounded-full\" />\n            <Skeleton className=\"h-6 w-32 rounded-full\" />\n          </div>\n        </div>\n\n        {/* Actions */}\n        <div className=\"flex gap-2\">\n          <Skeleton className=\"h-8 w-8 rounded-lg\" />\n          <Skeleton className=\"h-8 w-8 rounded-lg\" />\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Скелетон для списка вопросов (вертикально, одна карточка в строку)\nexport function AdminQuestionsGridSkeleton({ count = 12 }: { count?: number }) {\n  return (\n    <div className=\"space-y-4\">\n      {Array.from({ length: count }).map((_, i) => (\n        <AdminQuestionCardSkeleton key={i} />\n      ))}\n    </div>\n  );\n}\n\n// Скелетон для страницы контактов\nexport function AdminContactsSkeleton() {\n  return (\n    <div className=\"bg-white rounded-2xl p-6 lg:p-8 border border-gray-100\">\n      {/* Header */}\n      <div className=\"flex items-center gap-3 mb-8\">\n        <Skeleton className=\"w-12 h-12 rounded-xl\" />\n        <div>\n          <Skeleton className=\"h-7 w-40 mb-2\" />\n          <Skeleton className=\"h-4 w-64\" />\n        </div>\n      </div>\n\n      {/* Form fields */}\n      <div className=\"space-y-6\">\n        {Array.from({ length: 7 }).map((_, i) => (\n          <div key={i}>\n            <Skeleton className=\"h-4 w-32 mb-2\" />\n            <Skeleton className=\"h-11 w-full rounded-lg\" />\n          </div>\n        ))}\n\n        {/* Button */}\n        <div className=\"pt-4\">\n          <Skeleton className=\"h-11 w-48 rounded-lg\" />\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Скелетон для загрузки доступа (начальная загрузка)\nexport function AdminAccessSkeleton() {\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50 backdrop-blur-md\">\n      {/* Блюр оверлей */}\n      <div className=\"absolute inset-0 bg-white/50 backdrop-blur-sm\" />\n\n      {/* Центральный контент */}\n      <div className=\"relative z-10 text-center\">\n        {/* Анимированный спиннер */}\n        <div className=\"mb-6\">\n          <div className=\"w-16 h-16 mx-auto border-4 border-gray-200 border-t-[#18A36C] rounded-full animate-spin\" />\n        </div>\n\n        {/* Текст загрузки */}\n        <div className=\"space-y-3\">\n          <h2 className=\"text-xl font-semibold text-gray-800\">Проверка доступа...</h2>\n          <p className=\"text-sm text-gray-500\">Пожалуйста, подождите</p>\n        </div>\n\n        {/* Пульсирующие точки */}\n        <div className=\"flex justify-center gap-2 mt-6\">\n          <div className=\"w-2 h-2 bg-[#18A36C] rounded-full animate-pulse\" style={{ animationDelay: '0ms' }} />\n          <div className=\"w-2 h-2 bg-[#18A36C] rounded-full animate-pulse\" style={{ animationDelay: '150ms' }} />\n          <div className=\"w-2 h-2 bg-[#18A36C] rounded-full animate-pulse\" style={{ animationDelay: '300ms' }} />\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 753, "column": 0}, "map": {"version":3,"sources":["file:///C:/Study/commercial-projects/smartmedical/src/components/common/SMBadge/SMBadge.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"../SMUtils/SMUtils\";\n\nconst badgeVariants = cva(\n  \"inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90\",\n        destructive:\n          \"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n);\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"span\"> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"span\";\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  );\n}\n\nexport { Badge, badgeVariants };\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,uKAAG,EACvB,kZACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,UAAU,KAAK,EACf,GAAG,OAEuD;IAC1D,MAAM,OAAO,UAAU,wKAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,wJAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 799, "column": 0}, "map": {"version":3,"sources":["file:///C:/Study/commercial-projects/smartmedical/src/utils/chatNotifications.ts"],"sourcesContent":["const NOTIFIED_CHATS_KEY = 'chat-notifications-notified';\n\n/**\n * Clear notification flag for a specific chat\n * Call this when user opens and reads a chat\n */\nexport function clearChatNotification(chatId: number): void {\n  if (typeof window === 'undefined') return;\n\n  const notifiedChats = JSON.parse(\n    localStorage.getItem(NOTIFIED_CHATS_KEY) || '[]'\n  ) as number[];\n\n  const updated = notifiedChats.filter((id) => id !== chatId);\n  localStorage.setItem(NOTIFIED_CHATS_KEY, JSON.stringify(updated));\n}\n\n/**\n * Clear all chat notifications\n */\nexport function clearAllChatNotifications(): void {\n  if (typeof window === 'undefined') return;\n  localStorage.removeItem(NOTIFIED_CHATS_KEY);\n}\n"],"names":[],"mappings":";;;;;;AAAA,MAAM,qBAAqB;AAMpB,SAAS,sBAAsB,MAAc;IAClD,wCAAmC;;;IAEnC,MAAM;IAIN,MAAM;AAER;AAKO,SAAS;IACd,wCAAmC;;;AAErC","debugId":null}},
    {"offset": {"line": 822, "column": 0}, "map": {"version":3,"sources":["file:///C:/Study/commercial-projects/smartmedical/src/components/SMAdmin/ChatModal.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useRef, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { X, Send, User, Bot, Clock, CheckCheck, Loader2, Ban, UserX, Trash2 } from 'lucide-react';\nimport { Button } from '../common/SMButton/SMButton';\nimport { Badge } from '../common/SMBadge/SMBadge';\nimport { useAlert } from '../common/SMAlert/AlertProvider';\nimport { clearChatNotification } from '@/utils/chatNotifications';\n\ninterface ChatMessage {\n  id: number;\n  chat_id: number;\n  sender_id: number;\n  sender_type: 'patient' | 'operator';\n  content: string;\n  created_at: string;\n  is_read: boolean;\n  sender: {\n    id: number;\n    name: string;\n    avatar_url: string | null;\n  };\n}\n\ninterface Chat {\n  id: number;\n  patient_id: number;\n  operator_id: number | null;\n  status: 'WAITING' | 'ACTIVE' | 'CLOSED';\n  created_at: string;\n  updated_at: string;\n  last_message_at: string | null;\n  has_unread_operator: boolean;\n  has_unread_patient: boolean;\n  patient: {\n    id: number;\n    name: string;\n    email: string;\n    avatar_url: string | null;\n    is_messages_blocked: boolean;\n  };\n  operator: {\n    id: number;\n    name: string;\n  } | null;\n  messages: ChatMessage[];\n}\n\ninterface ChatModalProps {\n  chatId: number;\n  onClose: () => void;\n}\n\nexport function ChatModal({ chatId, onClose }: ChatModalProps) {\n  const [chat, setChat] = useState<Chat | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [message, setMessage] = useState('');\n  const [sending, setSending] = useState(false);\n  const [showBlockConfirm, setShowBlockConfirm] = useState(false);\n  const [blocking, setBlocking] = useState(false);\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\n  const [deleting, setDeleting] = useState(false);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const alert = useAlert();\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  const loadChat = useCallback(async () => {\n    try {\n      const response = await fetch(`/api/operator-chat/${chatId}`);\n      if (response.ok) {\n        const data = await response.json();\n        setChat(data.chat);\n        // Clear notification when chat is opened and loaded\n        clearChatNotification(chatId);\n      } else {\n        alert.error('Не удалось загрузить чат', 'Ошибка');\n      }\n    } catch (error) {\n      alert.error('Ошибка при загрузке чата', 'Ошибка');\n    } finally {\n      setLoading(false);\n    }\n  }, [chatId, alert]);\n\n  useEffect(() => {\n    loadChat();\n    // Автообновление убрано - обновляется только при отправке сообщения и открытии\n  }, [loadChat]);\n\n  useEffect(() => {\n    if (chat) {\n      scrollToBottom();\n    }\n  }, [chat?.messages]);\n\n  const handleTakeChat = async () => {\n    try {\n      const response = await fetch(`/api/operator-chat/${chatId}`, {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ action: 'take' }),\n      });\n\n      if (response.ok) {\n        alert.success('Вы взяли чат', 'Успех');\n        loadChat();\n      } else {\n        alert.error('Не удалось взять чат', 'Ошибка');\n      }\n    } catch (error) {\n      alert.error('Ошибка при взятии чата', 'Ошибка');\n    }\n  };\n\n  const handleCloseChat = async () => {\n    try {\n      const response = await fetch(`/api/operator-chat/${chatId}`, {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ status: 'CLOSED' }),\n      });\n\n      if (response.ok) {\n        alert.success('Чат закрыт', 'Успех');\n        onClose();\n      } else {\n        alert.error('Не удалось закрыть чат', 'Ошибка');\n      }\n    } catch (error) {\n      alert.error('Ошибка при закрытии чата', 'Ошибка');\n    }\n  };\n\n  const handleBlockUser = () => {\n    if (!chat) return;\n    setShowBlockConfirm(true);\n  };\n\n  const confirmBlockUser = async () => {\n    if (!chat || blocking) return;\n\n    const action = chat.patient.is_messages_blocked ? 'unblock' : 'block';\n    setBlocking(true);\n\n    try {\n      const response = await fetch(`/api/operator-chat/${chatId}/block`, {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ action }),\n      });\n\n      const data = await response.json();\n\n      if (response.ok) {\n        alert.success(\n          action === 'block' ? 'Пользователь заблокирован и все его чаты удалены' : 'Пользователь разблокирован',\n          'Успех'\n        );\n        if (action === 'block') {\n          // Чат удален, закрываем модалку\n          onClose();\n        } else {\n          await loadChat();\n          setShowBlockConfirm(false);\n        }\n      } else {\n        alert.error(data.error || 'Не удалось ' + (action === 'block' ? 'заблокировать' : 'разблокировать') + ' пользователя', 'Ошибка');\n      }\n    } catch (error) {\n      alert.error('Ошибка при блокировке/разблокировке', 'Ошибка');\n    } finally {\n      setBlocking(false);\n    }\n  };\n\n  const handleDeleteChat = () => {\n    setShowDeleteConfirm(true);\n  };\n\n  const confirmDeleteChat = async () => {\n    if (!chat || deleting) return;\n\n    setDeleting(true);\n\n    try {\n      const response = await fetch(`/api/operator-chat/${chatId}`, {\n        method: 'DELETE',\n      });\n\n      const data = await response.json();\n\n      if (response.ok) {\n        alert.success('Чат удален', 'Успех');\n        onClose();\n      } else {\n        alert.error(data.error || 'Не удалось удалить чат', 'Ошибка');\n      }\n    } catch (error) {\n      alert.error('Ошибка при удалении чата', 'Ошибка');\n    } finally {\n      setDeleting(false);\n    }\n  };\n\n  const handleSendMessage = async () => {\n    if (!message.trim() || sending) return;\n\n    setSending(true);\n    try {\n      const response = await fetch(`/api/operator-chat/${chatId}`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ content: message.trim() }),\n      });\n\n      if (response.ok) {\n        setMessage('');\n        loadChat();\n      } else {\n        const data = await response.json();\n        alert.error(data.error || 'Не удалось отправить сообщение', 'Ошибка');\n      }\n    } catch (error) {\n      alert.error('Ошибка при отправке сообщения', 'Ошибка');\n    } finally {\n      setSending(false);\n    }\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case 'WAITING':\n        return <Badge variant=\"outline\" className=\"border-amber-400 text-amber-700 bg-amber-50\">Ожидает</Badge>;\n      case 'ACTIVE':\n        return <Badge variant=\"default\" className=\"bg-[#18A36C] text-white border-transparent shadow-sm\">Активный</Badge>;\n      case 'CLOSED':\n        return <Badge variant=\"secondary\" className=\"bg-gray-200 text-gray-700\">Закрыт</Badge>;\n      default:\n        return null;\n    }\n  };\n\n  const formatTime = (date: string) => {\n    const d = new Date(date);\n    return d.toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' });\n  };\n\n  return (\n    <AnimatePresence>\n      <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4\">\n        {/* Overlay */}\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          onClick={onClose}\n          className=\"absolute inset-0 bg-black/50 backdrop-blur-sm\"\n        />\n\n        {/* Modal */}\n        <motion.div\n          initial={{ opacity: 0, scale: 0.95, y: 20 }}\n          animate={{ opacity: 1, scale: 1, y: 0 }}\n          exit={{ opacity: 0, scale: 0.95, y: 20 }}\n          className=\"relative z-10 w-full max-w-3xl bg-white rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[80vh]\"\n        >\n          {loading ? (\n            <div className=\"flex items-center justify-center h-96\">\n              <Loader2 className=\"w-8 h-8 text-[#18A36C] animate-spin\" />\n            </div>\n          ) : chat ? (\n            <>\n              {/* Header */}\n              <div className=\"bg-white border-b border-gray-200 p-4 sm:p-6 flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\n                <div className=\"flex items-center gap-3 sm:gap-4 min-w-0\">\n                  {chat.patient.avatar_url ? (\n                    <img\n                      src={chat.patient.avatar_url}\n                      alt={chat.patient.name}\n                      className=\"w-12 h-12 sm:w-14 sm:h-14 rounded-full object-cover border-2 border-gray-200 flex-shrink-0\"\n                    />\n                  ) : (\n                    <div className=\"w-12 h-12 sm:w-14 sm:h-14 bg-gradient-to-br from-[#18A36C] to-[#15905f] rounded-full flex items-center justify-center shadow-md flex-shrink-0\">\n                      <User className=\"w-6 h-6 sm:w-7 sm:h-7 text-white\" />\n                    </div>\n                  )}\n                  <div className=\"min-w-0 flex-1\">\n                    <h2 className=\"text-lg sm:text-xl font-bold text-gray-900 truncate\">{chat.patient.name}</h2>\n                    <p className=\"text-gray-600 text-xs sm:text-sm truncate\">{chat.patient.email}</p>\n                    <div className=\"mt-1.5 flex items-center gap-2 flex-wrap\">\n                      {getStatusBadge(chat.status)}\n                      {chat.patient.is_messages_blocked && (\n                        <Badge variant=\"secondary\" className=\"bg-gray-700 text-white text-xs\">\n                          <Ban className=\"w-3 h-3 mr-1\" />\n                          Заблокирован\n                        </Badge>\n                      )}\n                    </div>\n                  </div>\n                </div>\n                <div className=\"flex items-center gap-2 flex-shrink-0\">\n                  {chat.status !== 'CLOSED' && (\n                    <>\n                      {chat.status === 'WAITING' && (\n                        <Button\n                          onClick={handleTakeChat}\n                          className=\"bg-[#18A36C] text-white hover:bg-[#15905f] shadow-sm cursor-pointer\"\n                        >\n                          Взять чат\n                        </Button>\n                      )}\n                      {chat.status === 'ACTIVE' && (\n                        <Button\n                          onClick={handleCloseChat}\n                          variant=\"outline\"\n                          className=\"text-gray-700 border-gray-300 cursor-pointer\"\n                        >\n                          Закрыть чат\n                        </Button>\n                      )}\n                    </>\n                  )}\n                  <button\n                    onClick={handleDeleteChat}\n                    title=\"Удалить чат\"\n                    className=\"w-10 h-10 rounded-lg flex items-center justify-center transition-all bg-red-50 text-red-600 hover:bg-red-100 cursor-pointer\"\n                  >\n                    <Trash2 className=\"w-5 h-5\" />\n                  </button>\n                  <button\n                    onClick={handleBlockUser}\n                    title={chat.patient.is_messages_blocked ? 'Разблокировать' : 'Заблокировать'}\n                    className={`w-10 h-10 rounded-lg flex items-center justify-center transition-all cursor-pointer ${chat.patient.is_messages_blocked\n                      ? 'bg-[#18A36C]/10 text-[#18A36C] hover:bg-[#18A36C]/20'\n                      : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\n                      }`}\n                  >\n                    {chat.patient.is_messages_blocked ? (\n                      <UserX className=\"w-5 h-5\" />\n                    ) : (\n                      <Ban className=\"w-5 h-5\" />\n                    )}\n                  </button>\n                  <button\n                    onClick={onClose}\n                    className=\"w-10 h-10 rounded-lg bg-gray-100 hover:bg-gray-200 flex items-center justify-center text-gray-600 transition-colors cursor-pointer\"\n                  >\n                    <X className=\"w-5 h-5\" />\n                  </button>\n                </div>\n              </div>\n\n              {/* Messages */}\n              <div className=\"flex-1 overflow-y-auto p-6 space-y-4 bg-gradient-to-b from-gray-50 to-white\">\n                {chat.messages.map((msg) => (\n                  <motion.div\n                    key={msg.id}\n                    initial={{ opacity: 0, y: 10 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    className={`flex gap-3 ${msg.sender_type === 'operator' ? 'flex-row-reverse' : ''}`}\n                  >\n                    {msg.sender.avatar_url ? (\n                      <img\n                        src={msg.sender.avatar_url}\n                        alt={msg.sender.name}\n                        className=\"w-10 h-10 rounded-full object-cover flex-shrink-0 shadow-sm\"\n                      />\n                    ) : (\n                      <div\n                        className={`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 shadow-sm ${msg.sender_type === 'operator'\n                          ? 'bg-gradient-to-br from-[#18A36C] to-[#15905f]'\n                          : 'bg-gradient-to-br from-gray-400 to-gray-500'\n                          }`}\n                      >\n                        {msg.sender_type === 'operator' ? (\n                          <Bot className=\"w-5 h-5 text-white\" />\n                        ) : (\n                          <User className=\"w-5 h-5 text-white\" />\n                        )}\n                      </div>\n                    )}\n                    <div className={`max-w-[70%] ${msg.sender_type === 'operator' ? 'items-end' : 'items-start'} flex flex-col`}>\n                      <div\n                        className={`rounded-2xl p-4 shadow-sm ${msg.sender_type === 'operator'\n                          ? 'bg-gradient-to-br from-[#18A36C] to-[#15905f] text-white'\n                          : 'bg-white text-gray-800 border border-gray-200'\n                          }`}\n                      >\n                        <p className=\"text-sm leading-relaxed whitespace-pre-wrap\">{msg.content}</p>\n                      </div>\n                      <div className=\"flex items-center gap-2 mt-1.5 px-2\">\n                        <Clock className=\"w-3 h-3 text-gray-400\" />\n                        <span className=\"text-xs text-gray-500\">{formatTime(msg.created_at)}</span>\n                        {msg.sender_type === 'operator' && msg.is_read && (\n                          <CheckCheck className=\"w-4 h-4 text-[#18A36C]\" />\n                        )}\n                      </div>\n                    </div>\n                  </motion.div>\n                ))}\n                <div ref={messagesEndRef} />\n              </div>\n\n              {/* Input */}\n              {chat.status !== 'CLOSED' && (\n                <div className=\"p-4 bg-white border-t border-gray-200\">\n                  <div className=\"flex gap-3\">\n                    <input\n                      type=\"text\"\n                      value={message}\n                      onChange={(e) => setMessage(e.target.value)}\n                      onKeyPress={handleKeyPress}\n                      placeholder=\"Напишите сообщение...\"\n                      disabled={sending}\n                      className=\"flex-1 px-4 py-3 bg-gray-50 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-[#18A36C] focus:border-transparent transition-all disabled:opacity-50\"\n                    />\n                    <button\n                      onClick={handleSendMessage}\n                      disabled={sending || !message.trim()}\n                      className=\"w-12 h-12 bg-gradient-to-br from-[#18A36C] to-[#15905f] rounded-xl flex items-center justify-center text-white hover:shadow-md hover:scale-105 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 cursor-pointer\"\n                    >\n                      {sending ? (\n                        <Loader2 className=\"w-5 h-5 animate-spin\" />\n                      ) : (\n                        <Send className=\"w-5 h-5\" />\n                      )}\n                    </button>\n                  </div>\n                </div>\n              )}\n            </>\n          ) : (\n            <div className=\"flex items-center justify-center h-96\">\n              <p className=\"text-gray-600\">Чат не найден</p>\n            </div>\n          )}\n        </motion.div>\n\n        {/* Block Confirmation Modal */}\n        {showBlockConfirm && chat && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"absolute inset-0 z-20 flex items-center justify-center bg-black/40 backdrop-blur-sm\"\n            onClick={() => setShowBlockConfirm(false)}\n          >\n            <motion.div\n              initial={{ opacity: 0, scale: 0.9, y: 20 }}\n              animate={{ opacity: 1, scale: 1, y: 0 }}\n              exit={{ opacity: 0, scale: 0.9, y: 20 }}\n              onClick={(e) => e.stopPropagation()}\n              className=\"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 overflow-hidden\"\n            >\n              {/* Header */}\n              <div className={`p-6 ${chat.patient.is_messages_blocked\n                ? 'bg-gradient-to-r from-[#18A36C] to-[#15905f]'\n                : 'bg-gradient-to-r from-[#18A36C] to-[#15905f]'\n                }`}>\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center\">\n                    {chat.patient.is_messages_blocked ? (\n                      <UserX className=\"w-6 h-6 text-white\" />\n                    ) : (\n                      <Ban className=\"w-6 h-6 text-white\" />\n                    )}\n                  </div>\n                  <div>\n                    <h3 className=\"text-lg font-bold text-white\">\n                      {chat.patient.is_messages_blocked ? 'Разблокировать пользователя?' : 'Заблокировать пользователя?'}\n                    </h3>\n                    <p className=\"text-sm text-white/80\">{chat.patient.name}</p>\n                  </div>\n                </div>\n              </div>\n\n              {/* Content */}\n              <div className=\"p-6\">\n                <p className=\"text-gray-700 leading-relaxed\">\n                  {chat.patient.is_messages_blocked\n                    ? 'Пользователь сможет снова создавать новые чаты и отправлять сообщения.'\n                    : 'Пользователь не сможет создавать новые чаты и отправлять сообщения. Все его чаты будут удалены.'}\n                </p>\n              </div>\n\n              {/* Actions */}\n              <div className=\"px-6 pb-6 flex gap-3 justify-end\">\n                <Button\n                  variant=\"outline\"\n                  onClick={() => setShowBlockConfirm(false)}\n                  disabled={blocking}\n                  className=\"border-gray-300 text-gray-700 hover:bg-gray-50 cursor-pointer\"\n                >\n                  Отмена\n                </Button>\n                <Button\n                  onClick={confirmBlockUser}\n                  disabled={blocking}\n                  className={\n                    chat.patient.is_messages_blocked\n                      ? 'bg-[#18A36C] hover:bg-[#15905f] text-white shadow-md flex items-center gap-2 cursor-pointer'\n                      : 'bg-gray-700 hover:bg-gray-800 text-white shadow-md flex items-center gap-2 cursor-pointer'\n                  }\n                >\n                  {blocking && <Loader2 className=\"w-4 h-4 animate-spin\" />}\n                  {chat.patient.is_messages_blocked ? 'Разблокировать' : 'Заблокировать'}\n                </Button>\n              </div>\n            </motion.div>\n          </motion.div>\n        )}\n\n        {/* Delete Confirmation Modal */}\n        {showDeleteConfirm && chat && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"absolute inset-0 z-20 flex items-center justify-center bg-black/40 backdrop-blur-sm\"\n            onClick={() => setShowDeleteConfirm(false)}\n          >\n            <motion.div\n              initial={{ opacity: 0, scale: 0.9, y: 20 }}\n              animate={{ opacity: 1, scale: 1, y: 0 }}\n              exit={{ opacity: 0, scale: 0.9, y: 20 }}\n              onClick={(e) => e.stopPropagation()}\n              className=\"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 overflow-hidden\"\n            >\n              {/* Header */}\n              <div className=\"p-6 bg-gradient-to-r from-red-500 to-red-600\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center\">\n                    <Trash2 className=\"w-6 h-6 text-white\" />\n                  </div>\n                  <div>\n                    <h3 className=\"text-lg font-bold text-white\">\n                      Удалить чат?\n                    </h3>\n                    <p className=\"text-sm text-white/80\">{chat.patient.name}</p>\n                  </div>\n                </div>\n              </div>\n\n              {/* Content */}\n              <div className=\"p-6\">\n                <p className=\"text-gray-700 leading-relaxed\">\n                  Все сообщения в этом чате будут удалены безвозвратно. Это действие нельзя отменить.\n                </p>\n              </div>\n\n              {/* Actions */}\n              <div className=\"px-6 pb-6 flex gap-3 justify-end\">\n                <Button\n                  variant=\"outline\"\n                  onClick={() => setShowDeleteConfirm(false)}\n                  disabled={deleting}\n                  className=\"border-gray-300 text-gray-700 hover:bg-gray-50 cursor-pointer\"\n                >\n                  Отмена\n                </Button>\n                <Button\n                  onClick={confirmDeleteChat}\n                  disabled={deleting}\n                  className=\"bg-red-500 hover:bg-red-600 text-white shadow-md flex items-center gap-2 cursor-pointer\"\n                >\n                  {deleting && <Loader2 className=\"w-4 h-4 animate-spin\" />}\n                  Удалить\n                </Button>\n              </div>\n            </motion.div>\n          </motion.div>\n        )}\n      </div>\n    </AnimatePresence>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1820, "column": 0}, "map": {"version":3,"sources":["file:///C:/Study/commercial-projects/smartmedical/src/components/common/SMPagination/SMPagination.tsx"],"sourcesContent":["\"use client\";\n\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\nimport { Button } from \"../SMButton/SMButton\";\n\ninterface PaginationProps {\n  currentPage: number;\n  totalPages: number;\n  onPageChange: (page: number) => void;\n  className?: string;\n}\n\nexport function Pagination({\n  currentPage,\n  totalPages,\n  onPageChange,\n  className = \"\",\n}: PaginationProps) {\n  // \u001d5 ?>:07K205< ?038=0F8N 5A;8 2A53> 1 AB@0=8F0\n  if (totalPages <= 1) return null;\n\n  // \u00135=5@8@C5< <0AA82 =><5@>2 AB@0=8F 4;O >B>1@065=8O\n  const getPageNumbers = () => {\n    const pages: (number | string)[] = [];\n    const maxVisible = 5; // \u001c0:A8<C< 2848<KE :=>?>: AB@0=8F\n\n    if (totalPages <= maxVisible) {\n      // \u0015A;8 AB@0=8F <0;>, ?>:07K205< 2A5\n      for (let i = 1; i <= totalPages; i++) {\n        pages.push(i);\n      }\n    } else {\n      // \u0012A5340 ?>:07K205< ?5@2CN AB@0=8FC\n      pages.push(1);\n\n      if (currentPage > 3) {\n        pages.push(\"...\");\n      }\n\n      // \u001f>:07K205< AB@0=8FK 2>:@C3 B5:CI59\n      const start = Math.max(2, currentPage - 1);\n      const end = Math.min(totalPages - 1, currentPage + 1);\n\n      for (let i = start; i <= end; i++) {\n        pages.push(i);\n      }\n\n      if (currentPage < totalPages - 2) {\n        pages.push(\"...\");\n      }\n\n      // \u0012A5340 ?>:07K205< ?>A;54=NN AB@0=8FC\n      pages.push(totalPages);\n    }\n\n    return pages;\n  };\n\n  const pages = getPageNumbers();\n\n  return (\n    <div className={`flex items-center justify-center gap-2 ${className}`}>\n      {/* \u001a=>?:0 \"\u001d0704\" */}\n      <Button\n        onClick={() => onPageChange(currentPage - 1)}\n        disabled={currentPage === 1}\n        variant=\"outline\"\n        className=\"h-10 w-10 p-0 border-gray-300 hover:bg-gray-50 disabled:opacity-50 cursor-pointer disabled:cursor-not-allowed hidden sm:flex items-center justify-center\"\n      >\n        <ChevronLeft className=\"w-5 h-5\" />\n      </Button>\n\n      {/* \u001c>18;L=0O 25@A8O - B>;L:> B5:CI0O AB@0=8F0 */}\n      <div className=\"flex sm:hidden items-center gap-2\">\n        <Button\n          onClick={() => onPageChange(currentPage - 1)}\n          disabled={currentPage === 1}\n          variant=\"outline\"\n          className=\"h-10 px-3 border-gray-300 hover:bg-gray-50 disabled:opacity-50 cursor-pointer disabled:cursor-not-allowed\"\n        >\n          <ChevronLeft className=\"w-4 h-4\" />\n        </Button>\n\n        <span className=\"text-sm text-gray-700 min-w-[80px] text-center\">\n          {currentPage} / {totalPages}\n        </span>\n\n        <Button\n          onClick={() => onPageChange(currentPage + 1)}\n          disabled={currentPage === totalPages}\n          variant=\"outline\"\n          className=\"h-10 px-3 border-gray-300 hover:bg-gray-50 disabled:opacity-50 cursor-pointer disabled:cursor-not-allowed\"\n        >\n          <ChevronRight className=\"w-4 h-4\" />\n        </Button>\n      </div>\n\n      {/* \u00145A:B>?=0O 25@A8O - 2A5 =><5@0 AB@0=8F */}\n      <div className=\"hidden sm:flex items-center gap-2\">\n        {pages.map((page, index) => {\n          if (page === \"...\") {\n            return (\n              <span\n                key={`ellipsis-${index}`}\n                className=\"px-2 text-gray-500\"\n              >\n                ...\n              </span>\n            );\n          }\n\n          const pageNumber = page as number;\n          const isActive = pageNumber === currentPage;\n\n          return (\n            <Button\n              key={pageNumber}\n              onClick={() => onPageChange(pageNumber)}\n              variant={isActive ? \"default\" : \"outline\"}\n              className={`h-10 w-10 p-0 cursor-pointer ${\n                isActive\n                  ? \"bg-[#18A36C] hover:bg-[#18A36C]/90 text-white border-[#18A36C]\"\n                  : \"border-gray-300 hover:bg-gray-50 text-gray-700\"\n              }`}\n            >\n              {pageNumber}\n            </Button>\n          );\n        })}\n      </div>\n\n      {/* \u001a=>?:0 \"\u0012?5@54\" */}\n      <Button\n        onClick={() => onPageChange(currentPage + 1)}\n        disabled={currentPage === totalPages}\n        variant=\"outline\"\n        className=\"h-10 w-10 p-0 border-gray-300 hover:bg-gray-50 disabled:opacity-50 cursor-pointer disabled:cursor-not-allowed hidden sm:flex items-center justify-center\"\n      >\n        <ChevronRight className=\"w-5 h-5\" />\n      </Button>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AAHA;;;;AAYO,SAAS,WAAW,EACzB,WAAW,EACX,UAAU,EACV,YAAY,EACZ,YAAY,EAAE,EACE;IAChB,gDAAgD;IAChD,IAAI,cAAc,GAAG,OAAO;IAE5B,oDAAoD;IACpD,MAAM,iBAAiB;QACrB,MAAM,QAA6B,EAAE;QACrC,MAAM,aAAa,GAAG,kCAAkC;QAExD,IAAI,cAAc,YAAY;YAC5B,oCAAoC;YACpC,IAAK,IAAI,IAAI,GAAG,KAAK,YAAY,IAAK;gBACpC,MAAM,IAAI,CAAC;YACb;QACF,OAAO;YACL,oCAAoC;YACpC,MAAM,IAAI,CAAC;YAEX,IAAI,cAAc,GAAG;gBACnB,MAAM,IAAI,CAAC;YACb;YAEA,qCAAqC;YACrC,MAAM,QAAQ,KAAK,GAAG,CAAC,GAAG,cAAc;YACxC,MAAM,MAAM,KAAK,GAAG,CAAC,aAAa,GAAG,cAAc;YAEnD,IAAK,IAAI,IAAI,OAAO,KAAK,KAAK,IAAK;gBACjC,MAAM,IAAI,CAAC;YACb;YAEA,IAAI,cAAc,aAAa,GAAG;gBAChC,MAAM,IAAI,CAAC;YACb;YAEA,uCAAuC;YACvC,MAAM,IAAI,CAAC;QACb;QAEA,OAAO;IACT;IAEA,MAAM,QAAQ;IAEd,qBACE,8OAAC;QAAI,WAAW,CAAC,uCAAuC,EAAE,WAAW;;0BAEnE,8OAAC,8JAAM;gBACL,SAAS,IAAM,aAAa,cAAc;gBAC1C,UAAU,gBAAgB;gBAC1B,SAAQ;gBACR,WAAU;0BAEV,cAAA,8OAAC,mOAAW;oBAAC,WAAU;;;;;;;;;;;0BAIzB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,8JAAM;wBACL,SAAS,IAAM,aAAa,cAAc;wBAC1C,UAAU,gBAAgB;wBAC1B,SAAQ;wBACR,WAAU;kCAEV,cAAA,8OAAC,mOAAW;4BAAC,WAAU;;;;;;;;;;;kCAGzB,8OAAC;wBAAK,WAAU;;4BACb;4BAAY;4BAAI;;;;;;;kCAGnB,8OAAC,8JAAM;wBACL,SAAS,IAAM,aAAa,cAAc;wBAC1C,UAAU,gBAAgB;wBAC1B,SAAQ;wBACR,WAAU;kCAEV,cAAA,8OAAC,sOAAY;4BAAC,WAAU;;;;;;;;;;;;;;;;;0BAK5B,8OAAC;gBAAI,WAAU;0BACZ,MAAM,GAAG,CAAC,CAAC,MAAM;oBAChB,IAAI,SAAS,OAAO;wBAClB,qBACE,8OAAC;4BAEC,WAAU;sCACX;2BAFM,CAAC,SAAS,EAAE,OAAO;;;;;oBAM9B;oBAEA,MAAM,aAAa;oBACnB,MAAM,WAAW,eAAe;oBAEhC,qBACE,8OAAC,8JAAM;wBAEL,SAAS,IAAM,aAAa;wBAC5B,SAAS,WAAW,YAAY;wBAChC,WAAW,CAAC,6BAA6B,EACvC,WACI,mEACA,kDACJ;kCAED;uBATI;;;;;gBAYX;;;;;;0BAIF,8OAAC,8JAAM;gBACL,SAAS,IAAM,aAAa,cAAc;gBAC1C,UAAU,gBAAgB;gBAC1B,SAAQ;gBACR,WAAU;0BAEV,cAAA,8OAAC,sOAAY;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAIhC","debugId":null}},
    {"offset": {"line": 1999, "column": 0}, "map": {"version":3,"sources":["file:///C:/Study/commercial-projects/smartmedical/src/hooks/useUrlPagination.ts"],"sourcesContent":["import { useRouter, usePathname } from 'next/navigation';\nimport { useCallback, useMemo, use } from 'react';\nimport { ReadonlyURLSearchParams } from 'next/navigation';\n\n// Safe wrapper для useSearchParams\nfunction useSafeSearchParams(): ReadonlyURLSearchParams | null {\n  try {\n    // Динамический импорт useSearchParams\n    const { useSearchParams } = require('next/navigation');\n    return useSearchParams();\n  } catch {\n    return null;\n  }\n}\n\nexport function useUrlPagination(itemsPerPage: number = 12) {\n  const searchParams = useSafeSearchParams();\n  const router = useRouter();\n  const pathname = usePathname();\n\n  // Получаем текущую страницу из URL (по умолчанию 1)\n  const currentPage = useMemo(() => {\n    if (!searchParams) return 1;\n    const page = searchParams.get('p');\n    const pageNum = page ? parseInt(page, 10) : 1;\n    return pageNum > 0 ? pageNum : 1;\n  }, [searchParams]);\n\n  // Функция для изменения страницы\n  const setPage = useCallback((page: number) => {\n    const params = new URLSearchParams(searchParams?.toString() || '');\n\n    if (page === 1) {\n      // Удаляем параметр p если страница первая\n      params.delete('p');\n    } else {\n      params.set('p', page.toString());\n    }\n\n    const queryString = params.toString();\n    const newUrl = queryString ? `${pathname}?${queryString}` : pathname;\n\n    // Используем replace вместо push чтобы не добавлять в историю\n    router.replace(newUrl, { scroll: false });\n  }, [searchParams, pathname, router]);\n\n  // Функция для получения пагинированных данных\n  const paginateData = useCallback(<T,>(data: T[]): {\n    paginatedData: T[];\n    totalPages: number;\n    startIndex: number;\n    endIndex: number;\n  } => {\n    const totalPages = Math.ceil(data.length / itemsPerPage);\n    const startIndex = (currentPage - 1) * itemsPerPage;\n    const endIndex = startIndex + itemsPerPage;\n    const paginatedData = data.slice(startIndex, endIndex);\n\n    return {\n      paginatedData,\n      totalPages,\n      startIndex,\n      endIndex,\n    };\n  }, [currentPage, itemsPerPage]);\n\n  return {\n    currentPage,\n    setPage,\n    paginateData,\n    itemsPerPage,\n  };\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAGA,mCAAmC;AACnC,SAAS;IACP,IAAI;QACF,sCAAsC;QACtC,MAAM,EAAE,eAAe,EAAE;QACzB,OAAO;IACT,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEO,SAAS,iBAAiB,eAAuB,EAAE;IACxD,MAAM,eAAe;IACrB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,WAAW,IAAA,iJAAW;IAE5B,oDAAoD;IACpD,MAAM,cAAc,IAAA,gNAAO,EAAC;QAC1B,IAAI,CAAC,cAAc,OAAO;QAC1B,MAAM,OAAO,aAAa,GAAG,CAAC;QAC9B,MAAM,UAAU,OAAO,SAAS,MAAM,MAAM;QAC5C,OAAO,UAAU,IAAI,UAAU;IACjC,GAAG;QAAC;KAAa;IAEjB,iCAAiC;IACjC,MAAM,UAAU,IAAA,oNAAW,EAAC,CAAC;QAC3B,MAAM,SAAS,IAAI,gBAAgB,cAAc,cAAc;QAE/D,IAAI,SAAS,GAAG;YACd,0CAA0C;YAC1C,OAAO,MAAM,CAAC;QAChB,OAAO;YACL,OAAO,GAAG,CAAC,KAAK,KAAK,QAAQ;QAC/B;QAEA,MAAM,cAAc,OAAO,QAAQ;QACnC,MAAM,SAAS,cAAc,GAAG,SAAS,CAAC,EAAE,aAAa,GAAG;QAE5D,8DAA8D;QAC9D,OAAO,OAAO,CAAC,QAAQ;YAAE,QAAQ;QAAM;IACzC,GAAG;QAAC;QAAc;QAAU;KAAO;IAEnC,8CAA8C;IAC9C,MAAM,eAAe,IAAA,oNAAW,EAAC,CAAK;QAMpC,MAAM,aAAa,KAAK,IAAI,CAAC,KAAK,MAAM,GAAG;QAC3C,MAAM,aAAa,CAAC,cAAc,CAAC,IAAI;QACvC,MAAM,WAAW,aAAa;QAC9B,MAAM,gBAAgB,KAAK,KAAK,CAAC,YAAY;QAE7C,OAAO;YACL;YACA;YACA;YACA;QACF;IACF,GAAG;QAAC;QAAa;KAAa;IAE9B,OAAO;QACL;QACA;QACA;QACA;IACF;AACF","debugId":null}},
    {"offset": {"line": 2077, "column": 0}, "map": {"version":3,"sources":["file:///C:/Study/commercial-projects/smartmedical/src/app/admin/chat/page.tsx"],"sourcesContent":["'use client';\n\nexport const dynamic = 'force-dynamic';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { useSession } from 'next-auth/react';\nimport { useRouter } from 'next/navigation';\nimport { AdminAccessSkeleton } from '@/components/SMAdmin/SMAdminSkeleton';\nimport { MessagesSquare, Clock, User, CheckCheck, MessageCircle, Ban, UserX, Loader2, ArrowLeft } from 'lucide-react';\nimport { Badge } from '@/components/common/SMBadge/SMBadge';\nimport { Button } from '@/components/common/SMButton/SMButton';\nimport { ChatModal } from '@/components/SMAdmin/ChatModal';\nimport { useAlert } from '@/components/common/SMAlert/AlertProvider';\nimport { Pagination } from '@/components/common/SMPagination/SMPagination';\nimport { useUrlPagination } from '@/hooks/useUrlPagination';\n\ninterface ChatMessage {\n  id: number;\n  chat_id: number;\n  sender_id: number;\n  sender_type: 'patient' | 'operator';\n  content: string;\n  created_at: string;\n  is_read: boolean;\n}\n\ninterface Chat {\n  id: number;\n  patient_id: number;\n  operator_id: number | null;\n  status: 'WAITING' | 'ACTIVE' | 'CLOSED';\n  created_at: string;\n  updated_at: string;\n  last_message_at: string | null;\n  has_unread_operator: boolean;\n  has_unread_patient: boolean;\n  patient: {\n    id: number;\n    name: string;\n    email: string;\n    avatar_url: string | null;\n    is_messages_blocked: boolean;\n  };\n  operator: {\n    id: number;\n    name: string;\n  } | null;\n  messages: ChatMessage[];\n}\n\ninterface BlockedUser {\n  id: number;\n  name: string;\n  email: string;\n  avatar_url: string | null;\n  phone: string | null;\n  registration_date: string;\n}\n\nexport default function AdminChatPage() {\n  const { data: session, status } = useSession();\n  const router = useRouter();\n  const alert = useAlert();\n\n  const [hasAdminRole, setHasAdminRole] = useState<boolean | null>(null);\n  const [isCheckingRole, setIsCheckingRole] = useState(true);\n  const [chats, setChats] = useState<Chat[]>([]);\n  const [blockedUsers, setBlockedUsers] = useState<BlockedUser[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedChatId, setSelectedChatId] = useState<number | null>(null);\n  const [filterStatus, setFilterStatus] = useState<'ALL' | 'WAITING' | 'ACTIVE' | 'CLOSED' | 'BLOCKED'>('ALL');\n  const [unblockingUserId, setUnblockingUserId] = useState<number | null>(null);\n  // Pagination hook\n  const { currentPage, setPage, paginateData } = useUrlPagination(9);\n  const ITEMS_PER_PAGE = 9;\n\n  // Check admin role\n  const checkAdminRole = useCallback(async () => {\n    setIsCheckingRole(true);\n    try {\n      const res = await fetch('/api/admin/auth');\n      const data = await res.json();\n      setHasAdminRole(data.isAdmin || false);\n    } catch (error) {\n      setHasAdminRole(false);\n    } finally {\n      setIsCheckingRole(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (status === 'authenticated') {\n      checkAdminRole();\n    } else if (status === 'unauthenticated') {\n      setIsCheckingRole(false);\n      setHasAdminRole(false);\n    }\n  }, [status, checkAdminRole]);\n\n  // Load chats\n  const loadChats = useCallback(async () => {\n    try {\n      setLoading(true);\n      const response = await fetch('/api/operator-chat');\n      if (response.ok) {\n        const data = await response.json();\n        setChats(data.chats || []);\n      } else {\n        alert.error('Не удалось загрузить чаты', 'Ошибка');\n      }\n    } catch (error) {\n      alert.error('Ошибка при загрузке чатов', 'Ошибка');\n    } finally {\n      setLoading(false);\n    }\n  }, [alert]);\n\n  // Load blocked users\n  const loadBlockedUsers = useCallback(async () => {\n    try {\n      const response = await fetch('/api/admin/blocked-users');\n      if (response.ok) {\n        const data = await response.json();\n        setBlockedUsers(data.users || []);\n      } else {\n        alert.error('Не удалось загрузить заблокированных пользователей', 'Ошибка');\n      }\n    } catch (error) {\n      alert.error('Ошибка при загрузке заблокированных пользователей', 'Ошибка');\n    }\n  }, [alert]);\n\n  // Unblock user\n  const handleUnblockUser = async (userId: number) => {\n    setUnblockingUserId(userId);\n    try {\n      const response = await fetch('/api/admin/blocked-users', {\n        method: 'PATCH',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ patientId: userId }),\n      });\n\n      if (response.ok) {\n        alert.success('Пользователь разблокирован', 'Успех');\n        loadBlockedUsers(); // Reload blocked users\n      } else {\n        const data = await response.json();\n        alert.error(data.error || 'Не удалось разблокировать пользователя', 'Ошибка');\n      }\n    } catch (error) {\n      alert.error('Ошибка при разблокировке пользователя', 'Ошибка');\n    } finally {\n      setUnblockingUserId(null);\n    }\n  };\n\n  useEffect(() => {\n    if (hasAdminRole) {\n      loadChats();\n      loadBlockedUsers();\n      // Автообновление убрано - список обновляется через уведомления и при закрытии модалки\n    }\n  }, [hasAdminRole, loadChats, loadBlockedUsers]);\n\n  // Redirect if not authenticated\n  useEffect(() => {\n    if (status === 'unauthenticated') {\n      router.push('/account?section=login');\n    }\n  }, [status, router]);\n\n  // Reset page when filter changes\n  useEffect(() => {\n    setPage(1);\n  }, [filterStatus]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  // Show loading skeleton while checking role\n  if (status === 'loading' || hasAdminRole === null || isCheckingRole) {\n    return <AdminAccessSkeleton />;\n  }\n\n  // Redirect to home if no admin access\n  if (!hasAdminRole) {\n    router.push('/');\n    return <AdminAccessSkeleton />;\n  }\n\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case 'WAITING':\n        return <Badge variant=\"outline\" className=\"border-amber-400 text-amber-700 bg-amber-50\">Ожидает</Badge>;\n      case 'ACTIVE':\n        return <Badge variant=\"default\" className=\"bg-[#18A36C] text-white border-transparent shadow-sm\">Активный</Badge>;\n      case 'CLOSED':\n        return <Badge variant=\"secondary\" className=\"bg-gray-200 text-gray-700\">Закрыт</Badge>;\n      default:\n        return null;\n    }\n  };\n\n  const getTimeAgo = (date: string) => {\n    const now = new Date();\n    const messageDate = new Date(date);\n    const diffInMinutes = Math.floor((now.getTime() - messageDate.getTime()) / 60000);\n\n    if (diffInMinutes < 1) return 'только что';\n    if (diffInMinutes < 60) return `${diffInMinutes} мин назад`;\n    const diffInHours = Math.floor(diffInMinutes / 60);\n    if (diffInHours < 24) return `${diffInHours} ч назад`;\n    const diffInDays = Math.floor(diffInHours / 24);\n    return `${diffInDays} д назад`;\n  };\n\n  // Фильтрация - исключаем заблокированных из обычных чатов\n  let filteredChats = filterStatus === 'ALL'\n    ? chats\n    : chats.filter(chat => chat.status === filterStatus);\n\n  const waitingCount = chats.filter(c => c.status === 'WAITING').length;\n  const activeCount = chats.filter(c => c.status === 'ACTIVE').length;\n  const blockedCount = blockedUsers.length;\n\n  // Pagination for chats\n  const totalChatPages = Math.ceil(filteredChats.length / ITEMS_PER_PAGE);\n  const paginatedChats = filteredChats.slice(\n    (currentPage - 1) * ITEMS_PER_PAGE,\n    currentPage * ITEMS_PER_PAGE\n  );\n\n  // Pagination for blocked users\n  const totalBlockedPages = Math.ceil(blockedUsers.length / ITEMS_PER_PAGE);\n  const paginatedBlockedUsers = blockedUsers.slice(\n    (currentPage - 1) * ITEMS_PER_PAGE,\n    currentPage * ITEMS_PER_PAGE\n  );\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"max-w-7xl mx-auto px-4 py-6 lg:py-8\">\n        {/* Header */}\n        <div className=\"mb-6\">\n          <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-[#18A36C] to-[#15905f] rounded-xl flex items-center justify-center shadow-md\">\n                <MessagesSquare className=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" />\n              </div>\n              <div>\n                <h1 className=\"text-xl sm:text-2xl font-bold text-gray-900\">Чат с пациентами</h1>\n                <p className=\"text-xs sm:text-sm text-gray-600\">Управление обращениями</p>\n              </div>\n            </div>\n            <Button\n              variant=\"outline\"\n              onClick={() => router.push('/admin')}\n              className=\"flex items-center gap-2 hover:bg-gray-50 self-start sm:self-auto cursor-pointer\"\n            >\n              <ArrowLeft className=\"w-4 h-4\" />\n              <span className=\"hidden sm:inline\">Назад в админ-панель</span>\n              <span className=\"sm:hidden\">Назад</span>\n            </Button>\n          </div>\n\n          {/* Filters */}\n          <div className=\"flex flex-wrap gap-2\">\n            <Button\n              variant={filterStatus === 'ALL' ? 'default' : 'outline'}\n              onClick={() => setFilterStatus('ALL')}\n              className={filterStatus === 'ALL' ? 'bg-[#18A36C] hover:bg-[#15905f] shadow-sm text-white cursor-pointer' : 'hover:bg-gray-50 cursor-pointer'}\n            >\n              Все ({chats.length})\n            </Button>\n            <Button\n              variant={filterStatus === 'WAITING' ? 'default' : 'outline'}\n              onClick={() => setFilterStatus('WAITING')}\n              className={filterStatus === 'WAITING' ? 'bg-[#18A36C] hover:bg-[#15905f] shadow-sm text-white cursor-pointer' : 'hover:bg-gray-50 cursor-pointer'}\n            >\n              Ожидают ({waitingCount})\n            </Button>\n            <Button\n              variant={filterStatus === 'ACTIVE' ? 'default' : 'outline'}\n              onClick={() => setFilterStatus('ACTIVE')}\n              className={filterStatus === 'ACTIVE' ? 'bg-[#18A36C] hover:bg-[#15905f] shadow-sm text-white cursor-pointer' : 'hover:bg-gray-50 cursor-pointer'}\n            >\n              Активные ({activeCount})\n            </Button>\n            <Button\n              variant={filterStatus === 'CLOSED' ? 'default' : 'outline'}\n              onClick={() => setFilterStatus('CLOSED')}\n              className={filterStatus === 'CLOSED' ? 'bg-[#18A36C] hover:bg-[#15905f] shadow-sm text-white cursor-pointer' : 'hover:bg-gray-50 cursor-pointer'}\n            >\n              Закрытые\n            </Button>\n            <Button\n              variant={filterStatus === 'BLOCKED' ? 'default' : 'outline'}\n              onClick={() => setFilterStatus('BLOCKED')}\n              className={filterStatus === 'BLOCKED' ? 'bg-red-500 hover:bg-red-600 shadow-sm text-white cursor-pointer' : 'hover:bg-gray-50 text-red-600 border-red-300 cursor-pointer'}\n            >\n              Заблокированные ({blockedCount})\n            </Button>\n          </div>\n        </div>\n\n        {/* Content */}\n        {loading ? (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {[1, 2, 3, 4, 5, 6].map((i) => (\n              <div key={i} className=\"bg-white rounded-lg p-6 border border-gray-200 animate-pulse\">\n                <div className=\"h-4 bg-gray-200 rounded w-3/4 mb-4\" />\n                <div className=\"h-3 bg-gray-200 rounded w-1/2\" />\n              </div>\n            ))}\n          </div>\n        ) : filterStatus === 'BLOCKED' ? (\n          // Blocked Users Cards\n          blockedUsers.length === 0 ? (\n            <div className=\"bg-white rounded-lg p-12 text-center border border-gray-200\">\n              <MessageCircle className=\"w-16 h-16 text-gray-300 mx-auto mb-4\" />\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n                Нет заблокированных пользователей\n              </h3>\n              <p className=\"text-gray-600\">\n                Заблокированные пользователи появятся здесь\n              </p>\n            </div>\n          ) : (\n            <>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                {paginatedBlockedUsers.map((user) => (\n                <div\n                  key={user.id}\n                  className=\"bg-white rounded-xl p-5 border-2 border-red-300 bg-red-50/20 shadow-sm\"\n                >\n                  {/* Header */}\n                  <div className=\"flex items-start justify-between mb-4\">\n                    <div className=\"flex items-center gap-3\">\n                      {user.avatar_url ? (\n                        <img\n                          src={user.avatar_url}\n                          alt={user.name}\n                          className=\"w-12 h-12 rounded-full object-cover shadow-sm\"\n                        />\n                      ) : (\n                        <div className=\"w-12 h-12 bg-gradient-to-br from-gray-400 to-gray-500 rounded-full flex items-center justify-center shadow-sm\">\n                          <User className=\"w-6 h-6 text-white\" />\n                        </div>\n                      )}\n                      <div>\n                        <h3 className=\"font-semibold text-gray-900\">{user.name}</h3>\n                        <p className=\"text-xs text-gray-500\">{user.email}</p>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Info */}\n                  <div className=\"mb-4\">\n                    <Badge variant=\"secondary\" className=\"bg-red-100 text-red-700 border-red-300 mb-2\">\n                      <Ban className=\"w-3 h-3 mr-1\" />\n                      Заблокирован\n                    </Badge>\n                    {user.phone && (\n                      <p className=\"text-sm text-gray-600 mt-2\">{user.phone}</p>\n                    )}\n                  </div>\n\n                  {/* Footer */}\n                  <div className=\"flex items-center justify-between pt-4 border-t border-gray-200\">\n                    <div className=\"flex items-center gap-1.5 text-xs text-gray-500\">\n                      <Clock className=\"w-3.5 h-3.5\" />\n                      <span>{new Date(user.registration_date).toLocaleDateString('ru-RU')}</span>\n                    </div>\n                    <Button\n                      onClick={() => handleUnblockUser(user.id)}\n                      disabled={unblockingUserId === user.id}\n                      className=\"bg-[#18A36C] hover:bg-[#15905f] text-white text-xs px-3 py-1.5 flex items-center gap-1.5 cursor-pointer\"\n                    >\n                      {unblockingUserId === user.id ? (\n                        <Loader2 className=\"w-3.5 h-3.5 animate-spin\" />\n                      ) : (\n                        <UserX className=\"w-3.5 h-3.5\" />\n                      )}\n                      Разблокировать\n                    </Button>\n                  </div>\n                </div>\n              ))}\n            </div>\n\n            {/* Pagination for blocked users */}\n            {totalBlockedPages > 1 && (\n              <Pagination\n                currentPage={currentPage}\n                totalPages={totalBlockedPages}\n                onPageChange={setPage}\n                className=\"mt-6\"\n              />\n            )}\n          </>\n          )\n        ) : (\n          // Chat Cards\n          filteredChats.length === 0 ? (\n            <div className=\"bg-white rounded-lg p-12 text-center border border-gray-200\">\n              <MessageCircle className=\"w-16 h-16 text-gray-300 mx-auto mb-4\" />\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n                {filterStatus === 'ALL' && 'Нет чатов'}\n                {filterStatus === 'WAITING' && 'Нет ожидающих чатов'}\n                {filterStatus === 'ACTIVE' && 'Нет активных чатов'}\n                {filterStatus === 'CLOSED' && 'Нет закрытых чатов'}\n              </h3>\n              <p className=\"text-gray-600\">\n                {filterStatus === 'WAITING' && 'Когда пациенты напишут, их чаты появятся здесь'}\n                {filterStatus === 'ACTIVE' && 'Нет активных чатов в данный момент'}\n                {filterStatus === 'CLOSED' && 'Нет закрытых чатов'}\n                {filterStatus === 'ALL' && 'Чаты появятся когда пациенты начнут писать'}\n              </p>\n            </div>\n          ) : (\n            <>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                {paginatedChats.map((chat) => (\n                <div\n                  key={chat.id}\n                  className={`bg-white rounded-xl p-5 border-2 transition-all cursor-pointer ${\n                    chat.has_unread_operator\n                      ? 'border-[#18A36C] bg-[#18A36C]/5 shadow-sm hover:shadow-md'\n                      : 'border-gray-200 hover:border-[#18A36C]/50 hover:shadow-md'\n                  }`}\n                  onClick={() => setSelectedChatId(chat.id)}\n                >\n                  {/* Header */}\n                  <div className=\"flex items-start justify-between mb-4\">\n                    <div className=\"flex items-center gap-3\">\n                      {chat.patient.avatar_url ? (\n                        <img\n                          src={chat.patient.avatar_url}\n                          alt={chat.patient.name}\n                          className=\"w-12 h-12 rounded-full object-cover shadow-sm\"\n                        />\n                      ) : (\n                        <div className=\"w-12 h-12 bg-gradient-to-br from-[#18A36C] to-[#15905f] rounded-full flex items-center justify-center shadow-sm\">\n                          <User className=\"w-6 h-6 text-white\" />\n                        </div>\n                      )}\n                      <div>\n                        <h3 className=\"font-semibold text-gray-900\">{chat.patient.name}</h3>\n                        <p className=\"text-xs text-gray-500\">{chat.patient.email}</p>\n                      </div>\n                    </div>\n                    {chat.has_unread_operator && (\n                      <div className=\"w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse\" />\n                    )}\n                  </div>\n\n                  {/* Status */}\n                  <div className=\"flex items-center gap-2 mb-3 flex-wrap\">\n                    {getStatusBadge(chat.status)}\n                    {chat.operator && (\n                      <span className=\"text-xs text-gray-500\">\n                        Оператор: {chat.operator.name}\n                      </span>\n                    )}\n                  </div>\n\n                  {/* Last Message */}\n                  {chat.messages.length > 0 && (\n                    <div className=\"mb-3\">\n                      <p className=\"text-sm text-gray-700 line-clamp-2\">\n                        {chat.messages[0].content}\n                      </p>\n                    </div>\n                  )}\n\n                  {/* Footer */}\n                  <div className=\"flex items-center justify-between text-xs text-gray-500 pt-3 border-t border-gray-100\">\n                    <div className=\"flex items-center gap-1.5\">\n                      <Clock className=\"w-3.5 h-3.5\" />\n                      <span>{chat.last_message_at ? getTimeAgo(chat.last_message_at) : 'Нет сообщений'}</span>\n                    </div>\n                    {chat.has_unread_operator ? (\n                      <span className=\"text-[#18A36C] font-semibold\">Новое</span>\n                    ) : (\n                      <CheckCheck className=\"w-4 h-4 text-gray-400\" />\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n\n            {/* Pagination for chats */}\n            {totalChatPages > 1 && (\n              <Pagination\n                currentPage={currentPage}\n                totalPages={totalChatPages}\n                onPageChange={setPage}\n                className=\"mt-6\"\n              />\n            )}\n          </>\n          )\n        )}\n      </div>\n\n      {/* Chat Modal */}\n      {selectedChatId && (\n        <ChatModal\n          chatId={selectedChatId}\n          onClose={() => {\n            setSelectedChatId(null);\n            loadChats(); // Перезагружаем список чатов после закрытия\n            loadBlockedUsers(); // Перезагружаем заблокированных пользователей\n          }}\n        />\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}