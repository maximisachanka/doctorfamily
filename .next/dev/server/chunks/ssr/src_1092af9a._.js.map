{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Study/commercial-projects/smartmedical/src/hooks/useUnreadCounts.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\r\n\r\ninterface UnreadCounts {\r\n  feedbacks: number;\r\n  letters: number;\r\n}\r\n\r\nexport function useUnreadCounts(refreshInterval = 30000) {\r\n  const [counts, setCounts] = useState<UnreadCounts>({ feedbacks: 0, letters: 0 });\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const fetchCounts = async () => {\r\n    try {\r\n      const res = await fetch('/api/admin/unread-counts');\r\n      if (res.ok) {\r\n        const data = await res.json();\r\n        setCounts(data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching unread counts:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchCounts();\r\n\r\n    // Периодически обновляем счетчики\r\n    const interval = setInterval(fetchCounts, refreshInterval);\r\n\r\n    return () => clearInterval(interval);\r\n  }, [refreshInterval]);\r\n\r\n  return { counts, loading, refetch: fetchCounts };\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAOO,SAAS,gBAAgB,kBAAkB,KAAK;IACrD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAe;QAAE,WAAW;QAAG,SAAS;IAAE;IAC9E,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,MAAM,cAAc;QAClB,IAAI;YACF,MAAM,MAAM,MAAM,MAAM;YACxB,IAAI,IAAI,EAAE,EAAE;gBACV,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,UAAU;YACZ;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iCAAiC;QACjD,SAAU;YACR,WAAW;QACb;IACF;IAEA,IAAA,kNAAS,EAAC;QACR;QAEA,kCAAkC;QAClC,MAAM,WAAW,YAAY,aAAa;QAE1C,OAAO,IAAM,cAAc;IAC7B,GAAG;QAAC;KAAgB;IAEpB,OAAO;QAAE;QAAQ;QAAS,SAAS;IAAY;AACjD","debugId":null}},
    {"offset": {"line": 47, "column": 0}, "map": {"version":3,"sources":["file:///C:/Study/commercial-projects/smartmedical/src/contexts/UnreadCountsContext.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { createContext, useContext, ReactNode } from 'react';\r\nimport { useUnreadCounts } from '@/hooks/useUnreadCounts';\r\n\r\ninterface UnreadCountsContextType {\r\n  counts: { feedbacks: number; letters: number };\r\n  loading: boolean;\r\n  refetch: () => Promise<void>;\r\n}\r\n\r\nconst UnreadCountsContext = createContext<UnreadCountsContextType | undefined>(undefined);\r\n\r\nexport function UnreadCountsProvider({ children }: { children: ReactNode }) {\r\n  const { counts, loading, refetch } = useUnreadCounts(30000);\r\n\r\n  return (\r\n    <UnreadCountsContext.Provider value={{ counts, loading, refetch }}>\r\n      {children}\r\n    </UnreadCountsContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useUnreadCountsContext() {\r\n  const context = useContext(UnreadCountsContext);\r\n  if (!context) {\r\n    // Возвращаем дефолтные значения если контекст не доступен\r\n    return {\r\n      counts: { feedbacks: 0, letters: 0 },\r\n      loading: false,\r\n      refetch: async () => {},\r\n    };\r\n  }\r\n  return context;\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAHA;;;;AAWA,MAAM,oCAAsB,IAAA,sNAAa,EAAsC;AAExE,SAAS,qBAAqB,EAAE,QAAQ,EAA2B;IACxE,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG,IAAA,kJAAe,EAAC;IAErD,qBACE,8OAAC,oBAAoB,QAAQ;QAAC,OAAO;YAAE;YAAQ;YAAS;QAAQ;kBAC7D;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACZ,0DAA0D;QAC1D,OAAO;YACL,QAAQ;gBAAE,WAAW;gBAAG,SAAS;YAAE;YACnC,SAAS;YACT,SAAS,WAAa;QACxB;IACF;IACA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 95, "column": 0}, "map": {"version":3,"sources":["file:///C:/Study/commercial-projects/smartmedical/src/app/admin/AdminProviders.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { SessionProvider } from 'next-auth/react';\r\nimport { AlertProvider } from '@/components/common/SMAlert/AlertProvider';\r\nimport { UnreadCountsProvider } from '@/contexts/UnreadCountsContext';\r\n\r\nexport function AdminProviders({\r\n  children,\r\n}: {\r\n  children: React.ReactNode;\r\n}) {\r\n  return (\r\n    <SessionProvider>\r\n      <AlertProvider>\r\n        <UnreadCountsProvider>\r\n          <div className=\"min-h-screen bg-gray-50\">\r\n            {children}\r\n          </div>\r\n        </UnreadCountsProvider>\r\n      </AlertProvider>\r\n    </SessionProvider>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMO,SAAS,eAAe,EAC7B,QAAQ,EAGT;IACC,qBACE,8OAAC,iKAAe;kBACd,cAAA,8OAAC,yKAAa;sBACZ,cAAA,8OAAC,+JAAoB;0BACnB,cAAA,8OAAC;oBAAI,WAAU;8BACZ;;;;;;;;;;;;;;;;;;;;;AAMb","debugId":null}}]
}