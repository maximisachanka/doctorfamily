{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/Study/commercial-projects/smartmedical/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\r\n\r\nconst globalForPrisma = globalThis as unknown as {\r\n  prisma: PrismaClient | undefined;\r\n};\r\n\r\nexport const prisma =\r\n  globalForPrisma.prisma ??\r\n  new PrismaClient({\r\n    log: process.env.NODE_ENV === 'development' ? ['query', 'error', 'warn'] : ['error'],\r\n  });\r\n\r\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma;\r\n\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,6IAAY,CAAC;IACf,KAAK,uCAAyC;QAAC;QAAS;QAAS;KAAO,GAAG;AAC7E;AAEF,wCAA2C,gBAAgB,MAAM,GAAG","debugId":null}},
    {"offset": {"line": 131, "column": 0}, "map": {"version":3,"sources":["file:///C:/Study/commercial-projects/smartmedical/src/app/api/auth/%5B...nextauth%5D/route.ts"],"sourcesContent":["import NextAuth, { NextAuthOptions } from \"next-auth\"\r\nimport GoogleProvider from \"next-auth/providers/google\";\r\nimport CredentialsProvider from \"next-auth/providers/credentials\";\r\nimport bcrypt from \"bcryptjs\";\r\nimport { prisma } from \"@/lib/prisma\";\r\n\r\nexport const authOptions: NextAuthOptions = {\r\n    secret: process.env.NEXTAUTH_SECRET,\r\n    providers: [\r\n        GoogleProvider({\r\n            clientId: process.env.GOOGLE_CLIENT_ID || \"\",\r\n            clientSecret: process.env.GOOGLE_CLIENT_SECRET || \"\",\r\n        }),\r\n        CredentialsProvider({\r\n            name: \"Credentials\",\r\n            credentials: {\r\n                login: { label: \"Логин\", type: \"text\" },\r\n                password: { label: \"Пароль\", type: \"password\" }\r\n            },\r\n            async authorize(credentials) {\r\n                if (!credentials?.login || !credentials?.password) {\r\n                    return null;\r\n                }\r\n\r\n                try {\r\n                    const user = await prisma.patient.findFirst({\r\n                        where: { login: credentials.login },\r\n                    });\r\n\r\n                    if (!user) {\r\n                        return null;\r\n                    }\r\n\r\n                    const isPasswordValid = await bcrypt.compare(\r\n                        credentials.password,\r\n                        user.password\r\n                    );\r\n\r\n                    if (!isPasswordValid) {\r\n                        return null;\r\n                    }\r\n\r\n                    return {\r\n                        id: user.id.toString(),\r\n                        email: user.email,\r\n                        name: user.name,\r\n                        role: user.role,\r\n                        image: user.avatar_url,\r\n                    };\r\n                } catch (error) {\r\n                    console.error(\"Auth error:\", error);\r\n                    return null;\r\n                }\r\n            }\r\n        }),\r\n    ],\r\n    pages: {\r\n        signIn: \"/\",\r\n    },\r\n    session: {\r\n        strategy: \"jwt\",\r\n    },\r\n    callbacks: {\r\n        async jwt({ token, user }) {\r\n            if (user) {\r\n                token.id = user.id;\r\n                token.role = (user as { role?: string }).role;\r\n                token.picture = user.image;\r\n            }\r\n            return token;\r\n        },\r\n        async session({ session, token }) {\r\n            if (session.user && token.id) {\r\n                (session.user as { id: string; role?: string }).id = token.id as string;\r\n                (session.user as { id: string; role?: string }).role = token.role as string;\r\n                session.user.image = token.picture as string | null | undefined;\r\n            }\r\n            return session;\r\n        },\r\n    },\r\n};\r\n\r\nconst handler = NextAuth(authOptions);\r\n\r\nexport { handler as GET, handler as POST };"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AACA;;;;;;AAEO,MAAM,cAA+B;IACxC,QAAQ,QAAQ,GAAG,CAAC,eAAe;IACnC,WAAW;QACP,IAAA,gKAAc,EAAC;YACX,UAAU,QAAQ,GAAG,CAAC,gBAAgB,IAAI;YAC1C,cAAc,QAAQ,GAAG,CAAC,oBAAoB,IAAI;QACtD;QACA,IAAA,qKAAmB,EAAC;YAChB,MAAM;YACN,aAAa;gBACT,OAAO;oBAAE,OAAO;oBAAS,MAAM;gBAAO;gBACtC,UAAU;oBAAE,OAAO;oBAAU,MAAM;gBAAW;YAClD;YACA,MAAM,WAAU,WAAW;gBACvB,IAAI,CAAC,aAAa,SAAS,CAAC,aAAa,UAAU;oBAC/C,OAAO;gBACX;gBAEA,IAAI;oBACA,MAAM,OAAO,MAAM,gIAAM,CAAC,OAAO,CAAC,SAAS,CAAC;wBACxC,OAAO;4BAAE,OAAO,YAAY,KAAK;wBAAC;oBACtC;oBAEA,IAAI,CAAC,MAAM;wBACP,OAAO;oBACX;oBAEA,MAAM,kBAAkB,MAAM,8IAAM,CAAC,OAAO,CACxC,YAAY,QAAQ,EACpB,KAAK,QAAQ;oBAGjB,IAAI,CAAC,iBAAiB;wBAClB,OAAO;oBACX;oBAEA,OAAO;wBACH,IAAI,KAAK,EAAE,CAAC,QAAQ;wBACpB,OAAO,KAAK,KAAK;wBACjB,MAAM,KAAK,IAAI;wBACf,MAAM,KAAK,IAAI;wBACf,OAAO,KAAK,UAAU;oBAC1B;gBACJ,EAAE,OAAO,OAAO;oBACZ,QAAQ,KAAK,CAAC,eAAe;oBAC7B,OAAO;gBACX;YACJ;QACJ;KACH;IACD,OAAO;QACH,QAAQ;IACZ;IACA,SAAS;QACL,UAAU;IACd;IACA,WAAW;QACP,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE;YACrB,IAAI,MAAM;gBACN,MAAM,EAAE,GAAG,KAAK,EAAE;gBAClB,MAAM,IAAI,GAAG,AAAC,KAA2B,IAAI;gBAC7C,MAAM,OAAO,GAAG,KAAK,KAAK;YAC9B;YACA,OAAO;QACX;QACA,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC5B,IAAI,QAAQ,IAAI,IAAI,MAAM,EAAE,EAAE;gBACzB,QAAQ,IAAI,CAAmC,EAAE,GAAG,MAAM,EAAE;gBAC5D,QAAQ,IAAI,CAAmC,IAAI,GAAG,MAAM,IAAI;gBACjE,QAAQ,IAAI,CAAC,KAAK,GAAG,MAAM,OAAO;YACtC;YACA,OAAO;QACX;IACJ;AACJ;AAEA,MAAM,UAAU,IAAA,kJAAQ,EAAC","debugId":null}},
    {"offset": {"line": 229, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/data/SMServicesData/SMServicesMenuData.json"],"sourcesContent":["{\"menuData\":[{\"id\":\"pediatric-dentistry\",\"title\":\"Детская стоматология\",\"icon\":\"Baby\",\"children\":[{\"id\":\"pediatric-surgeon\",\"title\":\"Детский хирург-стоматолог\"},{\"id\":\"milk-teeth-treatment\",\"title\":\"Лечение молочных зубов\"},{\"id\":\"pediatric-orthodontist\",\"title\":\"Детский ортодонт\"},{\"id\":\"milk-teeth-anesthesia\",\"title\":\"Лечение молочных зубов под наркозом в Минске\"}]},{\"id\":\"dentistry\",\"title\":\"Стоматология\",\"icon\":\"Smile\",\"children\":[{\"id\":\"therapeutic-dentistry\",\"title\":\"Терапевтическая стоматология\",\"children\":[{\"id\":\"teeth-whitening\",\"title\":\"Отбеливание зубов Beyond Polus\"},{\"id\":\"professional-cleaning\",\"title\":\"Профессиональная чистка зубов Air Flow\"},{\"id\":\"ultrasonic-cleaning\",\"title\":\"Чистка зубов в Минске — ультразвуковая и профессиональная\"},{\"id\":\"pulpitis-treatment\",\"title\":\"Лечение пульпита в Минске — стоимость\"},{\"id\":\"oral-hygiene\",\"title\":\"Профессиональная гигиена полости рта\"},{\"id\":\"caries-treatment\",\"title\":\"Лечение кариеса в Минске\"}]},{\"id\":\"implantation\",\"title\":\"Имплантация\",\"children\":[{\"id\":\"straumann-implants\",\"title\":\"Имплантация зубов Straumann в Минске\"},{\"id\":\"total-implantation\",\"title\":\"Тотальная (полная) имплантация зубов в Минске\"},{\"id\":\"immediate-implantation\",\"title\":\"Одномоментная имплантация зубов в Минске\"},{\"id\":\"osstem-implants\",\"title\":\"Имплантация зубов Osstem в Минске\"},{\"id\":\"all-on-4-6\",\"title\":\"Имплантация зубов All-on-4 и All-on-6 в Минске\"},{\"id\":\"two-stage-implantation\",\"title\":\"Двухэтапная имплантация зубов в Минске\"},{\"id\":\"implantation-prices\",\"title\":\"Имплантация зубов в Минске — цены и виды\"}]},{\"id\":\"orthopedics\",\"title\":\"Ортопедия\",\"children\":[{\"id\":\"veneers\",\"title\":\"Виниры в Минске — цены и установка\"},{\"id\":\"crowns\",\"title\":\"Коронки на зубы в Минске — цены и виды\"}]},{\"id\":\"orthodontics\",\"title\":\"Ортодонтия\",\"children\":[{\"id\":\"braces-installation\",\"title\":\"Установка брекетов в Минске\"},{\"id\":\"orthodontist-consultation\",\"title\":\"Ортодонт в Минске — консультация врача и лечение прикуса\"},{\"id\":\"aligners\",\"title\":\"Элайнеры в Минске — цены на выравнивание зубов без брекетов\"}]},{\"id\":\"surgery\",\"title\":\"Хирургия\",\"children\":[{\"id\":\"tooth-extraction\",\"title\":\"Удаление зубов в Минске — удаление зуба мудрости и другие сложные случаи\"},{\"id\":\"sinus-lift\",\"title\":\"Синус-лифтинг в Минске — цены и виды операции\"}]},{\"id\":\"anesthesia-treatment\",\"title\":\"Лечение зубов под наркозом в Минске\"},{\"id\":\"microscope-treatment\",\"title\":\"Лечение зубов под микроскопом в Минске\"}]},{\"id\":\"gynecology\",\"title\":\"Гинекология\",\"icon\":\"Heart\",\"children\":[{\"id\":\"gynecologist-appointment\",\"title\":\"Приём гинеколога\"},{\"id\":\"diagnostic-studies\",\"title\":\"Диагностические исследования\"},{\"id\":\"intrauterine-device\",\"title\":\"Внутриматочная спираль\"},{\"id\":\"cervical-conization\",\"title\":\"Конизация шейки матки\"},{\"id\":\"colposcopy\",\"title\":\"Кольпоскопия шейки матки\"},{\"id\":\"tube-patency-check\",\"title\":\"Проверка проходимости маточных труб (соногистероскопия) с помощью ExEm-геля\"},{\"id\":\"polyp-removal\",\"title\":\"Удаление полипов | Полипэктомия\"},{\"id\":\"diagnostic-curettage\",\"title\":\"Раздельное диагностическое выскабливание\"},{\"id\":\"culdocentesis\",\"title\":\"Кульдоцентез\"}]},{\"id\":\"pediatric-gynecology\",\"title\":\"Детская гинекология\",\"icon\":\"Baby\",\"children\":[{\"id\":\"pelvic-ultrasound-girls\",\"title\":\"УЗИ органов малого таза для девочек\"},{\"id\":\"adolescent-gynecologist\",\"title\":\"Подростковый гинеколог\"},{\"id\":\"pediatric-gynecologist\",\"title\":\"Детский гинеколог\"}]},{\"id\":\"pediatric-urology\",\"title\":\"Детская урология\",\"icon\":\"Stethoscope\",\"children\":[{\"id\":\"varicocele-treatment\",\"title\":\"Лечение варикоцеле\"},{\"id\":\"pediatric-urologist-appointment\",\"title\":\"Приём детского уролога\"}]},{\"id\":\"endocrinology\",\"title\":\"Эндокринология\",\"icon\":\"Activity\",\"children\":[{\"id\":\"endocrinologist-consultation\",\"title\":\"Консультация врача-эндокринолога\"}]},{\"id\":\"oncology\",\"title\":\"Онкология\",\"icon\":\"Stethoscope\",\"children\":[{\"id\":\"oncologist-appointment\",\"title\":\"Приём врача онколога\"}]},{\"id\":\"ultrasound\",\"title\":\"УЗИ\",\"icon\":\"Eye\",\"children\":[{\"id\":\"pelvic-ultrasound\",\"title\":\"УЗИ органов малого таза\"},{\"id\":\"breast-ultrasound\",\"title\":\"УЗИ молочных желез\"},{\"id\":\"thyroid-ultrasound\",\"title\":\"УЗИ щитовидной железы\"},{\"id\":\"abdominal-ultrasound\",\"title\":\"УЗИ брюшной полости\"},{\"id\":\"fetal-ultrasound\",\"title\":\"УЗИ плода\"},{\"id\":\"gender-party\",\"title\":\"Гендер пати\"}]},{\"id\":\"cardiology\",\"title\":\"Кардиология\",\"icon\":\"Heart\",\"children\":[{\"id\":\"echo-kg\",\"title\":\"ЭХО-КГ (УЗИ сердца)\"},{\"id\":\"ecg\",\"title\":\"ЭКГ (электрокардиография)\"},{\"id\":\"holter-monitoring\",\"title\":\"Холтеровское мониторирование\"},{\"id\":\"cardiologist-appointment\",\"title\":\"Приём кардиолога\"}]},{\"id\":\"diagnostics\",\"title\":\"Диагностика\",\"icon\":\"Search\",\"children\":[{\"id\":\"expert-ultrasound\",\"title\":\"Экспертное УЗИ\"},{\"id\":\"analyses\",\"title\":\"Анализы\"},{\"id\":\"tooth-xray\",\"title\":\"Снимок зуба\"},{\"id\":\"3d-dental-scan\",\"title\":\"3D снимок зубов\"},{\"id\":\"panoramic-dental-scan\",\"title\":\"Панорамный снимок зубок\"}]},{\"id\":\"day-hospital\",\"title\":\"Дневной стационар\",\"icon\":\"Building2\",\"children\":[{\"id\":\"procedure-room\",\"title\":\"Процедурный кабинет\"}]}]}"],"names":[],"mappings":"AAAA"}},
    {"offset": {"line": 229, "column": 5112}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 233, "column": 0}, "map": {"version":3,"sources":["file:///C:/Study/commercial-projects/smartmedical/src/app/api/search/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\r\nimport { prisma } from \"@/lib/prisma\";\r\nimport { getServerSession } from \"next-auth\";\r\nimport { authOptions } from \"@/app/api/auth/[...nextauth]/route\";\r\nimport servicesMenuData from \"@/data/SMServicesData/SMServicesMenuData.json\";\r\n\r\ninterface SearchResult {\r\n  id: string;\r\n  title: string;\r\n  description: string;\r\n  category: string;\r\n  url: string;\r\n  type: \"service\" | \"specialist\" | \"vacancy\" | \"faq\" | \"material\" | \"partner\" | \"contact\" | \"patient-info\";\r\n}\r\n\r\ninterface MenuItem {\r\n  id: string;\r\n  title: string;\r\n  icon?: string;\r\n  description?: string;\r\n  children?: MenuItem[];\r\n}\r\n\r\n// Функция для рекурсивного поиска в меню услуг\r\nfunction searchInServiceMenu(\r\n  items: MenuItem[],\r\n  searchTerm: string,\r\n  categoryPath: string[] = []\r\n): SearchResult[] {\r\n  const results: SearchResult[] = [];\r\n  const lowerSearchTerm = searchTerm.toLowerCase();\r\n\r\n  for (const item of items) {\r\n    const titleMatch = item.title.toLowerCase().includes(lowerSearchTerm);\r\n    const descriptionMatch = item.description?.toLowerCase().includes(lowerSearchTerm);\r\n\r\n    if (titleMatch || descriptionMatch) {\r\n      // Формируем категорию - используем путь категорий или первый элемент\r\n      const displayCategory = categoryPath.length > 0\r\n        ? categoryPath[0]  // Показываем только корневую категорию\r\n        : 'Услуги';\r\n\r\n      results.push({\r\n        id: `service-menu-${item.id}`,\r\n        title: item.title,\r\n        description: item.description || `Раздел услуг: ${item.title}`,\r\n        category: displayCategory,\r\n        url: `/services/${item.id}`,\r\n        type: \"service\",\r\n      });\r\n    }\r\n\r\n    // Рекурсивный поиск в подкатегориях\r\n    if (item.children && item.children.length > 0) {\r\n      // Если путь пустой - начинаем новый путь с текущего элемента\r\n      // Если путь уже есть - продолжаем его\r\n      const newPath = categoryPath.length === 0 ? [item.title] : categoryPath;\r\n      const childResults = searchInServiceMenu(item.children, searchTerm, newPath);\r\n      results.push(...childResults);\r\n    }\r\n  }\r\n\r\n  return results;\r\n}\r\n\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    const searchParams = request.nextUrl.searchParams;\r\n    const query = searchParams.get(\"q\");\r\n\r\n    // Минимум 3 символа\r\n    if (!query || query.trim().length < 3) {\r\n      return NextResponse.json({ results: [] }, { status: 200 });\r\n    }\r\n\r\n    const searchTerm = query.trim();\r\n    const session = await getServerSession(authOptions);\r\n    const isAuthenticated = !!session?.user;\r\n\r\n    // Поиск по всем таблицам БД параллельно\r\n    const [services, specialists, vacancies, faqs, materials, partners, contacts] = await Promise.all([\r\n      // 1. Услуги\r\n      prisma.service.findMany({\r\n        where: {\r\n          OR: [\r\n            { title: { contains: searchTerm, mode: \"insensitive\" } },\r\n            { subtitle: { contains: searchTerm, mode: \"insensitive\" } },\r\n            { description: { contains: searchTerm, mode: \"insensitive\" } },\r\n          ],\r\n        },\r\n        include: {\r\n          category: true,\r\n          serviceCategory: true,\r\n        },\r\n        take: 50,\r\n      }),\r\n\r\n      // 2. Специалисты\r\n      prisma.specialist.findMany({\r\n        where: {\r\n          OR: [\r\n            { name: { contains: searchTerm, mode: \"insensitive\" } },\r\n            { specialization: { contains: searchTerm, mode: \"insensitive\" } },\r\n            { qualification: { contains: searchTerm, mode: \"insensitive\" } },\r\n          ],\r\n        },\r\n        include: {\r\n          category: true,\r\n        },\r\n        take: 50,\r\n      }),\r\n\r\n      // 3. Вакансии (клиника)\r\n      prisma.vacancy.findMany({\r\n        where: {\r\n          OR: [\r\n            { name: { contains: searchTerm, mode: \"insensitive\" } },\r\n            { category: { contains: searchTerm, mode: \"insensitive\" } },\r\n            { description: { contains: searchTerm, mode: \"insensitive\" } },\r\n            { requirements: { contains: searchTerm, mode: \"insensitive\" } },\r\n          ],\r\n        },\r\n        take: 50,\r\n      }),\r\n\r\n      // 4. FAQ (клиника)\r\n      prisma.question.findMany({\r\n        where: {\r\n          OR: [\r\n            { question: { contains: searchTerm, mode: \"insensitive\" } },\r\n            { answer: { contains: searchTerm, mode: \"insensitive\" } },\r\n          ],\r\n        },\r\n        take: 50,\r\n      }),\r\n\r\n      // 5. Материалы (только для авторизованных)\r\n      isAuthenticated\r\n        ? prisma.material.findMany({\r\n            where: {\r\n              AND: [\r\n                { is_active: true },\r\n                {\r\n                  OR: [\r\n                    { title: { contains: searchTerm, mode: \"insensitive\" } },\r\n                    { content: { contains: searchTerm, mode: \"insensitive\" } },\r\n                  ],\r\n                },\r\n              ],\r\n            },\r\n            take: 50,\r\n          })\r\n        : Promise.resolve([]),\r\n\r\n      // 6. Партнёры (клиника)\r\n      prisma.partner.findMany({\r\n        where: {\r\n          OR: [\r\n            { name: { contains: searchTerm, mode: \"insensitive\" } },\r\n            { description: { contains: searchTerm, mode: \"insensitive\" } },\r\n          ],\r\n        },\r\n        include: {\r\n          category: true,\r\n        },\r\n        take: 50,\r\n      }),\r\n\r\n      // 7. Контакты\r\n      prisma.contacts.findMany({\r\n        where: {\r\n          OR: [\r\n            { address: { contains: searchTerm, mode: \"insensitive\" } },\r\n            { phone_number: { contains: searchTerm, mode: \"insensitive\" } },\r\n            { phone_number_sec: { contains: searchTerm, mode: \"insensitive\" } },\r\n            { email: { contains: searchTerm, mode: \"insensitive\" } },\r\n          ],\r\n        },\r\n        take: 10,\r\n      }),\r\n    ]);\r\n\r\n    const results: SearchResult[] = [];\r\n\r\n    // Форматируем услуги\r\n    services.forEach((service) => {\r\n      const categorySlug = service.serviceCategory?.slug || service.category?.slug || 'services';\r\n      const categoryName = service.serviceCategory?.name || service.category?.name || 'Услуги';\r\n\r\n      results.push({\r\n        id: `service-${service.id}`,\r\n        title: service.title,\r\n        description: service.description,\r\n        category: categoryName,\r\n        url: `/services/${categorySlug}/${service.id}`,\r\n        type: \"service\",\r\n      });\r\n    });\r\n\r\n    // Форматируем специалистов\r\n    specialists.forEach((specialist) => {\r\n      const categorySlug = specialist.category?.slug || 'doctors';\r\n      const categoryName = specialist.category?.name || 'Специалисты';\r\n\r\n      results.push({\r\n        id: `specialist-${specialist.id}`,\r\n        title: specialist.name,\r\n        description: `${specialist.specialization} • Стаж: ${specialist.experience} лет • ${specialist.qualification}`,\r\n        category: categoryName,\r\n        url: `/doctors/${categorySlug}/${specialist.id}`,\r\n        type: \"specialist\",\r\n      });\r\n    });\r\n\r\n    // Форматируем вакансии\r\n    vacancies.forEach((vacancy) => {\r\n      results.push({\r\n        id: `vacancy-${vacancy.id}`,\r\n        title: vacancy.name,\r\n        description: vacancy.description,\r\n        category: vacancy.category,\r\n        url: `/clinic/vacancies`,\r\n        type: \"vacancy\",\r\n      });\r\n    });\r\n\r\n    // Форматируем FAQ\r\n    faqs.forEach((faq) => {\r\n      const faqCategory = faq.category || 'general';\r\n\r\n      results.push({\r\n        id: `faq-${faq.id}`,\r\n        title: faq.question,\r\n        description: faq.answer || \"Ответ скоро будет добавлен\",\r\n        category: faq.category || \"Общие вопросы\",\r\n        url: `/clinic/faq/${faqCategory}#faq-${faq.id}`,\r\n        type: \"faq\",\r\n      });\r\n    });\r\n\r\n    // Форматируем материалы\r\n    materials.forEach((material) => {\r\n      results.push({\r\n        id: `material-${material.id}`,\r\n        title: material.title,\r\n        description: material.content,\r\n        category: `Материалы ${material.year}`,\r\n        url: `/account`,\r\n        type: \"material\",\r\n      });\r\n    });\r\n\r\n    // Форматируем партнёров\r\n    partners.forEach((partner) => {\r\n      results.push({\r\n        id: `partner-${partner.id}`,\r\n        title: partner.name,\r\n        description: partner.description,\r\n        category: partner.category?.name || 'Партнёры',\r\n        url: `/clinic/partners`,\r\n        type: \"partner\",\r\n      });\r\n    });\r\n\r\n    // Форматируем контакты\r\n    contacts.forEach((contact) => {\r\n      results.push({\r\n        id: `contact-${contact.id}`,\r\n        title: \"Контакты клиники\",\r\n        description: `${contact.address} • Тел: ${contact.phone_number} • Email: ${contact.email}`,\r\n        category: \"Контактная информация\",\r\n        url: \"/contacts\",\r\n        type: \"contact\",\r\n      });\r\n    });\r\n\r\n    // Добавляем статические результаты для страницы \"Пациенту\"\r\n    const patientPageKeywords = [\r\n      {\r\n        keywords: [\"запись\", \"приём\", \"прием\", \"записаться\", \"визит\"],\r\n        title: \"Запись на приём\",\r\n        description: \"Узнайте, как записаться на приём к специалисту, что взять с собой и правила посещения клиники\",\r\n      },\r\n      {\r\n        keywords: [\"подготовка\", \"анализ\", \"кровь\", \"моча\", \"экг\", \"узи\", \"обследование\", \"сдать\"],\r\n        title: \"Подготовка к анализам и обследованиям\",\r\n        description: \"Рекомендации по подготовке к анализам крови, мочи, ЭКГ, УЗИ и другим обследованиям\",\r\n      },\r\n      {\r\n        keywords: [\"документ\", \"договор\", \"согласие\", \"политика\", \"конфиденциальность\", \"защита данных\"],\r\n        title: \"Документы и согласия\",\r\n        description: \"Договор оказания услуг, политика конфиденциальности, защита персональных данных и информированное согласие\",\r\n      },\r\n      {\r\n        keywords: [\"оплата\", \"цена\", \"стоимость\", \"тариф\", \"страховка\", \"страхование\", \"оплатить\"],\r\n        title: \"Способы оплаты\",\r\n        description: \"Информация о способах оплаты услуг: наличные, банковские карты, рассрочка и медицинское страхование\",\r\n      },\r\n    ];\r\n\r\n    patientPageKeywords.forEach((item, index) => {\r\n      const matches = item.keywords.some((keyword) =>\r\n        keyword.includes(searchTerm.toLowerCase()) ||\r\n        searchTerm.toLowerCase().includes(keyword)\r\n      );\r\n\r\n      if (matches) {\r\n        results.push({\r\n          id: `patient-info-${index}`,\r\n          title: item.title,\r\n          description: item.description,\r\n          category: \"Информация для пациентов\",\r\n          url: \"/patient\",\r\n          type: \"patient-info\",\r\n        });\r\n      }\r\n    });\r\n\r\n    // Поиск по моковому меню услуг (категории и разделы)\r\n    const serviceMenuResults = searchInServiceMenu(servicesMenuData.menuData, searchTerm);\r\n\r\n    // Добавляем все результаты из моков\r\n    // Моки содержат категории и разделы, БД содержит конкретные услуги\r\n    // Это разные типы результатов, поэтому показываем оба\r\n    results.push(...serviceMenuResults);\r\n\r\n    return NextResponse.json({ results }, { status: 200 });\r\n  } catch (error) {\r\n    console.error(\"Search error:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Ошибка при поиске\", results: [] },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}