module.exports=[64176,89739,32029,a=>{"use strict";var b=a.i(87924),c=a.i(46271),d=a.i(46842),e=a.i(41675),f=a.i(4720),g=a.i(70106);let h=(0,g.default)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),i=(0,g.default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var j=a.i(63519),k=a.i(92258),l=a.i(41710),m=a.i(16201),n=a.i(62722),o=a.i(9526),p=a.i(96847),q=a.i(18176),r=a.i(14841),s=a.i(72131),t=a.i(75003),u=a.i(50944);function v(){let{data:a,status:g}=(0,t.useSession)(),v=(0,u.useRouter)(),[w,x]=(0,s.useState)(null),[y,z]=(0,s.useState)(!0),[A,B]=(0,s.useState)(!1);(0,s.useEffect)(()=>{"unauthenticated"===g?v.push("/"):"authenticated"===g&&a&&C()},[g,a,v]);let C=async()=>{try{let a=await fetch("/api/auth/me");if(a.ok){let b=await a.json();x(b.user)}}catch(a){}finally{z(!1)}},D=async()=>{B(!1),await (0,t.signOut)({callbackUrl:"/",redirect:!0})};return y||!w?(0,b.jsx)("div",{className:"container mx-auto px-4 py-8 lg:py-12 max-w-7xl",children:(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#18A36C] mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Загрузка данных..."})]})})}):(0,b.jsxs)("div",{className:"container mx-auto px-4 py-8 lg:py-12 max-w-7xl",children:[(0,b.jsxs)(c.motion.div,{className:"bg-[#18A36C] rounded-lg p-8 lg:p-12 mb-10 lg:mb-12 text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[(0,b.jsx)("div",{className:"w-20 h-20 bg-white/20 rounded-lg flex items-center justify-center mx-auto mb-6",children:(0,b.jsx)(d.User,{className:"w-10 h-10 text-white"})}),(0,b.jsx)("h1",{className:"text-3xl lg:text-4xl text-white mb-4",children:"Личный кабинет"}),(0,b.jsx)("p",{className:"text-white/90 leading-relaxed text-base lg:text-lg max-w-3xl mx-auto",children:"Управляйте своими записями, просматривайте документы и историю посещений"})]}),(0,b.jsxs)(p.Tabs,{defaultValue:"profile",className:"space-y-8",children:[(0,b.jsxs)(p.TabsList,{className:"grid w-full grid-cols-2 lg:grid-cols-4 h-auto p-2 bg-white rounded-lg gap-2",children:[(0,b.jsxs)(p.TabsTrigger,{value:"profile",className:"data-[state=active]:bg-[#18A36C] data-[state=active]:text-white data-[state=active]:border-[#18A36C] data-[state=inactive]:text-[#2E2E2E] data-[state=inactive]:hover:text-[#18A36C] data-[state=inactive]:hover:bg-[#18A36C]/5 data-[state=inactive]:hover:border-[#18A36C] data-[state=inactive]:border-2 data-[state=inactive]:border-gray-300 transition-all duration-300 rounded-lg py-3 px-4",children:["Профиль",(0,b.jsx)(d.User,{className:"w-5 h-5 ml-[2.5px]"})]}),(0,b.jsxs)(p.TabsTrigger,{value:"appointments",className:"data-[state=active]:bg-[#18A36C] data-[state=active]:text-white data-[state=active]:border-[#18A36C] data-[state=inactive]:text-[#2E2E2E] data-[state=inactive]:hover:text-[#18A36C] data-[state=inactive]:hover:bg-[#18A36C]/5 data-[state=inactive]:hover:border-[#18A36C] data-[state=inactive]:border-2 data-[state=inactive]:border-gray-300 transition-all duration-300 rounded-lg py-3 px-4",children:["Записи",(0,b.jsx)(e.Calendar,{className:"w-5 h-5 ml-[2.5px]"})]}),(0,b.jsxs)(p.TabsTrigger,{value:"documents",className:"data-[state=active]:bg-[#18A36C] data-[state=active]:text-white data-[state=active]:border-[#18A36C] data-[state=inactive]:text-[#2E2E2E] data-[state=inactive]:hover:text-[#18A36C] data-[state=inactive]:hover:bg-[#18A36C]/5 data-[state=inactive]:hover:border-[#18A36C] data-[state=inactive]:border-2 data-[state=inactive]:border-gray-300 transition-all duration-300 rounded-lg py-3 px-4",children:["Документы",(0,b.jsx)(f.FileText,{className:"w-5 h-5 ml-[2.5px]"})]}),(0,b.jsxs)(p.TabsTrigger,{value:"settings",className:"data-[state=active]:bg-[#18A36C] data-[state=active]:text-white data-[state=active]:border-[#18A36C] data-[state=inactive]:text-[#2E2E2E] data-[state=inactive]:hover:text-[#18A36C] data-[state=inactive]:hover:bg-[#18A36C]/5 data-[state=inactive]:hover:border-[#18A36C] data-[state=inactive]:border-2 data-[state=inactive]:border-gray-300 transition-all duration-300 rounded-lg py-3 px-4",children:["Настройки",(0,b.jsx)(h,{className:"w-5 h-5 ml-[2.5px]"})]})]}),(0,b.jsx)(p.TabsContent,{value:"profile",className:"space-y-8",children:(0,b.jsx)(c.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:(0,b.jsxs)(q.Card,{className:"border border-gray-200 rounded-lg",children:[(0,b.jsxs)(q.CardHeader,{children:[(0,b.jsxs)(q.CardTitle,{className:"flex items-center gap-3 text-[#2E2E2E] text-2xl",children:[(0,b.jsx)(d.User,{className:"w-6 h-6 text-[#18A36C]"}),"Личная информация"]}),(0,b.jsx)(q.CardDescription,{className:"text-gray-600 text-base",children:"Ваши персональные данные"})]}),(0,b.jsxs)(q.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,b.jsx)(d.User,{className:"w-4 h-4 text-[#18A36C]"}),(0,b.jsx)("span",{className:"text-sm",children:"ФИО"})]}),(0,b.jsx)("p",{className:"text-[#2E2E2E] text-lg",children:w.name||"Не указано"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,b.jsx)(e.Calendar,{className:"w-4 h-4 text-[#18A36C]"}),(0,b.jsx)("span",{className:"text-sm",children:"Дата регистрации"})]}),(0,b.jsx)("p",{className:"text-[#2E2E2E] text-lg",children:w.registration_date?new Date(w.registration_date).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}):"Не указано"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,b.jsx)(j.Phone,{className:"w-4 h-4 text-[#18A36C]"}),(0,b.jsx)("span",{className:"text-sm",children:"Телефон"})]}),(0,b.jsx)("p",{className:"text-[#2E2E2E] text-lg",children:w.phone||"Не указано"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,b.jsx)(k.Mail,{className:"w-4 h-4 text-[#18A36C]"}),(0,b.jsx)("span",{className:"text-sm",children:"Email"})]}),(0,b.jsx)("p",{className:"text-[#2E2E2E] text-lg",children:w.email||"Не указано"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,b.jsx)(d.User,{className:"w-4 h-4 text-[#18A36C]"}),(0,b.jsx)("span",{className:"text-sm",children:"Логин"})]}),(0,b.jsx)("p",{className:"text-[#2E2E2E] text-lg",children:w.login||"Не указано"})]})]}),(0,b.jsx)(o.Button,{className:"bg-[#18A36C] hover:bg-[#18A36C]/90 text-white cursor-pointer",children:"Редактировать профиль"})]})]})})}),(0,b.jsx)(p.TabsContent,{value:"appointments",className:"space-y-8",children:(0,b.jsxs)(c.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"space-y-6",children:[[{id:1,doctor:"Петрова Анна Сергеевна",specialty:"Терапевт",date:"2025-11-05",time:"10:00",status:"confirmed"},{id:2,doctor:"Сидоров Петр Иванович",specialty:"Кардиолог",date:"2025-10-25",time:"14:30",status:"completed"}].map(a=>(0,b.jsx)(q.Card,{className:"border border-gray-200 rounded-lg",children:(0,b.jsx)(q.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("h3",{className:"text-xl text-[#2E2E2E] font-medium",children:a.doctor}),(0,b.jsx)("p",{className:"text-gray-600",children:a.specialty}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(e.Calendar,{className:"w-4 h-4 text-[#18A36C]"}),(0,b.jsx)("span",{children:a.date})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(l.Clock,{className:"w-4 h-4 text-[#18A36C]"}),(0,b.jsx)("span",{children:a.time})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:["confirmed"===a.status?(0,b.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 bg-green-50 text-green-700 rounded-lg",children:[(0,b.jsx)(m.CheckCircle,{className:"w-4 h-4"}),(0,b.jsx)("span",{children:"Подтверждено"})]}):(0,b.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 bg-gray-50 text-gray-700 rounded-lg",children:[(0,b.jsx)(m.CheckCircle,{className:"w-4 h-4"}),(0,b.jsx)("span",{children:"Завершено"})]}),"confirmed"===a.status&&(0,b.jsxs)(o.Button,{variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-500 hover:text-white cursor-pointer",children:[(0,b.jsx)(n.XCircle,{className:"w-4 h-4 mr-2"}),"Отменить"]})]})]})})},a.id)),(0,b.jsx)(o.Button,{onClick:()=>v.push("/contacts"),className:"w-full bg-[#18A36C] hover:bg-[#18A36C]/90 text-white cursor-pointer",children:"Связаться с нами"})]})}),(0,b.jsx)(p.TabsContent,{value:"documents",className:"space-y-8",children:(0,b.jsx)(c.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"space-y-6",children:[{id:1,name:"Результаты анализа крови",date:"2025-10-20",type:"Анализ"},{id:2,name:"Заключение терапевта",date:"2025-10-15",type:"Заключение"}].map(a=>(0,b.jsx)(q.Card,{className:"border border-gray-200 rounded-lg",children:(0,b.jsx)(q.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-[#18A36C]/10 rounded-lg flex items-center justify-center",children:(0,b.jsx)(f.FileText,{className:"w-6 h-6 text-[#18A36C]"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg text-[#2E2E2E] font-medium",children:a.name}),(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:[a.type," • ",a.date]})]})]}),(0,b.jsx)(o.Button,{variant:"outline",className:"border-[#18A36C] text-[#18A36C] cursor-pointer",children:"Скачать"})]})})},a.id))})}),(0,b.jsx)(p.TabsContent,{value:"settings",className:"space-y-8",children:(0,b.jsx)(c.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:(0,b.jsxs)(q.Card,{className:"border border-gray-200 rounded-lg",children:[(0,b.jsx)(q.CardHeader,{children:(0,b.jsxs)(q.CardTitle,{className:"flex items-center gap-3 text-[#2E2E2E] text-2xl",children:[(0,b.jsx)(h,{className:"w-6 h-6 text-[#18A36C]"}),"Настройки аккаунта"]})}),(0,b.jsx)(q.CardContent,{className:"space-y-6",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(o.Button,{variant:"outline",className:"w-full justify-start border-gray-300 text-[#2E2E2E] hover:border-[#18A36C] hover:text-[#18A36C] cursor-pointer",children:"Изменить пароль"}),(0,b.jsx)(o.Button,{variant:"outline",className:"w-full justify-start border-gray-300 text-[#2E2E2E] hover:border-[#18A36C] hover:text-[#18A36C] cursor-pointer",children:"Настройки уведомлений"}),(0,b.jsxs)(o.Button,{onClick:()=>{B(!0)},variant:"outline",className:"w-full justify-start border-red-300 text-red-600 hover:bg-red-50 hover:border-red-500 cursor-pointer",children:[(0,b.jsx)(i,{className:"w-4 h-4 mr-2"}),"Выйти из аккаунта"]})]})})]})})})]}),(0,b.jsx)(r.Dialog,{open:A,onOpenChange:B,children:(0,b.jsxs)(r.DialogContent,{className:"sm:max-w-md border-0",children:[(0,b.jsxs)(r.DialogHeader,{children:[(0,b.jsx)(r.DialogTitle,{className:"text-xl text-[#2E2E2E]",children:"Подтверждение выхода"}),(0,b.jsxs)(r.DialogDescription,{className:"text-gray-600 pt-2",children:["Вы уверены, что хотите выйти из аккаунта?",(0,b.jsx)("br",{}),"Вам потребуется войти снова для доступа к личному кабинету."]})]}),(0,b.jsxs)(r.DialogFooter,{className:"flex flex-col sm:flex-row gap-3 sm:gap-2 pt-4",children:[(0,b.jsx)(o.Button,{variant:"outline",onClick:()=>B(!1),className:"w-full sm:w-auto border-gray-300 text-[#2E2E2E] hover:bg-gray-50",children:"Отмена"}),(0,b.jsxs)(o.Button,{onClick:D,className:"w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:[(0,b.jsx)(i,{className:"w-4 h-4 mr-2"}),"Выйти"]})]})]})})]})}a.s(["SMAccountPage",()=>v],64176);var w=a.i(36131),x=a.i(4326),y=a.i(82171);a.i(81312);var z=a.i(35112);function A(a,[b,c]){return Math.min(c,Math.max(b,a))}var B=a.i(7554),C=a.i(37738),D=a.i(70121),E=a.i(50104),F=a.i(7827),G=a.i(96743),H=a.i(86228),I=a.i(22297),J=a.i(92843),K=a.i(4691),L=(a.i(92616),a.i(30553)),M=a.i(11011),N=a.i(46872),O=a.i(25152),P=a.i(72752),Q=a.i(77994),R=a.i(28094),S=a.i(41852),T=a.i(52081),U=[" ","Enter","ArrowUp","ArrowDown"],V=[" ","Enter"],W="Select",[X,Y,Z]=(0,C.createCollection)(W),[$,_]=(0,E.createContextScope)(W,[Z,K.createPopperScope]),aa=(0,K.createPopperScope)(),[ab,ac]=$(W),[ad,ae]=$(W),af="SelectTrigger";s.forwardRef((a,c)=>{let{__scopeSelect:d,disabled:e=!1,...f}=a,g=aa(d),h=ac(af,d),i=h.disabled||e,j=(0,D.useComposedRefs)(c,h.onTriggerChange),k=Y(d),l=s.useRef("touch"),[m,n,o]=aF(a=>{let b=k().filter(a=>!a.disabled),c=b.find(a=>a.value===h.value),d=aG(b,a,c);void 0!==d&&h.onValueChange(d.value)}),p=a=>{i||(h.onOpenChange(!0),o()),a&&(h.triggerPointerDownPosRef.current={x:Math.round(a.pageX),y:Math.round(a.pageY)})};return(0,b.jsx)(K.Anchor,{asChild:!0,...g,children:(0,b.jsx)(L.Primitive.button,{type:"button",role:"combobox","aria-controls":h.contentId,"aria-expanded":h.open,"aria-required":h.required,"aria-autocomplete":"none",dir:h.dir,"data-state":h.open?"open":"closed",disabled:i,"data-disabled":i?"":void 0,"data-placeholder":aE(h.value)?"":void 0,...f,ref:j,onClick:(0,B.composeEventHandlers)(f.onClick,a=>{a.currentTarget.focus(),"mouse"!==l.current&&p(a)}),onPointerDown:(0,B.composeEventHandlers)(f.onPointerDown,a=>{l.current=a.pointerType;let b=a.target;b.hasPointerCapture(a.pointerId)&&b.releasePointerCapture(a.pointerId),0===a.button&&!1===a.ctrlKey&&"mouse"===a.pointerType&&(p(a),a.preventDefault())}),onKeyDown:(0,B.composeEventHandlers)(f.onKeyDown,a=>{let b=""!==m.current;a.ctrlKey||a.altKey||a.metaKey||1!==a.key.length||n(a.key),(!b||" "!==a.key)&&U.includes(a.key)&&(p(),a.preventDefault())})})})}).displayName=af;var ag="SelectValue";s.forwardRef((a,c)=>{let{__scopeSelect:d,className:e,style:f,children:g,placeholder:h="",...i}=a,j=ac(ag,d),{onValueNodeHasChildrenChange:k}=j,l=void 0!==g,m=(0,D.useComposedRefs)(c,j.onValueNodeChange);return(0,P.useLayoutEffect)(()=>{k(l)},[k,l]),(0,b.jsx)(L.Primitive.span,{...i,ref:m,style:{pointerEvents:"none"},children:aE(j.value)?(0,b.jsx)(b.Fragment,{children:h}):g})}).displayName=ag,s.forwardRef((a,c)=>{let{__scopeSelect:d,children:e,...f}=a;return(0,b.jsx)(L.Primitive.span,{"aria-hidden":!0,...f,ref:c,children:e||"▼"})}).displayName="SelectIcon";var ah="SelectContent";s.forwardRef((a,c)=>{let d=ac(ah,a.__scopeSelect),[e,f]=s.useState();return((0,P.useLayoutEffect)(()=>{f(new DocumentFragment)},[]),d.open)?(0,b.jsx)(al,{...a,ref:c}):e?z.createPortal((0,b.jsx)(ai,{scope:a.__scopeSelect,children:(0,b.jsx)(X.Slot,{scope:a.__scopeSelect,children:(0,b.jsx)("div",{children:a.children})})}),e):null}).displayName=ah;var[ai,aj]=$(ah),ak=(0,M.createSlot)("SelectContent.RemoveScroll"),al=s.forwardRef((a,c)=>{let{__scopeSelect:d,position:e="item-aligned",onCloseAutoFocus:f,onEscapeKeyDown:g,onPointerDownOutside:h,side:i,sideOffset:j,align:k,alignOffset:l,arrowPadding:m,collisionBoundary:n,collisionPadding:o,sticky:p,hideWhenDetached:q,avoidCollisions:r,...t}=a,u=ac(ah,d),[v,w]=s.useState(null),[x,y]=s.useState(null),z=(0,D.useComposedRefs)(c,a=>w(a)),[A,C]=s.useState(null),[E,F]=s.useState(null),J=Y(d),[K,L]=s.useState(!1),M=s.useRef(!1);s.useEffect(()=>{if(v)return(0,S.hideOthers)(v)},[v]),(0,H.useFocusGuards)();let N=s.useCallback(a=>{let[b,...c]=J().map(a=>a.ref.current),[d]=c.slice(-1),e=document.activeElement;for(let c of a)if(c===e||(c?.scrollIntoView({block:"nearest"}),c===b&&x&&(x.scrollTop=0),c===d&&x&&(x.scrollTop=x.scrollHeight),c?.focus(),document.activeElement!==e))return},[J,x]),O=s.useCallback(()=>N([A,v]),[N,A,v]);s.useEffect(()=>{K&&O()},[K,O]);let{onOpenChange:P,triggerPointerDownPosRef:Q}=u;s.useEffect(()=>{if(v){let a={x:0,y:0},b=b=>{a={x:Math.abs(Math.round(b.pageX)-(Q.current?.x??0)),y:Math.abs(Math.round(b.pageY)-(Q.current?.y??0))}},c=c=>{a.x<=10&&a.y<=10?c.preventDefault():v.contains(c.target)||P(!1),document.removeEventListener("pointermove",b),Q.current=null};return null!==Q.current&&(document.addEventListener("pointermove",b),document.addEventListener("pointerup",c,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",b),document.removeEventListener("pointerup",c,{capture:!0})}}},[v,P,Q]),s.useEffect(()=>{let a=()=>P(!1);return window.addEventListener("blur",a),window.addEventListener("resize",a),()=>{window.removeEventListener("blur",a),window.removeEventListener("resize",a)}},[P]);let[R,U]=aF(a=>{let b=J().filter(a=>!a.disabled),c=b.find(a=>a.ref.current===document.activeElement),d=aG(b,a,c);d&&setTimeout(()=>d.ref.current.focus())}),V=s.useCallback((a,b,c)=>{let d=!M.current&&!c;(void 0!==u.value&&u.value===b||d)&&(C(a),d&&(M.current=!0))},[u.value]),W=s.useCallback(()=>v?.focus(),[v]),X=s.useCallback((a,b,c)=>{let d=!M.current&&!c;(void 0!==u.value&&u.value===b||d)&&F(a)},[u.value]),Z="popper"===e?an:am,$=Z===an?{side:i,sideOffset:j,align:k,alignOffset:l,arrowPadding:m,collisionBoundary:n,collisionPadding:o,sticky:p,hideWhenDetached:q,avoidCollisions:r}:{};return(0,b.jsx)(ai,{scope:d,content:v,viewport:x,onViewportChange:y,itemRefCallback:V,selectedItem:A,onItemLeave:W,itemTextRefCallback:X,focusSelectedItem:O,selectedItemText:E,position:e,isPositioned:K,searchRef:R,children:(0,b.jsx)(T.RemoveScroll,{as:ak,allowPinchZoom:!0,children:(0,b.jsx)(I.FocusScope,{asChild:!0,trapped:u.open,onMountAutoFocus:a=>{a.preventDefault()},onUnmountAutoFocus:(0,B.composeEventHandlers)(f,a=>{u.trigger?.focus({preventScroll:!0}),a.preventDefault()}),children:(0,b.jsx)(G.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:g,onPointerDownOutside:h,onFocusOutside:a=>a.preventDefault(),onDismiss:()=>u.onOpenChange(!1),children:(0,b.jsx)(Z,{role:"listbox",id:u.contentId,"data-state":u.open?"open":"closed",dir:u.dir,onContextMenu:a=>a.preventDefault(),...t,...$,onPlaced:()=>L(!0),ref:z,style:{display:"flex",flexDirection:"column",outline:"none",...t.style},onKeyDown:(0,B.composeEventHandlers)(t.onKeyDown,a=>{let b=a.ctrlKey||a.altKey||a.metaKey;if("Tab"===a.key&&a.preventDefault(),b||1!==a.key.length||U(a.key),["ArrowUp","ArrowDown","Home","End"].includes(a.key)){let b=J().filter(a=>!a.disabled).map(a=>a.ref.current);if(["ArrowUp","End"].includes(a.key)&&(b=b.slice().reverse()),["ArrowUp","ArrowDown"].includes(a.key)){let c=a.target,d=b.indexOf(c);b=b.slice(d+1)}setTimeout(()=>N(b)),a.preventDefault()}})})})})})})});al.displayName="SelectContentImpl";var am=s.forwardRef((a,c)=>{let{__scopeSelect:d,onPlaced:e,...f}=a,g=ac(ah,d),h=aj(ah,d),[i,j]=s.useState(null),[k,l]=s.useState(null),m=(0,D.useComposedRefs)(c,a=>l(a)),n=Y(d),o=s.useRef(!1),p=s.useRef(!0),{viewport:q,selectedItem:r,selectedItemText:t,focusSelectedItem:u}=h,v=s.useCallback(()=>{if(g.trigger&&g.valueNode&&i&&k&&q&&r&&t){let a=g.trigger.getBoundingClientRect(),b=k.getBoundingClientRect(),c=g.valueNode.getBoundingClientRect(),d=t.getBoundingClientRect();if("rtl"!==g.dir){let e=d.left-b.left,f=c.left-e,g=a.left-f,h=a.width+g,j=Math.max(h,b.width),k=A(f,[10,Math.max(10,window.innerWidth-10-j)]);i.style.minWidth=h+"px",i.style.left=k+"px"}else{let e=b.right-d.right,f=window.innerWidth-c.right-e,g=window.innerWidth-a.right-f,h=a.width+g,j=Math.max(h,b.width),k=A(f,[10,Math.max(10,window.innerWidth-10-j)]);i.style.minWidth=h+"px",i.style.right=k+"px"}let f=n(),h=window.innerHeight-20,j=q.scrollHeight,l=window.getComputedStyle(k),m=parseInt(l.borderTopWidth,10),p=parseInt(l.paddingTop,10),s=parseInt(l.borderBottomWidth,10),u=m+p+j+parseInt(l.paddingBottom,10)+s,v=Math.min(5*r.offsetHeight,u),w=window.getComputedStyle(q),x=parseInt(w.paddingTop,10),y=parseInt(w.paddingBottom,10),z=a.top+a.height/2-10,B=r.offsetHeight/2,C=m+p+(r.offsetTop+B);if(C<=z){let a=f.length>0&&r===f[f.length-1].ref.current;i.style.bottom="0px";let b=Math.max(h-z,B+(a?y:0)+(k.clientHeight-q.offsetTop-q.offsetHeight)+s);i.style.height=C+b+"px"}else{let a=f.length>0&&r===f[0].ref.current;i.style.top="0px";let b=Math.max(z,m+q.offsetTop+(a?x:0)+B);i.style.height=b+(u-C)+"px",q.scrollTop=C-z+q.offsetTop}i.style.margin="10px 0",i.style.minHeight=v+"px",i.style.maxHeight=h+"px",e?.(),requestAnimationFrame(()=>o.current=!0)}},[n,g.trigger,g.valueNode,i,k,q,r,t,g.dir,e]);(0,P.useLayoutEffect)(()=>v(),[v]);let[w,x]=s.useState();(0,P.useLayoutEffect)(()=>{k&&x(window.getComputedStyle(k).zIndex)},[k]);let y=s.useCallback(a=>{a&&!0===p.current&&(v(),u?.(),p.current=!1)},[v,u]);return(0,b.jsx)(ao,{scope:d,contentWrapper:i,shouldExpandOnScrollRef:o,onScrollButtonChange:y,children:(0,b.jsx)("div",{ref:j,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w},children:(0,b.jsx)(L.Primitive.div,{...f,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...f.style}})})})});am.displayName="SelectItemAlignedPosition";var an=s.forwardRef((a,c)=>{let{__scopeSelect:d,align:e="start",collisionPadding:f=10,...g}=a,h=aa(d);return(0,b.jsx)(K.Content,{...h,...g,ref:c,align:e,collisionPadding:f,style:{boxSizing:"border-box",...g.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});an.displayName="SelectPopperPosition";var[ao,ap]=$(ah,{}),aq="SelectViewport";s.forwardRef((a,c)=>{let{__scopeSelect:d,nonce:e,...f}=a,g=aj(aq,d),h=ap(aq,d),i=(0,D.useComposedRefs)(c,g.onViewportChange),j=s.useRef(0);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:e}),(0,b.jsx)(X.Slot,{scope:d,children:(0,b.jsx)(L.Primitive.div,{"data-radix-select-viewport":"",role:"presentation",...f,ref:i,style:{position:"relative",flex:1,overflow:"hidden auto",...f.style},onScroll:(0,B.composeEventHandlers)(f.onScroll,a=>{let b=a.currentTarget,{contentWrapper:c,shouldExpandOnScrollRef:d}=h;if(d?.current&&c){let a=Math.abs(j.current-b.scrollTop);if(a>0){let d=window.innerHeight-20,e=Math.max(parseFloat(c.style.minHeight),parseFloat(c.style.height));if(e<d){let f=e+a,g=Math.min(d,f),h=f-g;c.style.height=g+"px","0px"===c.style.bottom&&(b.scrollTop=h>0?h:0,c.style.justifyContent="flex-end")}}}j.current=b.scrollTop})})})]})}).displayName=aq;var ar="SelectGroup",[as,at]=$(ar);s.forwardRef((a,c)=>{let{__scopeSelect:d,...e}=a,f=(0,J.useId)();return(0,b.jsx)(as,{scope:d,id:f,children:(0,b.jsx)(L.Primitive.div,{role:"group","aria-labelledby":f,...e,ref:c})})}).displayName=ar;var au="SelectLabel";s.forwardRef((a,c)=>{let{__scopeSelect:d,...e}=a,f=at(au,d);return(0,b.jsx)(L.Primitive.div,{id:f.id,...e,ref:c})}).displayName=au;var av="SelectItem",[aw,ax]=$(av);s.forwardRef((a,c)=>{let{__scopeSelect:d,value:e,disabled:f=!1,textValue:g,...h}=a,i=ac(av,d),j=aj(av,d),k=i.value===e,[l,m]=s.useState(g??""),[n,o]=s.useState(!1),p=(0,D.useComposedRefs)(c,a=>j.itemRefCallback?.(a,e,f)),q=(0,J.useId)(),r=s.useRef("touch"),t=()=>{f||(i.onValueChange(e),i.onOpenChange(!1))};if(""===e)throw Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,b.jsx)(aw,{scope:d,value:e,disabled:f,textId:q,isSelected:k,onItemTextChange:s.useCallback(a=>{m(b=>b||(a?.textContent??"").trim())},[]),children:(0,b.jsx)(X.ItemSlot,{scope:d,value:e,disabled:f,textValue:l,children:(0,b.jsx)(L.Primitive.div,{role:"option","aria-labelledby":q,"data-highlighted":n?"":void 0,"aria-selected":k&&n,"data-state":k?"checked":"unchecked","aria-disabled":f||void 0,"data-disabled":f?"":void 0,tabIndex:f?void 0:-1,...h,ref:p,onFocus:(0,B.composeEventHandlers)(h.onFocus,()=>o(!0)),onBlur:(0,B.composeEventHandlers)(h.onBlur,()=>o(!1)),onClick:(0,B.composeEventHandlers)(h.onClick,()=>{"mouse"!==r.current&&t()}),onPointerUp:(0,B.composeEventHandlers)(h.onPointerUp,()=>{"mouse"===r.current&&t()}),onPointerDown:(0,B.composeEventHandlers)(h.onPointerDown,a=>{r.current=a.pointerType}),onPointerMove:(0,B.composeEventHandlers)(h.onPointerMove,a=>{r.current=a.pointerType,f?j.onItemLeave?.():"mouse"===r.current&&a.currentTarget.focus({preventScroll:!0})}),onPointerLeave:(0,B.composeEventHandlers)(h.onPointerLeave,a=>{a.currentTarget===document.activeElement&&j.onItemLeave?.()}),onKeyDown:(0,B.composeEventHandlers)(h.onKeyDown,a=>{(j.searchRef?.current===""||" "!==a.key)&&(V.includes(a.key)&&t()," "===a.key&&a.preventDefault())})})})})}).displayName=av;var ay="SelectItemText";s.forwardRef((a,c)=>{let{__scopeSelect:d,className:e,style:f,...g}=a,h=ac(ay,d),i=aj(ay,d),j=ax(ay,d),k=ae(ay,d),[l,m]=s.useState(null),n=(0,D.useComposedRefs)(c,a=>m(a),j.onItemTextChange,a=>i.itemTextRefCallback?.(a,j.value,j.disabled)),o=l?.textContent,p=s.useMemo(()=>(0,b.jsx)("option",{value:j.value,disabled:j.disabled,children:o},j.value),[j.disabled,j.value,o]),{onNativeOptionAdd:q,onNativeOptionRemove:r}=k;return(0,P.useLayoutEffect)(()=>(q(p),()=>r(p)),[q,r,p]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(L.Primitive.span,{id:j.textId,...g,ref:n}),j.isSelected&&h.valueNode&&!h.valueNodeHasChildren?z.createPortal(g.children,h.valueNode):null]})}).displayName=ay;var az="SelectItemIndicator";s.forwardRef((a,c)=>{let{__scopeSelect:d,...e}=a;return ax(az,d).isSelected?(0,b.jsx)(L.Primitive.span,{"aria-hidden":!0,...e,ref:c}):null}).displayName=az;var aA="SelectScrollUpButton";s.forwardRef((a,c)=>{let d=aj(aA,a.__scopeSelect),e=ap(aA,a.__scopeSelect),[f,g]=s.useState(!1),h=(0,D.useComposedRefs)(c,e.onScrollButtonChange);return(0,P.useLayoutEffect)(()=>{if(d.viewport&&d.isPositioned){let a=function(){g(b.scrollTop>0)},b=d.viewport;return a(),b.addEventListener("scroll",a),()=>b.removeEventListener("scroll",a)}},[d.viewport,d.isPositioned]),f?(0,b.jsx)(aC,{...a,ref:h,onAutoScroll:()=>{let{viewport:a,selectedItem:b}=d;a&&b&&(a.scrollTop=a.scrollTop-b.offsetHeight)}}):null}).displayName=aA;var aB="SelectScrollDownButton";s.forwardRef((a,c)=>{let d=aj(aB,a.__scopeSelect),e=ap(aB,a.__scopeSelect),[f,g]=s.useState(!1),h=(0,D.useComposedRefs)(c,e.onScrollButtonChange);return(0,P.useLayoutEffect)(()=>{if(d.viewport&&d.isPositioned){let a=function(){let a=b.scrollHeight-b.clientHeight;g(Math.ceil(b.scrollTop)<a)},b=d.viewport;return a(),b.addEventListener("scroll",a),()=>b.removeEventListener("scroll",a)}},[d.viewport,d.isPositioned]),f?(0,b.jsx)(aC,{...a,ref:h,onAutoScroll:()=>{let{viewport:a,selectedItem:b}=d;a&&b&&(a.scrollTop=a.scrollTop+b.offsetHeight)}}):null}).displayName=aB;var aC=s.forwardRef((a,c)=>{let{__scopeSelect:d,onAutoScroll:e,...f}=a,g=aj("SelectScrollButton",d),h=s.useRef(null),i=Y(d),j=s.useCallback(()=>{null!==h.current&&(window.clearInterval(h.current),h.current=null)},[]);return s.useEffect(()=>()=>j(),[j]),(0,P.useLayoutEffect)(()=>{let a=i().find(a=>a.ref.current===document.activeElement);a?.ref.current?.scrollIntoView({block:"nearest"})},[i]),(0,b.jsx)(L.Primitive.div,{"aria-hidden":!0,...f,ref:c,style:{flexShrink:0,...f.style},onPointerDown:(0,B.composeEventHandlers)(f.onPointerDown,()=>{null===h.current&&(h.current=window.setInterval(e,50))}),onPointerMove:(0,B.composeEventHandlers)(f.onPointerMove,()=>{g.onItemLeave?.(),null===h.current&&(h.current=window.setInterval(e,50))}),onPointerLeave:(0,B.composeEventHandlers)(f.onPointerLeave,()=>{j()})})});s.forwardRef((a,c)=>{let{__scopeSelect:d,...e}=a;return(0,b.jsx)(L.Primitive.div,{"aria-hidden":!0,...e,ref:c})}).displayName="SelectSeparator";var aD="SelectArrow";function aE(a){return""===a||void 0===a}function aF(a){let b=(0,N.useCallbackRef)(a),c=s.useRef(""),d=s.useRef(0),e=s.useCallback(a=>{let e=c.current+a;b(e),function a(b){c.current=b,window.clearTimeout(d.current),""!==b&&(d.current=window.setTimeout(()=>a(""),1e3))}(e)},[b]),f=s.useCallback(()=>{c.current="",window.clearTimeout(d.current)},[]);return s.useEffect(()=>()=>window.clearTimeout(d.current),[]),[c,e,f]}function aG(a,b,c){var d,e;let f=b.length>1&&Array.from(b).every(a=>a===b[0])?b[0]:b,g=c?a.indexOf(c):-1,h=(d=a,e=Math.max(g,0),d.map((a,b)=>d[(e+b)%d.length]));1===f.length&&(h=h.filter(a=>a!==c));let i=h.find(a=>a.textValue.toLowerCase().startsWith(f.toLowerCase()));return i!==c?i:void 0}s.forwardRef((a,c)=>{let{__scopeSelect:d,...e}=a,f=aa(d),g=ac(aD,d),h=aj(aD,d);return g.open&&"popper"===h.position?(0,b.jsx)(K.Arrow,{...f,...e,ref:c}):null}).displayName=aD,s.forwardRef(({__scopeSelect:a,value:c,...d},e)=>{let f=s.useRef(null),g=(0,D.useComposedRefs)(e,f),h=(0,Q.usePrevious)(c);return s.useEffect(()=>{let a=f.current;if(!a)return;let b=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(h!==c&&b){let d=new Event("change",{bubbles:!0});b.call(a,c),a.dispatchEvent(d)}},[h,c]),(0,b.jsx)(L.Primitive.select,{...d,style:{...R.VISUALLY_HIDDEN_STYLES,...d.style},ref:g,defaultValue:c})}).displayName="SelectBubbleInput",a.i(6406),a.i(77991);let aH=(0,g.default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var aI=a.i(26758);function aJ({className:a,...c}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,aI.cn)("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...c})}var aK=a.i(31371);let aL=(0,g.default)("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);(0,g.default)("settings-2",[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);var aM=a.i(63588),aN=a.i(50522),aO=a.i(43108);let aP=(0,g.default)("at-sign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]),aQ=(0,g.default)("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var aR=a.i(77156),aS=a.i(3314),aT=a.i(92759),aU=a.i(96221),aV=a.i(5784),aW=a.i(56468);let aX={email:"",categories:[],format:"html",agreed:!1},aY="Если у вас возникли вопросы по поводу работы наших сотрудников или компании в целом, а также если вы хотите сказать слова благодарности, напишите сообщение и оно придет директору лично",aZ={name:"",subject:"",message:""};var a$=a.i(31860),a_=a.i(75671),a0=a.i(41379),a1=a.i(67453),a2=a.i(25170);function a3({isOpen:a,onClose:d}){let[e,f]=(0,s.useState)(""),[g,h]=(0,s.useState)(""),[i,j]=(0,s.useState)(""),[k,l]=(0,s.useState)(!1),[m,n]=(0,s.useState)(!1),[p,q]=(0,s.useState)(!1),[t,u]=(0,s.useState)(!1),v=(0,a2.useAlert)(),w=()=>{f(""),h(""),j(""),l(!1),n(!1),q(!1),d()},z=async()=>{if(e.trim()?g.trim()?g.length<6?(v.error("Новый пароль должен содержать минимум 6 символов","Слишком короткий пароль"),!1):g!==i?(v.error("Пароли не совпадают","Ошибка валидации"),!1):e!==g||(v.warning("Новый пароль должен отличаться от текущего","Одинаковые пароли"),!1):(v.error("Введите новый пароль","Ошибка валидации"),!1):(v.error("Введите текущий пароль","Ошибка валидации"),!1)){u(!0);try{let a=await fetch("/api/auth/change-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({oldPassword:e,newPassword:g})}),b=await a.json();if(!a.ok)return void v.error(b.error||"Ошибка при смене пароля","Ошибка");v.success("Пароль успешно изменен!","Успешно"),w()}catch(a){v.error("Ошибка при смене пароля. Попробуйте позже.","Ошибка")}finally{u(!1)}}},A=(a=>{if(!a)return{strength:0,text:"",color:""};let b=0;return(a.length>=6&&b++,a.length>=8&&b++,/[a-z]/.test(a)&&/[A-Z]/.test(a)&&b++,/\d/.test(a)&&b++,/[^a-zA-Z\d]/.test(a)&&b++,b<=1)?{strength:20,text:"Слабый",color:"bg-red-500"}:b<=2?{strength:40,text:"Средний",color:"bg-orange-500"}:b<=3?{strength:60,text:"Хороший",color:"bg-yellow-500"}:b<=4?{strength:80,text:"Сильный",color:"bg-green-500"}:{strength:100,text:"Очень сильный",color:"bg-emerald-500"}})(g);return(0,b.jsx)(r.Dialog,{open:a,onOpenChange:w,children:(0,b.jsxs)(r.DialogContent,{className:"sm:max-w-md border-gray-200 bg-white",children:[(0,b.jsx)(r.DialogHeader,{children:(0,b.jsxs)(c.motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.4},children:[(0,b.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,b.jsx)(c.motion.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"inline-flex items-center justify-center w-16 h-16 rounded-lg bg-[#18A36C]/10",children:(0,b.jsx)(aS.Shield,{className:"w-8 h-8 text-[#18A36C]"})})}),(0,b.jsx)(r.DialogTitle,{className:"text-center text-[#2E2E2E] text-2xl",children:"Смена пароля"}),(0,b.jsx)(r.DialogDescription,{className:"text-center text-gray-600 mt-2",children:"Введите текущий пароль и новый пароль для подтверждения"})]})}),(0,b.jsxs)(c.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:"space-y-5 mt-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(y.Label,{htmlFor:"oldPassword",className:"text-[#2E2E2E]",children:"Текущий пароль"}),(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)(aO.Lock,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-[#18A36C] transition-colors"}),(0,b.jsx)(x.Input,{id:"oldPassword",type:k?"text":"password",placeholder:"Введите текущий пароль",value:e,onChange:a=>f(a.target.value),className:"pl-12 pr-12 h-12 border-gray-300 focus:border-[#18A36C] transition-all duration-200 rounded-lg"}),(0,b.jsx)("button",{type:"button",onClick:()=>l(!k),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-[#18A36C] transition-colors",children:k?(0,b.jsx)(a0.EyeOff,{className:"w-5 h-5"}):(0,b.jsx)(aR.Eye,{className:"w-5 h-5"})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(y.Label,{htmlFor:"newPassword",className:"text-[#2E2E2E]",children:"Новый пароль"}),(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)(aO.Lock,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-[#18A36C] transition-colors"}),(0,b.jsx)(x.Input,{id:"newPassword",type:m?"text":"password",placeholder:"Введите новый пароль",value:g,onChange:a=>h(a.target.value),className:"pl-12 pr-12 h-12 border-gray-300 focus:border-[#18A36C] transition-all duration-200 rounded-lg"}),(0,b.jsx)("button",{type:"button",onClick:()=>n(!m),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-[#18A36C] transition-colors",children:m?(0,b.jsx)(a0.EyeOff,{className:"w-5 h-5"}):(0,b.jsx)(aR.Eye,{className:"w-5 h-5"})})]}),g&&(0,b.jsxs)(c.motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Надежность пароля"}),(0,b.jsx)("span",{className:`font-medium ${A.color.replace("bg-","text-")}`,children:A.text})]}),(0,b.jsx)("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,b.jsx)(c.motion.div,{initial:{width:0},animate:{width:`${A.strength}%`},transition:{duration:.3},className:`h-full ${A.color} rounded-full`})})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(y.Label,{htmlFor:"confirmPassword",className:"text-[#2E2E2E]",children:"Подтверждение пароля"}),(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)(aO.Lock,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-[#18A36C] transition-colors"}),(0,b.jsx)(x.Input,{id:"confirmPassword",type:p?"text":"password",placeholder:"Повторите новый пароль",value:i,onChange:a=>j(a.target.value),className:"pl-12 pr-12 h-12 border-gray-300 focus:border-[#18A36C] transition-all duration-200 rounded-lg"}),(0,b.jsx)("button",{type:"button",onClick:()=>q(!p),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-[#18A36C] transition-colors",children:p?(0,b.jsx)(a0.EyeOff,{className:"w-5 h-5"}):(0,b.jsx)(aR.Eye,{className:"w-5 h-5"})})]}),i&&(0,b.jsx)(c.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center gap-2",children:g===i?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(a1.CheckCircle2,{className:"w-4 h-4 text-green-500"}),(0,b.jsx)("span",{className:"text-xs text-green-600",children:"Пароли совпадают"})]}):(0,b.jsx)("span",{className:"text-xs text-red-600",children:"Пароли не совпадают"})})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)(o.Button,{onClick:w,variant:"outline",className:"flex-1 h-12 border-gray-300 text-gray-700 hover:bg-gray-50",disabled:t,children:"Отмена"}),(0,b.jsx)(o.Button,{onClick:z,disabled:t||!e||!g||!i,className:"flex-1 h-12 bg-[#18A36C] hover:bg-[#18A36C]/90 text-white",children:t?"Изменение...":"Изменить пароль"})]}),(0,b.jsxs)("div",{className:"text-center text-xs text-gray-600 mt-4 p-3 bg-[#F4F4F4] rounded-lg",children:[(0,b.jsx)(aS.Shield,{className:"w-4 h-4 inline mr-1"}),"Для безопасности используйте пароль длиной минимум 8 символов с буквами и цифрами"]})]})]})})}let a4=(0,g.default)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var a5=a.i(81560),a6=a.i(14548),a7=a.i(3688),a8=["PageUp","PageDown"],a9=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ba={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},bb="Slider",[bc,bd,be]=(0,C.createCollection)(bb),[bf,bg]=(0,E.createContextScope)(bb,[be]),[bh,bi]=bf(bb),bj=s.forwardRef((a,c)=>{let{name:d,min:e=0,max:f=100,step:g=1,orientation:h="horizontal",disabled:i=!1,minStepsBetweenThumbs:j=0,defaultValue:k=[e],value:l,onValueChange:m=()=>{},onValueCommit:n=()=>{},inverted:o=!1,form:p,...q}=a,r=s.useRef(new Set),t=s.useRef(0),u="horizontal"===h,[v=[],w]=(0,O.useControllableState)({prop:l,defaultProp:k,onChange:a=>{let b=[...r.current];b[t.current]?.focus(),m(a)}}),x=s.useRef(v);function y(a,b,{commit:c}={commit:!1}){let d,h=(String(g).split(".")[1]||"").length,i=A(Math.round((Math.round((a-e)/g)*g+e)*(d=Math.pow(10,h)))/d,[e,f]);w((a=[])=>{let d=function(a=[],b,c){let d=[...a];return d[c]=b,d.sort((a,b)=>a-b)}(a,i,b);if(!function(a,b){if(b>0)return Math.min(...a.slice(0,-1).map((b,c)=>a[c+1]-b))>=b;return!0}(d,j*g))return a;{t.current=d.indexOf(i);let b=String(d)!==String(a);return b&&c&&n(d),b?d:a}})}return(0,b.jsx)(bh,{scope:a.__scopeSlider,name:d,disabled:i,min:e,max:f,valueIndexToChangeRef:t,thumbs:r.current,values:v,orientation:h,form:p,children:(0,b.jsx)(bc.Provider,{scope:a.__scopeSlider,children:(0,b.jsx)(bc.Slot,{scope:a.__scopeSlider,children:(0,b.jsx)(u?bm:bn,{"aria-disabled":i,"data-disabled":i?"":void 0,...q,ref:c,onPointerDown:(0,B.composeEventHandlers)(q.onPointerDown,()=>{i||(x.current=v)}),min:e,max:f,inverted:o,onSlideStart:i?void 0:function(a){let b=function(a,b){if(1===a.length)return 0;let c=a.map(a=>Math.abs(a-b)),d=Math.min(...c);return c.indexOf(d)}(v,a);y(a,b)},onSlideMove:i?void 0:function(a){y(a,t.current)},onSlideEnd:i?void 0:function(){let a=x.current[t.current];v[t.current]!==a&&n(v)},onHomeKeyDown:()=>!i&&y(e,0,{commit:!0}),onEndKeyDown:()=>!i&&y(f,v.length-1,{commit:!0}),onStepKeyDown:({event:a,direction:b})=>{if(!i){let c=a8.includes(a.key)||a.shiftKey&&a9.includes(a.key),d=t.current;y(v[d]+g*(c?10:1)*b,d,{commit:!0})}}})})})})});bj.displayName=bb;var[bk,bl]=bf(bb,{startEdge:"left",endEdge:"right",size:"width",direction:1}),bm=s.forwardRef((a,c)=>{let{min:d,max:e,dir:f,inverted:g,onSlideStart:h,onSlideMove:i,onSlideEnd:j,onStepKeyDown:k,...l}=a,[m,n]=s.useState(null),o=(0,D.useComposedRefs)(c,a=>n(a)),p=s.useRef(void 0),q=(0,F.useDirection)(f),r="ltr"===q,t=r&&!g||!r&&g;function u(a){let b=p.current||m.getBoundingClientRect(),c=by([0,b.width],t?[d,e]:[e,d]);return p.current=b,c(a-b.left)}return(0,b.jsx)(bk,{scope:a.__scopeSlider,startEdge:t?"left":"right",endEdge:t?"right":"left",direction:t?1:-1,size:"width",children:(0,b.jsx)(bo,{dir:q,"data-orientation":"horizontal",...l,ref:o,style:{...l.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:a=>{let b=u(a.clientX);h?.(b)},onSlideMove:a=>{let b=u(a.clientX);i?.(b)},onSlideEnd:()=>{p.current=void 0,j?.()},onStepKeyDown:a=>{let b=ba[t?"from-left":"from-right"].includes(a.key);k?.({event:a,direction:b?-1:1})}})})}),bn=s.forwardRef((a,c)=>{let{min:d,max:e,inverted:f,onSlideStart:g,onSlideMove:h,onSlideEnd:i,onStepKeyDown:j,...k}=a,l=s.useRef(null),m=(0,D.useComposedRefs)(c,l),n=s.useRef(void 0),o=!f;function p(a){let b=n.current||l.current.getBoundingClientRect(),c=by([0,b.height],o?[e,d]:[d,e]);return n.current=b,c(a-b.top)}return(0,b.jsx)(bk,{scope:a.__scopeSlider,startEdge:o?"bottom":"top",endEdge:o?"top":"bottom",size:"height",direction:o?1:-1,children:(0,b.jsx)(bo,{"data-orientation":"vertical",...k,ref:m,style:{...k.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:a=>{let b=p(a.clientY);g?.(b)},onSlideMove:a=>{let b=p(a.clientY);h?.(b)},onSlideEnd:()=>{n.current=void 0,i?.()},onStepKeyDown:a=>{let b=ba[o?"from-bottom":"from-top"].includes(a.key);j?.({event:a,direction:b?-1:1})}})})}),bo=s.forwardRef((a,c)=>{let{__scopeSlider:d,onSlideStart:e,onSlideMove:f,onSlideEnd:g,onHomeKeyDown:h,onEndKeyDown:i,onStepKeyDown:j,...k}=a,l=bi(bb,d);return(0,b.jsx)(L.Primitive.span,{...k,ref:c,onKeyDown:(0,B.composeEventHandlers)(a.onKeyDown,a=>{"Home"===a.key?(h(a),a.preventDefault()):"End"===a.key?(i(a),a.preventDefault()):a8.concat(a9).includes(a.key)&&(j(a),a.preventDefault())}),onPointerDown:(0,B.composeEventHandlers)(a.onPointerDown,a=>{let b=a.target;b.setPointerCapture(a.pointerId),a.preventDefault(),l.thumbs.has(b)?b.focus():e(a)}),onPointerMove:(0,B.composeEventHandlers)(a.onPointerMove,a=>{a.target.hasPointerCapture(a.pointerId)&&f(a)}),onPointerUp:(0,B.composeEventHandlers)(a.onPointerUp,a=>{let b=a.target;b.hasPointerCapture(a.pointerId)&&(b.releasePointerCapture(a.pointerId),g(a))})})}),bp="SliderTrack",bq=s.forwardRef((a,c)=>{let{__scopeSlider:d,...e}=a,f=bi(bp,d);return(0,b.jsx)(L.Primitive.span,{"data-disabled":f.disabled?"":void 0,"data-orientation":f.orientation,...e,ref:c})});bq.displayName=bp;var br="SliderRange",bs=s.forwardRef((a,c)=>{let{__scopeSlider:d,...e}=a,f=bi(br,d),g=bl(br,d),h=s.useRef(null),i=(0,D.useComposedRefs)(c,h),j=f.values.length,k=f.values.map(a=>bx(a,f.min,f.max)),l=j>1?Math.min(...k):0,m=100-Math.max(...k);return(0,b.jsx)(L.Primitive.span,{"data-orientation":f.orientation,"data-disabled":f.disabled?"":void 0,...e,ref:i,style:{...a.style,[g.startEdge]:l+"%",[g.endEdge]:m+"%"}})});bs.displayName=br;var bt="SliderThumb",bu=s.forwardRef((a,c)=>{let d=bd(a.__scopeSlider),[e,f]=s.useState(null),g=(0,D.useComposedRefs)(c,a=>f(a)),h=s.useMemo(()=>e?d().findIndex(a=>a.ref.current===e):-1,[d,e]);return(0,b.jsx)(bv,{...a,ref:g,index:h})}),bv=s.forwardRef((a,c)=>{var d,e,f,g,h;let i,j,{__scopeSlider:k,index:l,name:m,...n}=a,o=bi(bt,k),p=bl(bt,k),[q,r]=s.useState(null),t=(0,D.useComposedRefs)(c,a=>r(a)),u=!q||o.form||!!q.closest("form"),v=(0,a7.useSize)(q),w=o.values[l],x=void 0===w?0:bx(w,o.min,o.max),y=(d=l,(e=o.values.length)>2?`Value ${d+1} of ${e}`:2===e?["Minimum","Maximum"][d]:void 0),z=v?.[p.size],A=z?(f=z,g=x,h=p.direction,j=by([0,50],[0,i=f/2]),(i-j(g)*h)*h):0;return s.useEffect(()=>{if(q)return o.thumbs.add(q),()=>{o.thumbs.delete(q)}},[q,o.thumbs]),(0,b.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[p.startEdge]:`calc(${x}% + ${A}px)`},children:[(0,b.jsx)(bc.ItemSlot,{scope:a.__scopeSlider,children:(0,b.jsx)(L.Primitive.span,{role:"slider","aria-label":a["aria-label"]||y,"aria-valuemin":o.min,"aria-valuenow":w,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...n,ref:t,style:void 0===w?{display:"none"}:a.style,onFocus:(0,B.composeEventHandlers)(a.onFocus,()=>{o.valueIndexToChangeRef.current=l})})}),u&&(0,b.jsx)(bw,{name:m??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:w},l)]})});bu.displayName=bt;var bw=s.forwardRef(({__scopeSlider:a,value:c,...d},e)=>{let f=s.useRef(null),g=(0,D.useComposedRefs)(f,e),h=(0,Q.usePrevious)(c);return s.useEffect(()=>{let a=f.current;if(!a)return;let b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(h!==c&&b){let d=new Event("input",{bubbles:!0});b.call(a,c),a.dispatchEvent(d)}},[h,c]),(0,b.jsx)(L.Primitive.input,{style:{display:"none"},...d,ref:g,defaultValue:c})});function bx(a,b,c){return A(100/(c-b)*(a-b),[0,100])}function by(a,b){return c=>{if(a[0]===a[1]||b[0]===b[1])return b[0];let d=(b[1]-b[0])/(a[1]-a[0]);return b[0]+d*(c-a[0])}}bw.displayName="RadioBubbleInput";let bz=s.forwardRef(({className:a,...c},d)=>(0,b.jsxs)(bj,{ref:d,className:(0,aI.cn)("relative flex w-full touch-none select-none items-center",a),...c,children:[(0,b.jsx)(bq,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-gray-200",children:(0,b.jsx)(bs,{className:"absolute h-full bg-[#18A36C]"})}),(0,b.jsx)(bu,{className:"block h-5 w-5 rounded-full border-2 border-[#18A36C] bg-white ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#18A36C] focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 cursor-grab active:cursor-grabbing"})]}));bz.displayName=bj.displayName;let bA=(0,g.default)("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),bB=(0,g.default)("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),bC=(0,g.default)("rotate-cw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);var bD=a.i(86796);function bE({isOpen:a,onClose:c,onSave:d,imageFile:e}){let f=(0,s.useRef)(null),g=(0,s.useRef)(null),[h,i]=(0,s.useState)(null),[j,k]=(0,s.useState)(1),[l,m]=(0,s.useState)(0),[n,p]=(0,s.useState)({x:0,y:0}),[q,t]=(0,s.useState)(!1),[u,v]=(0,s.useState)({x:0,y:0}),[w,x]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(e){let a=URL.createObjectURL(e);i(a),k(1),m(0),p({x:0,y:0});let b=new Image;return b.onload=()=>{g.current=b,y()},b.src=a,()=>URL.revokeObjectURL(a)}},[e]),(0,s.useEffect)(()=>{g.current&&y()},[j,l,n]);let y=(0,s.useCallback)(()=>{let a,b,c=f.current,d=c?.getContext("2d"),e=g.current;if(!c||!d||!e)return;d.fillStyle="#f3f4f6",d.fillRect(0,0,c.width,c.height),d.save(),d.beginPath(),d.arc(c.width/2,c.height/2,100,0,2*Math.PI),d.clip(),d.translate(c.width/2+n.x,c.height/2+n.y),d.rotate(l*Math.PI/180),d.scale(j,j);let h=e.width/e.height;h>1?(b=200,a=200*h):(a=200,b=200/h),d.drawImage(e,-a/2,-b/2,a,b),d.restore(),d.strokeStyle="#18A36C",d.lineWidth=3,d.beginPath(),d.arc(c.width/2,c.height/2,100,0,2*Math.PI),d.stroke(),d.strokeStyle="#e5e7eb",d.lineWidth=1,d.beginPath(),d.arc(c.width/2,c.height/2,104,0,2*Math.PI),d.stroke()},[j,l,n,200]),z=()=>{t(!1)},A=async()=>{let a,b,c=f.current,e=g.current;if(!c||!e)return;x(!0);let h=document.createElement("canvas");h.width=200,h.height=200;let i=h.getContext("2d");if(!i)return void x(!1);i.beginPath(),i.arc(100,100,100,0,2*Math.PI),i.closePath(),i.clip(),i.translate(100+n.x,100+n.y),i.rotate(l*Math.PI/180),i.scale(j,j);let k=e.width/e.height;k>1?(b=200,a=200*k):(a=200,b=200/k),i.drawImage(e,-a/2,-b/2,a,b),h.toBlob(a=>{a&&d(a),x(!1)},"image/png",1)};return(0,b.jsx)(r.Dialog,{open:a,onOpenChange:c,children:(0,b.jsxs)(r.DialogContent,{className:"sm:max-w-lg",children:[(0,b.jsxs)(r.DialogHeader,{children:[(0,b.jsx)(r.DialogTitle,{className:"text-xl text-[#2E2E2E]",children:"Настройка аватара"}),(0,b.jsx)(r.DialogDescription,{className:"text-gray-600",children:"Перетащите изображение для позиционирования и используйте ползунок для масштабирования"})]}),(0,b.jsx)("div",{className:"flex flex-col items-center gap-4 py-4",children:h&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("canvas",{ref:f,width:300,height:300,className:"border border-gray-200 rounded-lg cursor-move bg-gray-100",onMouseDown:a=>{t(!0),v({x:a.clientX-n.x,y:a.clientY-n.y})},onMouseMove:a=>{q&&p({x:a.clientX-u.x,y:a.clientY-u.y})},onMouseUp:z,onMouseLeave:z}),(0,b.jsxs)("div",{className:"w-full space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(bB,{className:"w-4 h-4 text-gray-500"}),(0,b.jsx)(bz,{value:[j],min:.5,max:3,step:.1,onValueChange:a=>k(a[0]),className:"flex-1"}),(0,b.jsx)(bA,{className:"w-4 h-4 text-gray-500"})]}),(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsxs)(o.Button,{variant:"outline",size:"sm",onClick:()=>{m(a=>(a+90)%360)},className:"border-gray-300",children:[(0,b.jsx)(bC,{className:"w-4 h-4 mr-2"}),"Повернуть"]})})]})]})}),(0,b.jsxs)(r.DialogFooter,{className:"flex flex-col sm:flex-row gap-3 sm:gap-2",children:[(0,b.jsx)(o.Button,{variant:"outline",onClick:c,className:"w-full sm:w-auto border-gray-300",children:"Отмена"}),(0,b.jsx)(o.Button,{onClick:A,disabled:w||!h,className:"w-full sm:w-auto bg-[#18A36C] hover:bg-[#18A36C]/90 text-white",children:w?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}),"Сохранение..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(bD.Upload,{className:"w-4 h-4 mr-2"}),"Сохранить"]})})]})]})})}function bF({isOpen:a,onClose:c,user:e,onProfileUpdate:f}){let g=(0,a2.useAlert)(),h=(0,s.useRef)(null),[i,l]=(0,s.useState)({name:"",email:"",phone:"",login:""}),[m,n]=(0,s.useState)(null),[p,q]=(0,s.useState)(!1),[t,u]=(0,s.useState)(!1),[v,w]=(0,s.useState)(!1),[z,A]=(0,s.useState)(!1),[B,C]=(0,s.useState)(null);(0,s.useEffect)(()=>{e&&a&&(l({name:e.name||"",email:e.email||"",phone:e.phone||"",login:e.login||""}),n(e.avatar_url||null))},[e,a]);let D=(a,b)=>{l(c=>({...c,[a]:b}))},E=async a=>{w(!1),u(!0);try{let b=new FormData;b.append("avatar",a,"avatar.png");let c=await fetch("/api/auth/avatar",{method:"POST",body:b}),d=await c.json();c.ok?(n(d.avatar_url),g.success("Аватар успешно загружен","Успех")):g.error(d.error||"Ошибка при загрузке аватара","Ошибка")}catch(a){g.error("Произошла ошибка при загрузке аватара","Ошибка")}finally{u(!1),C(null)}},F=async()=>{u(!0);try{let a=await fetch("/api/auth/avatar",{method:"DELETE"});if(a.ok)n(null),g.success("Аватар успешно удален","Успех");else{let b=await a.json();g.error(b.error||"Ошибка при удалении аватара","Ошибка")}}catch(a){g.error("Произошла ошибка при удалении аватара","Ошибка")}finally{u(!1)}},G=async()=>{q(!0);try{let a=await fetch("/api/auth/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),b=await a.json();a.ok?(g.success("Профиль успешно обновлен","Успех"),f(b.user),c()):g.error(b.error||"Ошибка при обновлении профиля","Ошибка")}catch(a){g.error("Произошла ошибка при обновлении профиля","Ошибка")}finally{q(!1)}};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(r.Dialog,{open:a,onOpenChange:c,children:(0,b.jsxs)(r.DialogContent,{className:"sm:max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(r.DialogHeader,{children:[(0,b.jsx)(r.DialogTitle,{className:"text-xl text-[#2E2E2E]",children:"Редактирование профиля"}),(0,b.jsx)(r.DialogDescription,{className:"text-gray-600",children:"Измените данные вашего профиля"})]}),(0,b.jsxs)("div",{className:"space-y-6 py-4",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"w-24 h-24 aspect-square rounded-full bg-[#18A36C] flex items-center justify-center overflow-hidden border-4 border-gray-100 shadow-lg flex-shrink-0",children:m?(0,b.jsx)("img",{src:m,alt:"Avatar",className:"w-full h-full object-cover rounded-full"}):(0,b.jsx)("span",{className:"text-3xl text-white font-medium",children:(()=>{if(!i.name)return"U";let a=i.name.trim().split(" ").filter(a=>a.length>0);return a.length>=2?`${a[1][0]}${a[0][0]}`.toUpperCase():a[0]?.[0]?.toUpperCase()||"U"})()})}),t&&(0,b.jsx)("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center",children:(0,b.jsx)(aU.Loader2,{className:"w-6 h-6 text-white animate-spin"})})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{ref:h,type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",className:"hidden",onChange:a=>{let b=a.target.files?.[0];if(b){if(!["image/jpeg","image/png","image/gif","image/webp"].includes(b.type))return void g.error("Недопустимый формат файла. Разрешены: JPEG, PNG, GIF, WebP","Ошибка");if(b.size>5242880)return void g.error("Размер файла не должен превышать 5MB","Ошибка");C(b),w(!0)}h.current&&(h.current.value="")}}),(0,b.jsxs)(o.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>h.current?.click(),disabled:t,className:"border-[#18A36C] text-[#18A36C]",children:[(0,b.jsx)(a4,{className:"w-4 h-4 mr-2"}),"Загрузить фото"]}),m&&(0,b.jsx)(o.Button,{type:"button",variant:"outline",size:"sm",onClick:F,disabled:t,className:"border-red-300 text-red-600 hover:bg-red-50",children:(0,b.jsx)(a5.Trash2,{className:"w-4 h-4"})})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(y.Label,{htmlFor:"name",className:"text-gray-700 flex items-center gap-2",children:[(0,b.jsx)(d.User,{className:"w-4 h-4 text-[#18A36C]"}),"ФИО"]}),(0,b.jsx)(x.Input,{id:"name",value:i.name,onChange:a=>D("name",a.target.value),placeholder:"Иванов Иван Иванович",className:"border-gray-300"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(y.Label,{htmlFor:"login",className:"text-gray-700 flex items-center gap-2",children:[(0,b.jsx)(aP,{className:"w-4 h-4 text-[#18A36C]"}),"Логин"]}),(0,b.jsx)(x.Input,{id:"login",value:i.login,onChange:a=>D("login",a.target.value),placeholder:"Ваш логин",className:"border-gray-300"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(y.Label,{htmlFor:"email",className:"text-gray-700 flex items-center gap-2",children:[(0,b.jsx)(k.Mail,{className:"w-4 h-4 text-gray-400"}),"Email",(0,b.jsx)("span",{className:"text-xs text-gray-400",children:"(нельзя изменить)"})]}),(0,b.jsx)(x.Input,{id:"email",type:"email",value:i.email,disabled:!0,className:"border-gray-200 bg-gray-50 text-gray-500 cursor-not-allowed"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(y.Label,{htmlFor:"phone",className:"text-gray-700 flex items-center gap-2",children:[(0,b.jsx)(j.Phone,{className:"w-4 h-4 text-gray-400"}),"Телефон",(0,b.jsx)("span",{className:"text-xs text-gray-400",children:"(нельзя изменить)"})]}),(0,b.jsx)(x.Input,{id:"phone",type:"tel",value:i.phone,disabled:!0,className:"border-gray-200 bg-gray-50 text-gray-500 cursor-not-allowed"})]})]}),(0,b.jsx)("div",{className:"pt-2 border-t border-gray-200",children:(0,b.jsxs)(o.Button,{type:"button",variant:"outline",onClick:()=>A(!0),className:"w-full border-gray-300 text-gray-700 hover:bg-gray-50",children:[(0,b.jsx)(aO.Lock,{className:"w-4 h-4 mr-2"}),"Сменить пароль"]})})]}),(0,b.jsxs)(r.DialogFooter,{className:"flex flex-col sm:flex-row gap-3 sm:gap-2",children:[(0,b.jsx)(o.Button,{variant:"outline",onClick:c,className:"w-full sm:w-auto border-gray-300",children:"Отмена"}),(0,b.jsx)(o.Button,{onClick:G,disabled:p,className:"w-full sm:w-auto bg-[#18A36C] hover:bg-[#18A36C]/90 text-white",children:p?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(aU.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Сохранение..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(a6.Save,{className:"w-4 h-4 mr-2"}),"Сохранить"]})})]})]})}),(0,b.jsx)(bE,{isOpen:v,onClose:()=>{w(!1),C(null)},onSave:E,imageFile:B}),(0,b.jsx)(a3,{isOpen:z,onClose:()=>A(!1)})]})}var bG=a.i(62036),bH=a.i(8406),bI=a.i(33508);function bJ(a){if(!a)return!1;let b=new Date(a),c=new Date;return c.setMonth(c.getMonth()-1),b>c}function bK({isOpen:a,onClose:d,material:e}){let f=!!e&&bJ(e.dateRaw);return(0,b.jsx)(bG.AnimatePresence,{children:a&&e&&(0,b.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,b.jsx)(c.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:d,className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),(0,b.jsxs)(c.motion.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.2,ease:"easeOut"},className:"relative w-full max-w-2xl max-h-[90vh] overflow-y-auto bg-white rounded-2xl shadow-2xl",children:[(0,b.jsx)("button",{onClick:d,className:"absolute top-6 right-6 w-12 h-12 flex items-center justify-center rounded-xl bg-gray-100 hover:bg-gray-200 text-gray-600 hover:text-gray-800 transition-all duration-200 hover:scale-110 z-10",children:(0,b.jsx)(bI.X,{className:"w-6 h-6"})}),(0,b.jsx)("div",{className:"bg-gradient-to-r from-[#18A36C]/5 via-[#18A36C]/10 to-[#18A36C]/5 p-8 border-b border-gray-100",children:(0,b.jsx)("div",{className:"flex items-start gap-3",children:(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-[#2E2E2E] mb-2",children:e.title}),f&&(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsxs)("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 bg-gradient-to-r from-[#18A36C] to-[#15905f] text-white text-xs font-medium rounded-full",children:[(0,b.jsx)(bH.Sparkles,{className:"w-3 h-3"}),"Новое"]})})]})})}),(0,b.jsxs)("div",{className:"p-8 space-y-6",children:[(0,b.jsx)(c.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"relative h-64 rounded-xl overflow-hidden shadow-md",children:(0,b.jsx)(a$.ImageWithFallback,{src:e.image,alt:e.title,className:"w-full h-full object-cover"})}),(0,b.jsxs)(c.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15},children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-[#2E2E2E] mb-3 flex items-center gap-2",children:[(0,b.jsx)("span",{className:"w-1 h-6 bg-gradient-to-b from-[#18A36C] to-[#15905f] rounded-full"}),"О материале"]}),(0,b.jsx)("p",{className:"text-gray-700 leading-relaxed",children:e.content})]}),e.detailed_content&&(0,b.jsxs)(c.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-gradient-to-br from-gray-50 to-white p-6 rounded-xl border border-gray-100",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-[#2E2E2E] mb-3 flex items-center gap-2",children:[(0,b.jsx)("span",{className:"w-1 h-6 bg-gradient-to-b from-[#18A36C] to-[#15905f] rounded-full"}),"Подробная информация"]}),(0,b.jsx)("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:e.detailed_content})]}),(0,b.jsxs)(c.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.25},children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-[#2E2E2E] mb-3 flex items-center gap-2",children:[(0,b.jsx)("span",{className:"w-1 h-6 bg-gradient-to-b from-[#18A36C] to-[#15905f] rounded-full"}),"Дополнительно"]}),(0,b.jsx)("div",{className:"space-y-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-3 text-gray-700 bg-gradient-to-br from-[#18A36C]/5 to-transparent p-4 rounded-xl border border-[#18A36C]/10",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-[#18A36C] to-[#15905f] rounded-xl flex items-center justify-center shadow-md",children:(0,b.jsx)(aL,{className:"w-6 h-6 text-white"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Дата публикации"}),(0,b.jsx)("div",{className:"font-semibold text-[#2E2E2E]",children:e.date})]})]})})]})]})]})]})})}var bL=a.i(67974),bM=a.i(48701);function bN({className:a=""}){return(0,b.jsx)("div",{className:`animate-pulse bg-gray-200 rounded ${a}`})}function bO(){return(0,b.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-8 lg:p-12 mb-12",children:(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row items-center gap-8",children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row items-center lg:items-start gap-6",children:[(0,b.jsx)(bN,{className:"w-20 h-20 lg:w-24 lg:h-24 rounded-full"}),(0,b.jsxs)("div",{className:"text-center lg:text-left flex-1",children:[(0,b.jsx)(bN,{className:"h-10 w-64 mb-4 mx-auto lg:mx-0"}),(0,b.jsx)(bN,{className:"h-5 w-48 mx-auto lg:mx-0"})]})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200 w-24 h-24",children:[(0,b.jsx)(bN,{className:"h-8 w-8 mx-auto mb-2"}),(0,b.jsx)(bN,{className:"h-4 w-16 mx-auto"})]}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200 w-24 h-24",children:[(0,b.jsx)(bN,{className:"h-8 w-8 mx-auto mb-2"}),(0,b.jsx)(bN,{className:"h-4 w-16 mx-auto"})]})]})]})})}function bP(){return(0,b.jsxs)(w.Card,{className:"border border-gray-200 mb-12",children:[(0,b.jsx)(w.CardHeader,{className:"border-b border-gray-200 bg-gray-50",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(bN,{className:"w-12 h-12 rounded-lg"}),(0,b.jsxs)("div",{children:[(0,b.jsx)(bN,{className:"h-6 w-40 mb-2"}),(0,b.jsx)(bN,{className:"h-4 w-56"})]})]}),(0,b.jsx)(bN,{className:"h-10 w-40 rounded-md"})]})}),(0,b.jsx)(w.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[[1,2,3,4].map(a=>(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(bN,{className:"h-4 w-20"}),(0,b.jsx)(bN,{className:"h-12 w-full rounded-lg"})]},a)),(0,b.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,b.jsx)(bN,{className:"h-4 w-24"}),(0,b.jsx)(bN,{className:"h-12 w-full rounded-lg"})]})]})})]})}function bQ(){return(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:[1,2,3].map(a=>(0,b.jsx)(w.Card,{className:"border border-gray-200",children:(0,b.jsxs)(w.CardContent,{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,b.jsx)(bN,{className:"w-14 h-14 rounded-lg"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)(bN,{className:"h-5 w-24 mb-2"}),(0,b.jsx)(bN,{className:"h-4 w-32"})]})]}),(0,b.jsx)(bN,{className:"h-4 w-36"})]})},a))})}function bR(){return(0,b.jsxs)(w.Card,{className:"border border-gray-200",children:[(0,b.jsx)(bN,{className:"w-full h-48 rounded-t-lg rounded-b-none"}),(0,b.jsxs)(w.CardContent,{className:"p-4",children:[(0,b.jsx)(bN,{className:"h-6 w-full mb-2"}),(0,b.jsx)(bN,{className:"h-4 w-full mb-1"}),(0,b.jsx)(bN,{className:"h-4 w-3/4 mb-3"}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(bN,{className:"h-4 w-24"}),(0,b.jsx)(bN,{className:"h-8 w-28 rounded-md"})]})]})]})}function bS(){return(0,b.jsxs)("div",{className:"mb-12",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)(bN,{className:"h-8 w-48"}),(0,b.jsx)(bN,{className:"h-10 w-32 rounded-md"})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(a=>(0,b.jsx)(bR,{},a))})]})}function bT(){return(0,b.jsx)(w.Card,{className:"border border-gray-200",children:(0,b.jsx)(w.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row items-center justify-between gap-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(bN,{className:"w-16 h-16 rounded-full"}),(0,b.jsxs)("div",{children:[(0,b.jsx)(bN,{className:"h-6 w-40 mb-2"}),(0,b.jsx)(bN,{className:"h-4 w-48 mb-1"}),(0,b.jsx)(bN,{className:"h-4 w-32"})]})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,b.jsx)(bN,{className:"h-10 w-44 rounded-md"}),(0,b.jsx)(bN,{className:"h-10 w-36 rounded-md"}),(0,b.jsx)(bN,{className:"h-10 w-24 rounded-md"})]})]})})})}function bU(){return(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 lg:px-8 py-8",children:[(0,b.jsx)(bO,{}),(0,b.jsx)(bP,{}),(0,b.jsx)(bQ,{}),(0,b.jsx)(bS,{}),(0,b.jsx)(bT,{})]})}function bV(){return(0,b.jsxs)("div",{className:"p-4 lg:p-8 max-w-7xl mx-auto space-y-6",children:[(0,b.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,b.jsx)(bN,{className:"w-12 h-12 rounded-lg"}),(0,b.jsxs)("div",{children:[(0,b.jsx)(bN,{className:"h-6 w-32 mb-2"}),(0,b.jsx)(bN,{className:"h-4 w-56"})]})]})}),(0,b.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,b.jsx)(bN,{className:"h-4 w-16"}),(0,b.jsx)(bN,{className:"h-10 w-48 rounded-md"})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(a=>(0,b.jsx)(bR,{},a))})]})}function bW(){return(0,b.jsxs)("div",{className:"p-4 lg:p-8 max-w-7xl mx-auto space-y-6",children:[(0,b.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,b.jsx)(bN,{className:"w-12 h-12 rounded-lg"}),(0,b.jsxs)("div",{children:[(0,b.jsx)(bN,{className:"h-6 w-44 mb-2"}),(0,b.jsx)(bN,{className:"h-4 w-48"})]})]})}),(0,b.jsx)(w.Card,{className:"border border-gray-200",children:(0,b.jsxs)(w.CardContent,{className:"p-6 space-y-6",children:[(0,b.jsx)(bN,{className:"h-16 w-full rounded-lg"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(bN,{className:"h-4 w-24"}),(0,b.jsx)(bN,{className:"h-10 w-full rounded-md"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(bN,{className:"h-4 w-16"}),(0,b.jsx)(bN,{className:"h-10 w-full rounded-md"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(bN,{className:"h-4 w-24"}),(0,b.jsx)(bN,{className:"h-32 w-full rounded-md"})]})]}),(0,b.jsx)(bN,{className:"h-10 w-32 rounded-md"})]})})]})}function bX(){let{navigate:c,currentRoute:e}=(0,a_.useRouter)(),{data:g,status:h}=(0,t.useSession)(),n=(0,a2.useAlert)(),[p,q]=(0,s.useState)(null),[u,v]=(0,s.useState)(!0),[z,A]=(0,s.useState)(!1),[B,C]=(0,s.useState)(!1),[D,E]=(0,s.useState)(!1),[F,G]=(0,s.useState)(!1),[H,I]=(0,s.useState)(null),[J,K]=(0,s.useState)([]),[L,M]=(0,s.useState)(0),[N,O]=(0,s.useState)(!1),P=e.replace(/^\/+|\/+$/g,"").split("/"),Q="";"account"===P[0]&&(Q=P[1]||"");let[R,S]=(0,s.useState)(Q&&["materials","contact"].includes(Q)?Q:""),[T,U]=(0,s.useState)(aX),{currentPage:V,setPage:W}=(0,bM.useUrlPagination)(6),[X,Y]=(0,s.useState)(aZ),[Z,$]=(0,s.useState)("idle"),[_,aa]=(0,s.useState)([]),[ab,ac]=(0,s.useState)(!1),[ad,ae]=(0,s.useState)(!1),[af,ag]=(0,s.useState)(null),[ah,ai]=(0,s.useState)({}),[aj,ak]=(0,s.useState)(""),[al,am]=(0,s.useState)(!1),an=(a,b)=>{if("subject"===a||X.subject,"content"===a||X.message,"subject"===a){if(!b||b.trim().length<3)return ai(a=>({...a,subject:"Тема должна содержать минимум 3 символа"})),!1;else if(b.length>200)return ai(a=>({...a,subject:"Тема не должна превышать 200 символов"})),!1}else if("content"===a){if(!b||b.trim().length<10)return ai(a=>({...a,content:"Сообщение должно содержать минимум 10 символов"})),!1;else if(b.length>5e3)return ai(a=>({...a,content:"Сообщение не должно превышать 5000 символов"})),!1}return ai(b=>{let c={...b};return delete c[a],c}),!0},ao=async()=>{ac(!0);try{let a=await fetch("/api/letters");if(a.ok){let b=await a.json();aa(b)}}catch(a){}finally{ac(!1)}};(0,s.useEffect)(()=>{"contact"===R&&g&&ao()},[R,g]);let ap=async b=>{try{await fetch(`/api/letters/${b}`,{method:"PATCH"}),aa(a=>a.map(a=>a.id===b?{...a,is_reply_read:!0}:a));let{clearLetterNotification:c}=await a.A(95454);c(b)}catch(a){}},aq=async a=>{if(!aj.trim()||aj.trim().length<10)return void n.error("Сообщение должно содержать минимум 10 символов","Ошибка");am(!0);try{let b=await fetch(`/api/letters/${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:aj})});if(b.ok)n.success("Сообщение отправлено","Успех"),ak(""),await ao();else{let a=await b.json();n.error(a.error||"Ошибка при отправке сообщения","Ошибка")}}catch(a){n.error("Ошибка при отправке сообщения","Ошибка")}finally{am(!1)}};(0,s.useEffect)(()=>{p?.email&&U(a=>({...a,email:p.email}))},[p]),(0,s.useEffect)(()=>{(async()=>{O(!0);try{let a=new URLSearchParams({page:V.toString(),limit:"6"}),b=await fetch(`/api/materials?${a}`);if(b.ok){let a=await b.json();K(a.materials),M(a.pagination?.total||0),window.scrollTo({top:0,behavior:"smooth"})}else n.error("Не удалось загрузить материалы","Ошибка загрузки")}catch(a){n.error("Произошла ошибка при загрузке материалов","Ошибка")}finally{O(!1)}})()},[V,n]),(0,s.useEffect)(()=>{Q&&["materials","contact"].includes(Q)?S(Q):S("")},[Q]),(0,s.useEffect)(()=>{"authenticated"===h&&g?ar():"unauthenticated"===h&&v(!1)},[h,g]);let ar=async()=>{try{let a=await fetch("/api/auth/me");if(a.ok){let b=await a.json();q(b.user)}}catch(a){}finally{v(!1)}},as=(()=>{if(p?.name&&p.name.trim()){let a=p.name.trim().split(" ").filter(a=>a.length>0),b=a[0]||"";return{firstName:a[1]||""||b,lastName:b,middleName:a[2]||"",fullName:p.name,name:p.name,email:p.email||"",avatarUrl:p.avatar_url||null}}if(p){let a=p.login||p.email||"Пользователь";return{firstName:a,lastName:"",middleName:"",fullName:a,name:a,email:p.email||"",avatarUrl:p.avatar_url||null}}return{firstName:"",lastName:"",middleName:"",fullName:"",name:"",email:"",avatarUrl:null}})(),at=()=>as.firstName&&as.lastName?`${as.firstName[0]}${as.lastName[0]}`.toUpperCase():as.firstName?as.firstName[0].toUpperCase():as.lastName?as.lastName[0].toUpperCase():"U",au=a=>{I(a),G(!0)},av=async()=>{A(!1),await (0,t.signOut)({callbackUrl:"/",redirect:!0})},aw=async()=>{ae(!0);try{let a=await fetch("/api/letters",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subject:X.subject,content:X.message})});if(a.ok)$("success"),Y({name:"",subject:"",message:""}),await ao(),n.success("Письмо успешно отправлено главному врачу","Отправлено"),setTimeout(()=>$("idle"),3e3);else{let b=await a.json();n.error(b.error||"Ошибка при отправке письма","Ошибка"),$("error")}}catch(a){n.error("Произошла ошибка при отправке письма","Ошибка"),$("error")}finally{ae(!1)}};return u?"materials"===R?(0,b.jsx)(bV,{}):"contact"===R?(0,b.jsx)(bW,{}):(0,b.jsx)(bU,{}):"materials"===R?(0,b.jsxs)("div",{className:"p-3 sm:p-4 lg:p-8 max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[(0,b.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sm:p-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-[#18A36C] rounded-lg flex items-center justify-center flex-shrink-0",children:(0,b.jsx)(f.FileText,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg sm:text-xl text-gray-800",children:"Материалы"}),(0,b.jsx)("p",{className:"text-sm sm:text-base text-gray-600",children:"Полезные материалы и информация для пациентов"})]})]})}),N?(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:Array.from({length:6}).map((a,c)=>(0,b.jsxs)(w.Card,{className:"border border-gray-200",children:[(0,b.jsx)("div",{className:"w-full h-40 sm:h-48 bg-gray-200 animate-pulse rounded-t-lg"}),(0,b.jsxs)(w.CardContent,{className:"p-4 sm:p-6",children:[(0,b.jsx)("div",{className:"h-5 sm:h-6 bg-gray-200 rounded animate-pulse mb-2 w-3/4"}),(0,b.jsxs)("div",{className:"space-y-2 mb-3 sm:mb-4",children:[(0,b.jsx)("div",{className:"h-3 sm:h-4 bg-gray-200 rounded animate-pulse w-full"}),(0,b.jsx)("div",{className:"h-3 sm:h-4 bg-gray-200 rounded animate-pulse w-5/6"}),(0,b.jsx)("div",{className:"h-3 sm:h-4 bg-gray-200 rounded animate-pulse w-4/6"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-24"}),(0,b.jsx)("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-24"})]})]})]},c))}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:J.map(a=>(0,b.jsxs)(w.Card,{className:"group hover:shadow-lg transition-all duration-300 border border-gray-200",children:[(0,b.jsxs)("div",{className:"relative overflow-hidden rounded-t-lg",children:[(0,b.jsx)(a$.ImageWithFallback,{src:a.image,alt:a.title,className:"w-full h-40 sm:h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),bJ(a.dateRaw)&&(0,b.jsx)("div",{className:"absolute top-2 sm:top-4 left-2 sm:left-4 flex flex-wrap gap-1 sm:gap-2",children:(0,b.jsx)(aK.Badge,{className:"bg-orange-500 text-white text-xs",children:"Новое"})})]}),(0,b.jsxs)(w.CardContent,{className:"p-4 sm:p-6",children:[(0,b.jsx)("h3",{className:"text-base sm:text-lg text-gray-800 mb-2 group-hover:text-[#18A36C] transition-colors",children:a.title}),(0,b.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mb-3 sm:mb-4 line-clamp-3",children:a.content}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 text-xs sm:text-sm text-gray-500",children:[(0,b.jsx)(aL,{className:"w-3 h-3 sm:w-4 sm:h-4"}),(0,b.jsx)("span",{children:a.date})]}),(0,b.jsxs)(o.Button,{variant:"ghost",size:"sm",onClick:()=>au(a),className:"text-[#18A36C] hover:text-[#18A36C]/80 hover:bg-[#18A36C]/10 text-xs sm:text-sm px-2 sm:px-3",children:[(0,b.jsx)(aR.Eye,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),"Подробнее"]})]})]})]},a.id))}),L>6&&(0,b.jsx)(bL.Pagination,{currentPage:V,totalPages:Math.ceil(L/6),onPageChange:W,className:"mt-8"})]}),!N&&0===J.length&&(0,b.jsxs)("div",{className:"text-center py-8 sm:py-12",children:[(0,b.jsx)(f.FileText,{className:"w-12 h-12 sm:w-16 sm:h-16 text-gray-300 mx-auto mb-3 sm:mb-4"}),(0,b.jsx)("h3",{className:"text-base sm:text-lg text-gray-800 mb-2",children:"Материалы не найдены"}),(0,b.jsx)("p",{className:"text-sm sm:text-base text-gray-600",children:"В выбранном периоде нет доступных материалов"})]}),(0,b.jsx)(bK,{isOpen:F,onClose:()=>{G(!1),I(null)},material:H})]}):"contact"===R?(0,b.jsxs)("div",{className:"p-3 sm:p-4 lg:p-8 max-w-7xl mx-auto space-y-4 sm:space-y-6",children:[(0,b.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sm:p-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-[#18A36C] rounded-lg flex items-center justify-center flex-shrink-0",children:(0,b.jsx)(aM.MessageSquare,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg sm:text-xl text-gray-800",children:"Написать глав.врачу"}),(0,b.jsx)("p",{className:"text-sm sm:text-base text-gray-600",children:"Свяжитесь с руководством клиники"})]})]})}),p?.is_messages_blocked&&(0,b.jsx)(w.Card,{className:"border border-red-200 bg-red-50",children:(0,b.jsx)(w.CardContent,{className:"p-4 sm:p-6",children:(0,b.jsxs)("div",{className:"flex items-start sm:items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:(0,b.jsx)(aW.Ban,{className:"w-5 h-5 sm:w-6 sm:h-6 text-red-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-red-800 font-medium text-sm sm:text-base",children:"Отправка сообщений заблокирована"}),(0,b.jsx)("p",{className:"text-red-600 text-xs sm:text-sm",children:"Вы не можете отправлять письма главному врачу. Если вы считаете, что это ошибка, обратитесь в клинику по телефону."})]})]})})}),!p?.is_messages_blocked&&(0,b.jsx)(w.Card,{className:"border border-gray-200",children:(0,b.jsxs)(w.CardContent,{className:"p-6 space-y-6",children:[(0,b.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,b.jsx)("p",{className:"text-sm text-gray-600",children:aY})}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(y.Label,{htmlFor:"subject",className:"text-gray-700",children:["Тема письма ",(0,b.jsx)("span",{className:"text-gray-400 text-xs",children:"(мин. 3 символа)"})]}),(0,b.jsx)(x.Input,{id:"subject",type:"text",placeholder:"Тема сообщения",value:X.subject,onChange:a=>Y({...X,subject:a.target.value}),onBlur:()=>an("subject",X.subject),className:`border-gray-300 ${ah.subject?"border-red-500":""}`}),ah.subject&&(0,b.jsx)("p",{className:"text-red-500 text-xs",children:ah.subject})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(y.Label,{htmlFor:"message",className:"text-gray-700",children:["Сообщение ",(0,b.jsx)("span",{className:"text-gray-400 text-xs",children:"(мин. 10 символов)"})]}),(0,b.jsx)(aJ,{id:"message",placeholder:"Ваше сообщение главному врачу...",rows:6,value:X.message,onChange:a=>Y({...X,message:a.target.value}),onBlur:()=>an("content",X.message),className:`border-gray-200 focus:border-[#18A36C] focus:ring-[#18A36C] focus:border-1${ah.content?"border-red-500":""}`}),ah.content&&(0,b.jsx)("p",{className:"text-red-500 text-xs",children:ah.content}),(0,b.jsxs)("p",{className:"text-xs text-gray-400 text-right",children:[X.message.length,"/5000"]})]})]}),(0,b.jsx)(o.Button,{onClick:aw,className:"bg-[#18A36C] hover:bg-[#18A36C]/90 text-white cursor-pointer",disabled:ad||!X.subject||!X.message||X.subject.trim().length<3||X.message.trim().length<10||Object.keys(ah).length>0,children:ad?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(aU.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Отправка..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(aT.Send,{className:"w-4 h-4 mr-2"}),"Отправить письмо"]})}),"success"===Z&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-green-600 bg-green-50 p-3 rounded-lg",children:[(0,b.jsx)(m.CheckCircle,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"text-sm",children:"Письмо успешно отправлено!"})]})]})}),(0,b.jsxs)("div",{className:"space-y-3 sm:space-y-4",children:[(0,b.jsxs)("h3",{className:"text-base sm:text-lg text-gray-800 font-medium flex flex-wrap items-center gap-2",children:[(0,b.jsx)(k.Mail,{className:"w-4 h-4 sm:w-5 sm:h-5 text-[#18A36C]"}),"Мои письма",_.filter(a=>a.reply&&!a.is_reply_read).length>0&&(0,b.jsxs)("span",{className:"px-2 py-0.5 bg-red-500 text-white text-xs rounded-full",children:[_.filter(a=>a.reply&&!a.is_reply_read).length," новых"]})]}),ab?(0,b.jsxs)("div",{className:"text-center py-6 sm:py-8",children:[(0,b.jsx)(aU.Loader2,{className:"w-6 h-6 sm:w-8 sm:h-8 animate-spin text-[#18A36C] mx-auto"}),(0,b.jsx)("p",{className:"text-gray-600 mt-2 text-sm sm:text-base",children:"Загрузка писем..."})]}):0===_.length?(0,b.jsx)(w.Card,{className:"border border-gray-200",children:(0,b.jsxs)(w.CardContent,{className:"p-6 sm:p-8 text-center",children:[(0,b.jsx)(k.Mail,{className:"w-10 h-10 sm:w-12 sm:h-12 text-gray-300 mx-auto mb-3"}),(0,b.jsx)("p",{className:"text-gray-500 text-sm sm:text-base",children:"У вас пока нет отправленных писем"})]})}):(0,b.jsx)("div",{className:"space-y-2 sm:space-y-3",children:_.map(a=>(0,b.jsx)(w.Card,{className:`border transition-all duration-200 ${a.reply&&!a.is_reply_read?"border-[#18A36C] bg-[#18A36C]/5":"border-gray-200"}`,children:(0,b.jsxs)(w.CardContent,{className:"p-3 sm:p-4",children:[(0,b.jsxs)("div",{className:"flex items-start sm:items-center justify-between cursor-pointer gap-2",onClick:()=>{af===a.id?ag(null):(ag(a.id),a.reply&&!a.is_reply_read&&ap(a.id))},children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-1 sm:gap-2 mb-1",children:[(0,b.jsx)("h4",{className:"font-medium text-gray-800 text-sm sm:text-base truncate max-w-[150px] sm:max-w-none",children:a.subject}),a.reply?(0,b.jsx)(aK.Badge,{className:"bg-[#18A36C] text-white text-xs",children:"Ответ"}):(0,b.jsxs)(aK.Badge,{className:"bg-amber-500 text-white text-xs flex items-center gap-1",children:[(0,b.jsx)(l.Clock,{className:"w-3 h-3"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Ожидает"})]}),a.reply&&!a.is_reply_read&&(0,b.jsx)("span",{className:"w-2 h-2 bg-red-500 rounded-full flex-shrink-0"})]}),(0,b.jsx)("p",{className:"text-xs sm:text-sm text-gray-500",children:new Date(a.created_at).toLocaleDateString("ru-RU",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,b.jsx)(o.Button,{variant:"ghost",size:"sm",className:"p-1 sm:p-2 flex-shrink-0",children:af===a.id?(0,b.jsx)(aH,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-400"}):(0,b.jsx)(aV.ChevronDown,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-400"})})]}),af===a.id&&(0,b.jsxs)("div",{className:"mt-3 sm:mt-4 pt-3 sm:pt-4 border-t border-gray-100 space-y-3 sm:space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500 mb-1 sm:mb-2 font-medium",children:"Ваше письмо:"}),(0,b.jsx)("div",{className:"bg-gray-50 rounded-lg p-2 sm:p-3",children:(0,b.jsx)("p",{className:"text-xs sm:text-sm text-gray-700 whitespace-pre-wrap",children:a.content})}),(0,b.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:new Date(a.created_at).toLocaleDateString("ru-RU",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})})]}),a.reply&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-xs text-[#18A36C] mb-1 sm:mb-2 font-medium flex items-center gap-1",children:[(0,b.jsx)(m.CheckCircle,{className:"w-3 h-3"}),"Ответ главного врача"]}),(0,b.jsx)("div",{className:"bg-[#18A36C]/10 rounded-lg p-2 sm:p-3 border border-[#18A36C]/20",children:(0,b.jsx)("p",{className:"text-xs sm:text-sm text-gray-700 whitespace-pre-wrap",children:a.reply})}),(0,b.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:a.replied_at&&new Date(a.replied_at).toLocaleDateString("ru-RU",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})})]}),a.messages&&a.messages.map(a=>(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:`text-xs mb-1 sm:mb-2 font-medium flex items-center gap-1 ${"chief_doctor"===a.sender_type?"text-[#18A36C]":"text-gray-500"}`,children:"chief_doctor"===a.sender_type?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.CheckCircle,{className:"w-3 h-3"}),"Ответ главного врача"]}):"Ваше сообщение"}),(0,b.jsx)("div",{className:`rounded-lg p-2 sm:p-3 ${"chief_doctor"===a.sender_type?"bg-[#18A36C]/10 border border-[#18A36C]/20":"bg-gray-50"}`,children:(0,b.jsx)("p",{className:"text-xs sm:text-sm text-gray-700 whitespace-pre-wrap",children:a.content})}),(0,b.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:new Date(a.created_at).toLocaleDateString("ru-RU",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})})]},a.id)),a.reply&&!p?.is_messages_blocked&&(0,b.jsxs)("div",{className:"pt-3 sm:pt-4 border-t border-gray-200",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500 mb-1 sm:mb-2 font-medium",children:"Продолжить переписку:"}),(0,b.jsx)(aJ,{value:aj,onChange:a=>ak(a.target.value),placeholder:"Напишите ваш ответ...",className:"min-h-[70px] sm:min-h-[80px] text-xs sm:text-sm border-gray-200 focus:border-[#18A36C] focus:ring-[#18A36C] focus:border-1"}),(0,b.jsx)("div",{className:"flex justify-end mt-2",children:(0,b.jsx)(o.Button,{onClick:()=>aq(a.id),disabled:al||!aj.trim(),className:"bg-[#18A36C] hover:bg-[#18A36C]/90 text-white w-full sm:w-auto text-sm",children:al?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(aU.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Отправка..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(aT.Send,{className:"w-4 h-4 mr-2"}),"Отправить"]})})})]}),a.reply&&p?.is_messages_blocked&&(0,b.jsx)("div",{className:"pt-3 sm:pt-4 border-t border-gray-200",children:(0,b.jsxs)("div",{className:"flex items-center gap-2 text-red-600 bg-red-50 p-2 sm:p-3 rounded-lg",children:[(0,b.jsx)(aW.Ban,{className:"w-4 h-4 flex-shrink-0"}),(0,b.jsx)("span",{className:"text-xs sm:text-sm",children:"Отправка сообщений заблокирована"})]})})]})]})},a.id))})]})]}):(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-8 py-4 sm:py-8",children:[(0,b.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sm:p-8 lg:p-12 mb-6 sm:mb-12",children:(0,b.jsx)("div",{className:"text-center lg:text-left",children:(0,b.jsx)("div",{className:"flex flex-col lg:flex-row items-center gap-8",children:(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row items-center lg:items-start gap-6",children:[(0,b.jsx)("div",{className:"w-20 h-20 lg:w-24 lg:h-24 aspect-square bg-[#18A36C] rounded-full flex items-center justify-center overflow-hidden border-4 border-gray-100 shadow-lg flex-shrink-0",children:as.avatarUrl?(0,b.jsx)("img",{src:as.avatarUrl,alt:"Avatar",className:"w-full h-full object-cover rounded-full"}):(0,b.jsx)("span",{className:"text-3xl text-white font-medium",children:at()})}),(0,b.jsxs)("div",{className:"text-center lg:text-left",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-center lg:justify-start gap-2 sm:gap-3 mb-2",children:[(0,b.jsxs)("h1",{className:"text-xl sm:text-2xl lg:text-4xl text-gray-800",children:["Добро пожаловать, ",as.firstName||"Пользователь","!"]}),p?.role==="ADMIN"&&(0,b.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 sm:px-3 py-1 bg-[#18A36C] text-white text-xs sm:text-sm rounded-full",children:[(0,b.jsx)(aS.Shield,{className:"w-3 h-3 sm:w-4 sm:h-4"}),"Админ"]})]}),(0,b.jsx)("p",{className:"text-gray-600 text-sm sm:text-base lg:text-lg",children:"Ваш персональный медицинский помощник"})]})]})})})})}),(0,b.jsx)("div",{className:"mb-12",children:(0,b.jsxs)(w.Card,{className:"border border-gray-200",children:[(0,b.jsx)(w.CardHeader,{className:"border-b border-gray-200 bg-gray-50 p-4 sm:p-6",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-[#18A36C] rounded-lg flex items-center justify-center flex-shrink-0",children:(0,b.jsx)(d.User,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(w.CardTitle,{className:"text-lg sm:text-xl text-gray-800",children:"Информация профиля"}),(0,b.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mt-1 hidden sm:block",children:"Ваши личные данные и настройки безопасности"})]})]}),(0,b.jsxs)(o.Button,{onClick:()=>E(!0),variant:"outline",size:"sm",className:"border-[#18A36C] text-[#18A36C] w-full sm:w-auto hover:shadow-lg hover:shadow-[#18A36C]/20",children:[(0,b.jsx)(aQ,{className:"w-4 h-4 mr-2"}),"Редактировать"]})]})}),(0,b.jsx)(w.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(y.Label,{className:"text-gray-600 text-sm flex items-center gap-2",children:[(0,b.jsx)(aP,{className:"w-4 h-4 text-[#18A36C]"}),"Логин"]}),(0,b.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:(0,b.jsx)("p",{className:"text-gray-800 font-medium",children:p?.login||"Не указан"})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(y.Label,{className:"text-gray-600 text-sm flex items-center gap-2",children:[(0,b.jsx)(k.Mail,{className:"w-4 h-4 text-[#18A36C]"}),"Email"]}),(0,b.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:(0,b.jsx)("p",{className:"text-gray-800 font-medium",children:p?.email||"Не указан"})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(y.Label,{className:"text-gray-600 text-sm flex items-center gap-2",children:[(0,b.jsx)(j.Phone,{className:"w-4 h-4 text-[#18A36C]"}),"Телефон"]}),(0,b.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:(0,b.jsx)("p",{className:"text-gray-800 font-medium",children:p?.phone||"Не указан"})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(y.Label,{className:"text-gray-600 text-sm flex items-center gap-2",children:[(0,b.jsx)(aL,{className:"w-4 h-4 text-[#18A36C]"}),"Дата регистрации"]}),(0,b.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:(0,b.jsx)("p",{className:"text-gray-800 font-medium",children:p?.registration_date?new Date(p.registration_date).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric"}):"Не указана"})})]}),(0,b.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,b.jsxs)(y.Label,{className:"text-gray-600 text-sm flex items-center gap-2",children:[(0,b.jsx)(d.User,{className:"w-4 h-4 text-[#18A36C]"}),"Полное имя"]}),(0,b.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:(0,b.jsx)("p",{className:"text-gray-800 font-medium",children:p?.name||"Не указано"})})]})]})})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6 mb-8 sm:mb-12",children:[(0,b.jsx)(w.Card,{className:"group cursor-pointer hover:shadow-xl transition-all duration-300 border border-gray-200 hover:border-[#18A36C]",onClick:()=>c("/account/materials"),children:(0,b.jsxs)(w.CardContent,{className:"p-4 sm:p-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4 mb-3 sm:mb-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 sm:w-14 sm:h-14 bg-[#18A36C] rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform duration-300 flex-shrink-0",children:(0,b.jsx)(f.FileText,{className:"w-6 h-6 sm:w-7 sm:h-7 text-white"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-base sm:text-lg text-gray-800 mb-0.5 sm:mb-1",children:"Материалы"}),(0,b.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:"Специальные предложения"})]})]}),(0,b.jsxs)("div",{className:"flex items-center text-xs sm:text-sm text-[#18A36C]",children:[(0,b.jsx)("span",{children:"Просмотреть материалы"}),(0,b.jsx)(aN.ChevronRight,{className:"w-4 h-4 ml-[2.5px] group-hover:translate-x-1 transition-transform"})]})]})}),(0,b.jsx)(w.Card,{className:"group cursor-pointer hover:shadow-xl transition-all duration-300 border border-gray-200 hover:border-[#18A36C]",onClick:()=>c("/account/contact"),children:(0,b.jsxs)(w.CardContent,{className:"p-4 sm:p-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4 mb-3 sm:mb-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 sm:w-14 sm:h-14 bg-[#18A36C] rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform duration-300 flex-shrink-0",children:(0,b.jsx)(aM.MessageSquare,{className:"w-6 h-6 sm:w-7 sm:h-7 text-white"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-base sm:text-lg text-gray-800 mb-0.5 sm:mb-1",children:"Связь с врачом"}),(0,b.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:"Написать главврачу"})]})]}),(0,b.jsxs)("div",{className:"flex items-center text-xs sm:text-sm text-[#18A36C]",children:[(0,b.jsx)("span",{children:"Отправить сообщение"}),(0,b.jsx)(aN.ChevronRight,{className:"w-4 h-4 ml-[2.5px] group-hover:translate-x-1 transition-transform"})]})]})})]}),(0,b.jsxs)("div",{className:"mb-8 sm:mb-12",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-4 sm:mb-6",children:[(0,b.jsx)("h2",{className:"text-lg sm:text-xl lg:text-2xl text-gray-800",children:"Последние материалы"}),(0,b.jsxs)(o.Button,{variant:"outline",onClick:()=>c("/account/materials"),className:"text-[#18A36C] border-[#18A36C] hover:bg-[#18A36C] hover:text-white w-full sm:w-auto hover:shadow-lg hover:shadow-[#18A36C]/20",children:["Смотреть все",(0,b.jsx)(aN.ChevronRight,{className:"w-4 h-4 ml-[2.5px]"})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:J.slice(0,3).map(a=>(0,b.jsxs)(w.Card,{className:"group hover:shadow-lg transition-all duration-300 border border-gray-200",children:[(0,b.jsxs)("div",{className:"relative overflow-hidden rounded-t-lg",children:[(0,b.jsx)(a$.ImageWithFallback,{src:a.image,alt:a.title,className:"w-full h-40 sm:h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),(0,b.jsx)("div",{className:"absolute top-2 sm:top-4 left-2 sm:left-4 flex gap-1 sm:gap-2",children:bJ(a.dateRaw)&&(0,b.jsx)(aK.Badge,{className:"bg-orange-500 text-white text-xs",children:"Новое"})})]}),(0,b.jsxs)(w.CardContent,{className:"p-3 sm:p-4",children:[(0,b.jsx)("h3",{className:"text-base sm:text-lg text-gray-800 mb-2 group-hover:text-[#18A36C] transition-colors line-clamp-2",children:a.title}),(0,b.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 mb-2 sm:mb-3 line-clamp-2",children:a.content}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 text-xs text-gray-500",children:[(0,b.jsx)(aL,{className:"w-3 h-3"}),(0,b.jsx)("span",{children:a.date})]}),(0,b.jsxs)(o.Button,{variant:"ghost",size:"sm",onClick:()=>au(a),className:"text-[#18A36C] hover:text-[#18A36C]/80 hover:bg-[#18A36C]/10 p-1 sm:p-2 text-xs sm:text-sm",children:[(0,b.jsx)(aR.Eye,{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1"}),"Подробнее"]})]})]})]},a.id))})]}),(0,b.jsx)(w.Card,{className:"border border-gray-200",children:(0,b.jsx)(w.CardContent,{className:"p-4 sm:p-6",children:(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row items-center justify-between gap-4 sm:gap-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row items-center gap-3 sm:gap-4 text-center sm:text-left w-full lg:w-auto",children:[(0,b.jsx)("div",{className:"w-14 h-14 sm:w-16 sm:h-16 aspect-square bg-[#18A36C] rounded-full flex items-center justify-center overflow-hidden border-2 border-gray-100 shadow-md flex-shrink-0",children:as.avatarUrl?(0,b.jsx)("img",{src:as.avatarUrl,alt:"Avatar",className:"w-full h-full object-cover rounded-full"}):(0,b.jsx)("span",{className:"text-lg sm:text-xl text-white font-medium",children:at()})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-base sm:text-xl text-gray-800 mb-0.5 sm:mb-1",children:as.fullName||as.name||"Пользователь"}),(0,b.jsx)("p",{className:"text-sm sm:text-base text-gray-600 mb-0.5 sm:mb-1",children:as.email||"Email не указан"}),(0,b.jsx)("p",{className:"text-xs sm:text-sm text-gray-500",children:p?.registration_date?`Участник с ${new Date(p.registration_date).getFullYear()} года`:"Участник"})]})]}),(0,b.jsxs)("div",{className:"flex flex-col w-full sm:w-auto sm:flex-row gap-2 sm:gap-3",children:[(0,b.jsxs)(o.Button,{onClick:()=>E(!0),variant:"outline",className:"text-gray-700 border-gray-300 w-full sm:w-auto text-sm",children:[(0,b.jsx)(aQ,{className:"w-4 h-4 mr-[2.5px]"}),"Редактировать"]}),(0,b.jsxs)(o.Button,{onClick:()=>C(!0),variant:"outline",className:"text-[#18A36C] border-[#18A36C] hover:bg-[#18A36C] hover:text-white w-full sm:w-auto text-sm hover:shadow-lg hover:shadow-[#18A36C]/20",children:[(0,b.jsx)(aO.Lock,{className:"w-4 h-4 mr-[2.5px]"}),"Пароль"]}),(0,b.jsxs)(o.Button,{onClick:()=>{A(!0)},variant:"outline",className:"text-red-600 border-red-300 w-full sm:w-auto text-sm",children:[(0,b.jsx)(i,{className:"w-4 h-4 mr-[2.5px]"}),"Выйти"]})]})]})})}),(0,b.jsx)(r.Dialog,{open:z,onOpenChange:A,children:(0,b.jsxs)(r.DialogContent,{className:"sm:max-w-md border-0",children:[(0,b.jsxs)(r.DialogHeader,{children:[(0,b.jsx)(r.DialogTitle,{className:"text-xl text-[#2E2E2E]",children:"Подтверждение выхода"}),(0,b.jsxs)(r.DialogDescription,{className:"text-gray-600 pt-2",children:["Вы уверены, что хотите выйти из аккаунта?",(0,b.jsx)("br",{}),"Вам потребуется войти снова для доступа к личному кабинету."]})]}),(0,b.jsxs)(r.DialogFooter,{className:"flex flex-col sm:flex-row gap-3 sm:gap-2 pt-4",children:[(0,b.jsx)(o.Button,{variant:"outline",onClick:()=>A(!1),className:"w-full sm:w-auto border-gray-300 text-[#2E2E2E]",children:"Отмена"}),(0,b.jsxs)(o.Button,{onClick:av,className:"w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:[(0,b.jsx)(i,{className:"w-4 h-4 mr-2"}),"Выйти"]})]})]})}),(0,b.jsx)(a3,{isOpen:B,onClose:()=>C(!1)}),(0,b.jsx)(bF,{isOpen:D,onClose:()=>E(!1),user:p,onProfileUpdate:a=>{q(a)}}),(0,b.jsx)(bK,{isOpen:F,onClose:()=>{G(!1),I(null)},material:H})]})}a.s(["AccountContent",()=>bX],89739);var bY=a.i(75241),bZ=a.i(51263);let b$=[{id:"materials",title:"Материалы",icon:(0,b.jsx)(f.FileText,{className:"w-4 h-4"}),children:[]},{id:"contact",title:"Написать глав.врачу",icon:(0,b.jsx)(aM.MessageSquare,{className:"w-4 h-4"}),children:[]},{id:"logout",title:"Выйти",icon:(0,b.jsx)(i,{className:"w-4 h-4"}),children:[],isAction:!0}];function b_({item:a,level:c,expandedItems:d,setExpandedItems:e,selectedItem:f,onItemClick:g}){let h=a.children&&a.children.length>0,i=d.has(a.id),j=f===a.id;return(0,b.jsxs)("div",{className:0===c?"mb-1":"",children:[(0,b.jsxs)("button",{onClick:()=>{if(h){let b=new Set(d);i?b.delete(a.id):b.add(a.id),e(b)}else g(a)},className:`w-full flex items-center justify-between px-4 py-3 text-left transition-all duration-300 group rounded-lg mx-1 cursor-pointer ${j?"bg-[#18A36C]/10 text-[#18A36C] shadow-sm":"hover:bg-gray-50"} ${c>0?"ml-6 border-l-2 border-gray-200":""} ${a.isAction?"hover:bg-red-50":""}`,style:{width:"calc(100% - 8px)"},children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[a.icon&&(0,b.jsx)("div",{className:`flex-shrink-0 transition-all duration-300 ${j?"text-[#18A36C] scale-110":"text-gray-500 group-hover:text-[#18A36C] group-hover:scale-110"} ${a.isAction?"text-red-500 group-hover:text-red-600":""}`,children:a.icon}),(0,b.jsx)("span",{className:`font-medium transition-colors duration-300 ${j?"text-[#18A36C]":"text-gray-700 group-hover:text-[#18A36C]"} ${a.isAction?"text-red-500 group-hover:text-red-600":""}`,children:a.title})]}),h&&(0,b.jsx)("div",{className:`flex-shrink-0 transition-all duration-300 ${j?"text-[#18A36C]":"text-gray-400 group-hover:text-[#18A36C]"}`,children:i?(0,b.jsx)(aV.ChevronDown,{className:"w-4 h-4"}):(0,b.jsx)(aN.ChevronRight,{className:"w-4 h-4"})})]}),h&&i&&(0,b.jsx)("div",{className:"ml-4",children:a.children.map(a=>(0,b.jsx)(b_,{item:a,level:c+1,expandedItems:d,setExpandedItems:e,selectedItem:f,onItemClick:g},a.id))})]})}function b0(){let[a,c]=(0,s.useState)(new Set),[e,f]=(0,s.useState)(!1),[g,h]=(0,s.useState)(!1),{navigate:j,currentRoute:k}=(0,a_.useRouter)(),{isBurgerMenuOpen:l}=(0,bZ.useMenu)(),m=k.replace(/^\/+|\/+$/g,"").split("/"),n="";"account"===m[0]&&(n=m[1]||"");let p=n&&["materials","contact"].includes(n)?n:null,q=async a=>{if(a.isAction&&"logout"===a.id){f(!1),h(!0);return}j(`/account/${a.id}`),f(!1)},u=async()=>{h(!1),await (0,t.signOut)({callbackUrl:"/",redirect:!0})},v=()=>{n&&(j("/account"),f(!1))},w=({onItemClick:e})=>(0,b.jsxs)("div",{className:"bg-white h-full flex flex-col",children:[(0,b.jsx)("div",{className:"p-4 lg:p-6 border-b border-gray-100 bg-gradient-to-r from-white to-gray-50",children:(0,b.jsxs)("button",{onClick:v,className:`w-full flex items-center gap-3 transition-all duration-300 ${n?"cursor-pointer hover:bg-[#18A36C]/5 rounded-xl p-3 -m-3":"cursor-default p-3 -m-3"}`,disabled:!n,children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-[#18A36C] to-[#15905f] rounded-xl flex items-center justify-center flex-shrink-0 shadow-md",children:(0,b.jsx)(d.User,{className:"w-6 h-6 text-white"})}),(0,b.jsxs)("div",{className:"text-left flex-1",children:[(0,b.jsx)("h2",{className:`text-lg lg:text-xl font-semibold transition-colors duration-300 ${n?"text-[#18A36C]":"text-gray-800"}`,children:"Личный кабинет"}),(0,b.jsx)("p",{className:"text-xs lg:text-sm text-gray-500 mt-0.5",children:"Управление аккаунтом"})]}),n&&(0,b.jsx)(aN.ChevronRight,{className:"w-5 h-5 text-[#18A36C] flex-shrink-0 transition-transform duration-300 group-hover:translate-x-1"})]})}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,b.jsx)("nav",{className:"py-4 px-2",children:b$.map(d=>(0,b.jsx)(b_,{item:d,level:0,expandedItems:a,setExpandedItems:c,selectedItem:p,onItemClick:e||q},d.id))})}),(0,b.jsx)("div",{className:"p-4 border-t border-gray-100 bg-gradient-to-r from-gray-50 to-white",children:(0,b.jsx)("p",{className:"text-xs text-gray-500 text-center font-medium",children:"Doctor Family © 2025"})})]});return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"hidden lg:block w-80 flex-shrink-0 sticky top-[80px] h-[calc(100vh-80px)] overflow-y-auto bg-white border-r border-gray-200 shadow-lg",children:(0,b.jsx)(w,{})}),(0,b.jsx)("div",{className:"lg:hidden fixed top-24 left-4 z-50",children:(0,b.jsxs)(bY.Sheet,{open:e&&!l,onOpenChange:a=>!l&&f(a),children:[(0,b.jsx)(bY.SheetTrigger,{asChild:!0,children:(0,b.jsx)(o.Button,{size:"sm",disabled:l,className:"bg-[#18A36C] hover:bg-[#18A36C]/90 text-white shadow-xl rounded-full w-14 h-14 p-0 transition-all duration-300 hover:scale-110 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,b.jsx)(d.User,{className:"w-6 h-6"})})}),(0,b.jsxs)(bY.SheetContent,{side:"left",className:"w-80 p-0",children:[(0,b.jsxs)(bY.SheetHeader,{className:"sr-only",children:[(0,b.jsx)(bY.SheetTitle,{children:"Личный кабинет"}),(0,b.jsx)(bY.SheetDescription,{children:"Управление аккаунтом и настройками"})]}),(0,b.jsx)(w,{onItemClick:q})]})]})}),(0,b.jsx)(r.Dialog,{open:g,onOpenChange:h,children:(0,b.jsxs)(r.DialogContent,{className:"sm:max-w-md border-0",children:[(0,b.jsxs)(r.DialogHeader,{children:[(0,b.jsx)(r.DialogTitle,{className:"text-xl text-[#2E2E2E]",children:"Подтверждение выхода"}),(0,b.jsxs)(r.DialogDescription,{className:"text-gray-600 pt-2",children:["Вы уверены, что хотите выйти из аккаунта?",(0,b.jsx)("br",{}),"Вам потребуется войти снова для доступа к личному кабинету."]})]}),(0,b.jsxs)(r.DialogFooter,{className:"flex flex-col sm:flex-row gap-3 sm:gap-2 pt-4",children:[(0,b.jsx)(o.Button,{variant:"outline",onClick:()=>h(!1),className:"w-full sm:w-auto border-gray-300 text-[#2E2E2E] hover:bg-gray-50",children:"Отмена"}),(0,b.jsxs)(o.Button,{onClick:u,className:"w-full sm:w-auto bg-red-600 hover:bg-red-700 text-white",children:[(0,b.jsx)(i,{className:"w-4 h-4 mr-2"}),"Выйти"]})]})]})})]})}a.s(["NavigableAccountMenu",()=>b0],32029)}];

//# sourceMappingURL=src_components_SMAccount_SMAccountPage_tsx_db1a7274._.js.map