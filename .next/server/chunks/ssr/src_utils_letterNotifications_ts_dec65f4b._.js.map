{"version":3,"sources":["turbopack:///[project]/src/utils/letterNotifications.ts"],"sourcesContent":["// Утилиты для управления уведомлениями о письмах в localStorage\r\n\r\nconst NOTIFIED_LETTERS_KEY = 'letter-notifications-notified';\r\n\r\n/**\r\n * Очистить уведомление о письме (когда пользователь открыл и прочитал письмо)\r\n */\r\nexport function clearLetterNotification(letterId: number): void {\r\n  if (typeof window === 'undefined') return;\r\n\r\n  try {\r\n    const notifiedLetters = JSON.parse(\r\n      localStorage.getItem(NOTIFIED_LETTERS_KEY) || '[]'\r\n    ) as number[];\r\n\r\n    // Удаляем ID письма и ID+10000 (для thread messages)\r\n    const updated = notifiedLetters.filter(\r\n      (id) => id !== letterId && id !== letterId + 10000\r\n    );\r\n\r\n    localStorage.setItem(NOTIFIED_LETTERS_KEY, JSON.stringify(updated));\r\n  } catch (error) {\r\n    console.error('Error clearing letter notification:', error);\r\n  }\r\n}\r\n\r\n/**\r\n * Проверить, было ли уже показано уведомление для письма\r\n */\r\nexport function wasLetterNotified(letterId: number, isThreadMessage = false): boolean {\r\n  if (typeof window === 'undefined') return false;\r\n\r\n  try {\r\n    const notifiedLetters = JSON.parse(\r\n      localStorage.getItem(NOTIFIED_LETTERS_KEY) || '[]'\r\n    ) as number[];\r\n\r\n    const checkId = isThreadMessage ? letterId + 10000 : letterId;\r\n    return notifiedLetters.includes(checkId);\r\n  } catch (error) {\r\n    console.error('Error checking letter notification:', error);\r\n    return false;\r\n  }\r\n}\r\n"],"names":[],"mappings":"uCAOO,SAAS,EAAwB,CAAgB,EAiBxD,CAKO,SAAS,EAAkB,CAAgB,CAAE,GAAkB,CAAK,EACtC,OAAO,CAa5C"}