module.exports=[38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},31860,a=>{"use strict";var b=a.i(87924),c=a.i(72131);function d(a){let[d,e]=(0,c.useState)(!1),{src:f,alt:g,style:h,className:i,...j}=a;return d||!f?(0,b.jsx)("div",{className:`inline-block bg-gray-100 text-center align-middle ${i??""}`,style:h,children:(0,b.jsx)("div",{className:"flex items-center justify-center w-full h-full",children:(0,b.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==",alt:g||"Нет фото",...j,"data-original-url":f})})}):(0,b.jsx)("img",{src:f,alt:g,className:i,style:h,...j,onError:()=>{e(!0)}})}a.s(["ImageWithFallback",()=>d])},210,a=>{"use strict";let b=(0,a.i(70106).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],210)},67974,a=>{"use strict";var b=a.i(87924),c=a.i(13749),d=a.i(50522),e=a.i(9526);function f({currentPage:a,totalPages:f,onPageChange:g,className:h=""}){if(f<=1)return null;let i=(()=>{let b=[];if(f<=5)for(let a=1;a<=f;a++)b.push(a);else{b.push(1),a>3&&b.push("...");let c=Math.max(2,a-1),d=Math.min(f-1,a+1);for(let a=c;a<=d;a++)b.push(a);a<f-2&&b.push("..."),b.push(f)}return b})();return(0,b.jsxs)("div",{className:`flex items-center justify-center gap-2 ${h}`,children:[(0,b.jsx)(e.Button,{onClick:()=>g(a-1),disabled:1===a,variant:"outline",className:"h-10 w-10 p-0 border-gray-300 hover:bg-gray-50 disabled:opacity-50 cursor-pointer disabled:cursor-not-allowed hidden sm:flex items-center justify-center",children:(0,b.jsx)(c.ChevronLeft,{className:"w-5 h-5"})}),(0,b.jsxs)("div",{className:"flex sm:hidden items-center gap-2",children:[(0,b.jsx)(e.Button,{onClick:()=>g(a-1),disabled:1===a,variant:"outline",className:"h-10 px-3 border-gray-300 hover:bg-gray-50 disabled:opacity-50 cursor-pointer disabled:cursor-not-allowed",children:(0,b.jsx)(c.ChevronLeft,{className:"w-4 h-4"})}),(0,b.jsxs)("span",{className:"text-sm text-gray-700 min-w-[80px] text-center",children:[a," / ",f]}),(0,b.jsx)(e.Button,{onClick:()=>g(a+1),disabled:a===f,variant:"outline",className:"h-10 px-3 border-gray-300 hover:bg-gray-50 disabled:opacity-50 cursor-pointer disabled:cursor-not-allowed",children:(0,b.jsx)(d.ChevronRight,{className:"w-4 h-4"})})]}),(0,b.jsx)("div",{className:"hidden sm:flex items-center gap-2",children:i.map((c,d)=>{if("..."===c)return(0,b.jsx)("span",{className:"px-2 text-gray-500",children:"..."},`ellipsis-${d}`);let f=c===a;return(0,b.jsx)(e.Button,{onClick:()=>g(c),variant:f?"default":"outline",className:`h-10 w-10 p-0 cursor-pointer ${f?"bg-[#18A36C] hover:bg-[#18A36C]/90 text-white border-[#18A36C]":"border-gray-300 hover:bg-gray-50 text-gray-700"}`,children:c},c)})}),(0,b.jsx)(e.Button,{onClick:()=>g(a+1),disabled:a===f,variant:"outline",className:"h-10 w-10 p-0 border-gray-300 hover:bg-gray-50 disabled:opacity-50 cursor-pointer disabled:cursor-not-allowed hidden sm:flex items-center justify-center",children:(0,b.jsx)(d.ChevronRight,{className:"w-5 h-5"})})]})}a.s(["Pagination",()=>f])},37210,a=>{"use strict";var b=a.i(87924),c=a.i(46271),d=a.i(62036),e=a.i(73570),f=a.i(33508),g=a.i(9526);function h({isOpen:a,onClose:h,onConfirm:i,title:j,message:k,confirmText:l="Удалить",cancelText:m="Отмена",variant:n="danger",loading:o=!1}){return a?(0,b.jsx)(d.AnimatePresence,{children:a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:h,className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9998]"}),(0,b.jsx)("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:(0,b.jsxs)(c.motion.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",duration:.3},className:"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("div",{className:`px-6 py-5 border-b border-gray-100 ${"danger"===n?"bg-red-50":"bg-yellow-50"}`,children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${"danger"===n?"bg-red-100":"bg-yellow-100"}`,children:(0,b.jsx)(e.AlertTriangle,{className:`w-6 h-6 ${"danger"===n?"text-red-600":"text-yellow-600"}`})}),(0,b.jsx)("div",{children:(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:j})})]}),(0,b.jsx)("button",{onClick:h,disabled:o,className:"text-gray-400 hover:text-gray-600 transition-colors disabled:opacity-50 cursor-pointer",children:(0,b.jsx)(f.X,{className:"w-5 h-5"})})]})}),(0,b.jsx)("div",{className:"px-6 py-5",children:(0,b.jsx)("p",{className:"text-gray-600 leading-relaxed",children:k})}),(0,b.jsxs)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100 flex items-center justify-end gap-3",children:[(0,b.jsx)(g.Button,{onClick:h,disabled:o,variant:"ghost",className:"px-5 py-2.5 cursor-pointer",children:m}),(0,b.jsx)("button",{onClick:()=>{i()},disabled:o,className:`px-5 py-2.5 rounded-xl font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer ${"danger"===n?"bg-red-600 hover:bg-red-700 text-white shadow-lg shadow-red-600/30":"bg-yellow-600 hover:bg-yellow-700 text-white shadow-lg shadow-yellow-600/30"}`,children:o?(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),(0,b.jsx)("span",{children:"Удаление..."})]}):l})]})]})})]})}):null}a.s(["ConfirmDialog",()=>h])},72549,a=>{"use strict";var b=a.i(72131);function c(){let[a,c]=(0,b.useState)(!1),[d,e]=(0,b.useState)(!1),[f,g]=(0,b.useState)({title:"",message:""}),[h,i]=(0,b.useState)(null),j=(0,b.useCallback)(a=>(g(a),c(!0),e(!1),new Promise(a=>{i({resolve:a})})),[]);return{confirm:j,isOpen:a,loading:d,options:f,handleConfirm:(0,b.useCallback)(async()=>{h&&(e(!0),await new Promise(a=>setTimeout(a,300)),h.resolve(!0),c(!1),e(!1),i(null))},[h]),handleCancel:(0,b.useCallback)(()=>{h&&(h.resolve(!1),c(!1),e(!1),i(null))},[h])}}a.s(["useConfirmDialog",()=>c])},27190,a=>{"use strict";a.i(6016),a.i(26481),a.i(25170),a.s([])},48701,a=>{"use strict";var b=a.i(50944),c=a.i(72131);function d(e=12){let f=function(){try{let{useSearchParams:b}=a.r(50944);return b()}catch{return null}}(),g=(0,b.useRouter)(),h=(0,b.usePathname)(),i=(0,c.useMemo)(()=>{if(!f)return 1;let a=f.get("p"),b=a?parseInt(a,10):1;return b>0?b:1},[f]),j=(0,c.useCallback)(a=>{let b=new URLSearchParams(f?.toString()||"");1===a?b.delete("p"):b.set("p",a.toString());let c=b.toString(),d=c?`${h}?${c}`:h;g.replace(d,{scroll:!1})},[f,h,g]),k=(0,c.useCallback)(a=>{let b=Math.ceil(a.length/e),c=(i-1)*e,d=c+e;return{paginatedData:a.slice(c,d),totalPages:b,startIndex:c,endIndex:d}},[i,e]);return{currentPage:i,setPage:j,paginateData:k,itemsPerPage:e}}a.s(["useUrlPagination",()=>d])},10179,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(75003),e=a.i(62036),f=a.i(60246),g=a.i(67974);a.i(24933);var h=a.i(41567),i=a.i(31860),j=a.i(72663),k=a.i(4297),l=a.i(55220),m=a.i(79212),n=a.i(96215),o=a.i(37210),p=a.i(72549);a.i(27190);var q=a.i(25170),r=a.i(48701),s=a.i(52913);function t(){let{status:a}=(0,d.useSession)(),{sessionVerified:t,isLoading:u,verifySession:v}=(0,m.useAdminSession)(),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)(!0),A=(0,p.useConfirmDialog)(),{success:B,error:C}=(0,q.useAlert)(),[D,E]=(0,c.useState)([]),[F,G]=(0,c.useState)([]),[H,I]=(0,c.useState)(!1),[J,K]=(0,c.useState)(""),{currentPage:L,setPage:M,paginateData:N}=(0,r.useUrlPagination)(12),[O,P]=(0,c.useState)(!1),[Q,R]=(0,c.useState)(null),[S,T]=(0,c.useState)(!1),[U,V]=(0,c.useState)({name:"",specialization:"",qualification:"",experience:"",grade:"5",image_url:"",activity_area:"",education_details:"",conferences:"",specializations:"",education:"",category_id:""});(0,c.useEffect)(()=>{"authenticated"===a?W():"unauthenticated"===a&&(x(!1),z(!1))},[a]),(0,c.useEffect)(()=>{t&&w&&X()},[t,w]);let W=async()=>{z(!0);try{let a=await fetch("/api/admin/auth"),b=await a.json();x(b.isAdmin)}catch(a){x(!1)}finally{z(!1)}},X=async()=>{I(!0);try{let[a,b]=await Promise.all([fetch("/api/admin/specialists"),fetch("/api/categories")]);if(a.ok){let b=await a.json();E(b)}if(b.ok){let a=await b.json();G(a)}}catch(a){console.error("Error loading data:",a)}finally{I(!1)}},Y=(0,c.useMemo)(()=>{if(!J)return D;let a=J.toLowerCase();return D.filter(b=>b.name.toLowerCase().includes(a)||b.specialization.toLowerCase().includes(a)||b.category.name.toLowerCase().includes(a))},[D,J]);(0,c.useEffect)(()=>{M(1)},[J]);let{paginatedData:Z,totalPages:$}=(0,c.useMemo)(()=>N(Y),[N,Y]),_=()=>{V({name:"",specialization:"",qualification:"",experience:"",grade:"5",image_url:"",activity_area:"",education_details:"",conferences:"",specializations:"",education:"",category_id:""}),R(null),P(!1)},aa=()=>{_(),P(!0)},ab=async()=>{T(!0);try{let a={...U,specializations:U.specializations.split("\n").filter(a=>a.trim()),education:U.education.split("\n").filter(a=>a.trim()),conferences:U.conferences.split("\n").filter(a=>a.trim())},b=Q?`/api/admin/specialists/${Q.id}`:"/api/admin/specialists",c=Q?"PUT":"POST",d=await fetch(b,{method:c,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(d.ok)await X(),_(),B(Q?"Специалист обновлен":"Специалист создан");else{let a=await d.json();C(a.error||"Ошибка сохранения")}}catch(a){C("Ошибка сохранения")}finally{T(!1)}},ac=async(a,b)=>{if(await A.confirm({title:"Удаление специалиста",message:`Вы уверены, что хотите удалить специалиста "${b}"? Это действие нельзя отменить.`,confirmText:"Удалить",cancelText:"Отмена",variant:"danger"}))try{let b=await fetch(`/api/admin/specialists/${a}`,{method:"DELETE"});if(b.ok)await X(),B("Специалист удален");else{let a=await b.json();C(a.error||"Ошибка удаления")}}catch(a){C("Ошибка удаления")}};return"loading"===a||null===w||u||y?(0,b.jsx)(n.AdminAccessSkeleton,{}):"unauthenticated"===a||!1===w?(0,b.jsx)(s.default,{}):t?(0,b.jsxs)("div",{className:"flex min-h-screen bg-gray-50",children:[(0,b.jsx)(j.AdminMenu,{}),(0,b.jsx)("div",{className:"flex-1 p-4 lg:p-8 overflow-auto",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsx)(k.AdminSection,{title:"Специалисты",icon:f.Users,count:D.length,loading:H,searchValue:J,onSearchChange:K,onAdd:aa,addButtonText:"Добавить специалиста",children:0===Y.length?(0,b.jsx)(k.EmptyState,{icon:f.Users,title:"Специалисты не найдены",description:J?"Попробуйте изменить поисковый запрос":"Добавьте первого специалиста",actionText:J?void 0:"Добавить специалиста",onAction:J?void 0:aa}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:(0,b.jsx)(e.AnimatePresence,{children:Z.map(a=>(0,b.jsxs)(k.ItemCard,{children:[(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("div",{className:"w-20 h-20 rounded-xl overflow-hidden flex-shrink-0 bg-gray-100",children:(0,b.jsx)(i.ImageWithFallback,{src:a.image_url,alt:a.name,className:"w-full h-full object-cover"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-800 truncate",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-gray-500 truncate",children:a.specialization}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,b.jsx)(k.Badge,{variant:"primary",children:a.category.name}),(0,b.jsxs)(k.Badge,{variant:"secondary",children:[a.experience," лет"]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-100",children:[(0,b.jsx)("span",{className:"text-xs text-gray-400",children:a.qualification}),(0,b.jsx)(k.CardActions,{onEdit:()=>{R(a),V({name:a.name,specialization:a.specialization,qualification:a.qualification,experience:a.experience.toString(),grade:a.grade.toString(),image_url:a.image_url,activity_area:a.activity_area||"",education_details:a.education_details||"",conferences:a.conferences.join("\n"),specializations:a.specializations.join("\n"),education:a.education.join("\n"),category_id:a.category_id.toString()}),P(!0)},onDelete:()=>ac(a.id,a.name)})]})]},a.id))})}),$>1&&(0,b.jsx)(g.Pagination,{currentPage:L,totalPages:$,onPageChange:M,className:"mt-6"})]})}),(0,b.jsx)(k.FormModal,{isOpen:O,onClose:_,title:Q?"Редактирование специалиста":"Новый специалист",onSubmit:ab,loading:S,disabled:!U.name||!U.specialization||!U.category_id,children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsx)(k.FormField,{label:"ФИО",required:!0,children:(0,b.jsx)(k.FormInput,{type:"text",value:U.name,onChange:a=>V({...U,name:a.target.value}),placeholder:"Иванов Иван Иванович"})}),(0,b.jsx)(k.FormField,{label:"Специализация",required:!0,children:(0,b.jsx)(k.FormInput,{type:"text",value:U.specialization,onChange:a=>V({...U,specialization:a.target.value}),placeholder:"Стоматолог-терапевт"})}),(0,b.jsx)(k.FormField,{label:"Квалификация",required:!0,children:(0,b.jsx)(k.FormInput,{type:"text",value:U.qualification,onChange:a=>V({...U,qualification:a.target.value}),placeholder:"Врач высшей категории"})}),(0,b.jsx)(k.FormField,{label:"Категория",required:!0,children:(0,b.jsxs)(k.FormSelect,{value:U.category_id,onChange:a=>V({...U,category_id:a.target.value}),children:[(0,b.jsx)("option",{value:"",children:"Выберите категорию"}),F.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})}),(0,b.jsx)(k.FormField,{label:"Стаж (лет)",required:!0,children:(0,b.jsx)(k.FormInput,{type:"number",value:U.experience,onChange:a=>V({...U,experience:a.target.value}),placeholder:"10"})}),(0,b.jsx)(k.FormField,{label:"Рейтинг (1-5)",children:(0,b.jsx)(k.FormInput,{type:"number",min:"1",max:"5",value:U.grade,onChange:a=>V({...U,grade:a.target.value})})}),(0,b.jsx)("div",{className:"md:col-span-2",children:(0,b.jsx)(k.FormField,{label:"Фото специалиста",children:(0,b.jsx)(h.ImageUploader,{value:U.image_url,onChange:a=>V({...U,image_url:a}),folder:"smartmedical/specialists",placeholder:"Загрузите фото специалиста",maxSizeMB:10})})}),(0,b.jsx)("div",{className:"md:col-span-2",children:(0,b.jsx)(k.FormField,{label:"Направления (каждое с новой строки)",children:(0,b.jsx)(k.FormTextarea,{value:U.specializations,onChange:a=>V({...U,specializations:a.target.value}),rows:3,placeholder:"Терапевтическая стоматология Эстетическая реставрация"})})}),(0,b.jsx)("div",{className:"md:col-span-2",children:(0,b.jsx)(k.FormField,{label:"Образование (каждое с новой строки)",children:(0,b.jsx)(k.FormTextarea,{value:U.education,onChange:a=>V({...U,education:a.target.value}),rows:3,placeholder:"МГУ, Медицинский факультет, 2010 Ординатура по стоматологии, 2012"})})}),(0,b.jsx)("div",{className:"md:col-span-2",children:(0,b.jsx)(k.FormField,{label:"Конференции (каждая с новой строки)",children:(0,b.jsx)(k.FormTextarea,{value:U.conferences,onChange:a=>V({...U,conferences:a.target.value}),rows:3,placeholder:"Международная конференция стоматологов 2023 DentalTech Summit 2024 European Dental Congress 2024"})})})]})}),(0,b.jsx)(o.ConfirmDialog,{isOpen:A.isOpen,onClose:A.handleCancel,onConfirm:A.handleConfirm,title:A.options.title,message:A.options.message,confirmText:A.options.confirmText,cancelText:A.options.cancelText,variant:A.options.variant,loading:A.loading})]})})]}):(0,b.jsx)(l.AdminAuthForm,{onSuccess:()=>{v()}})}a.s(["default",()=>t])}];

//# sourceMappingURL=_85f637b0._.js.map