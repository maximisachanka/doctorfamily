{"version":3,"sources":["turbopack:///[project]/src/utils/chatNotifications.ts","turbopack:///[project]/src/components/SMAdmin/ChatModal.tsx","turbopack:///[project]/src/app/admin/chat/page.tsx","turbopack:///[project]/node_modules/lucide-react/src/icons/user-x.ts"],"sourcesContent":["const NOTIFIED_CHATS_KEY = 'chat-notifications-notified';\r\n\r\n/**\r\n * Clear notification flag for a specific chat\r\n * Call this when user opens and reads a chat\r\n */\r\nexport function clearChatNotification(chatId: number): void {\r\n  if (typeof window === 'undefined') return;\r\n\r\n  const notifiedChats = JSON.parse(\r\n    localStorage.getItem(NOTIFIED_CHATS_KEY) || '[]'\r\n  ) as number[];\r\n\r\n  const updated = notifiedChats.filter((id) => id !== chatId);\r\n  localStorage.setItem(NOTIFIED_CHATS_KEY, JSON.stringify(updated));\r\n}\r\n\r\n/**\r\n * Clear all chat notifications\r\n */\r\nexport function clearAllChatNotifications(): void {\r\n  if (typeof window === 'undefined') return;\r\n  localStorage.removeItem(NOTIFIED_CHATS_KEY);\r\n}\r\n","'use client';\r\n\r\nimport { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { X, Send, User, Bot, Clock, CheckCheck, Loader2, Ban, UserX, Trash2 } from 'lucide-react';\r\nimport { Button } from '../common/SMButton/SMButton';\r\nimport { Badge } from '../common/SMBadge/SMBadge';\r\nimport { useAlert } from '../common/SMAlert/AlertProvider';\r\nimport { clearChatNotification } from '@/utils/chatNotifications';\r\n\r\ninterface ChatMessage {\r\n  id: number;\r\n  chat_id: number;\r\n  sender_id: number;\r\n  sender_type: 'patient' | 'operator';\r\n  content: string;\r\n  created_at: string;\r\n  is_read: boolean;\r\n  sender: {\r\n    id: number;\r\n    name: string;\r\n    avatar_url: string | null;\r\n  };\r\n}\r\n\r\ninterface Chat {\r\n  id: number;\r\n  patient_id: number;\r\n  operator_id: number | null;\r\n  status: 'WAITING' | 'ACTIVE' | 'CLOSED';\r\n  created_at: string;\r\n  updated_at: string;\r\n  last_message_at: string | null;\r\n  has_unread_operator: boolean;\r\n  has_unread_patient: boolean;\r\n  patient: {\r\n    id: number;\r\n    name: string;\r\n    email: string;\r\n    avatar_url: string | null;\r\n    is_messages_blocked: boolean;\r\n  };\r\n  operator: {\r\n    id: number;\r\n    name: string;\r\n  } | null;\r\n  messages: ChatMessage[];\r\n}\r\n\r\ninterface ChatModalProps {\r\n  chatId: number;\r\n  onClose: () => void;\r\n}\r\n\r\nexport function ChatModal({ chatId, onClose }: ChatModalProps) {\r\n  const [chat, setChat] = useState<Chat | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [message, setMessage] = useState('');\r\n  const [sending, setSending] = useState(false);\r\n  const [showBlockConfirm, setShowBlockConfirm] = useState(false);\r\n  const [blocking, setBlocking] = useState(false);\r\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\r\n  const [deleting, setDeleting] = useState(false);\r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n  const alert = useAlert();\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  const loadChat = useCallback(async () => {\r\n    try {\r\n      const response = await fetch(`/api/operator-chat/${chatId}`);\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setChat(data.chat);\r\n        // Clear notification when chat is opened and loaded\r\n        clearChatNotification(chatId);\r\n      } else {\r\n        alert.error('Не удалось загрузить чат', 'Ошибка');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading chat:', error);\r\n      alert.error('Ошибка при загрузке чата', 'Ошибка');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [chatId, alert]);\r\n\r\n  useEffect(() => {\r\n    loadChat();\r\n    // Автообновление убрано - обновляется только при отправке сообщения и открытии\r\n  }, [loadChat]);\r\n\r\n  useEffect(() => {\r\n    if (chat) {\r\n      scrollToBottom();\r\n    }\r\n  }, [chat?.messages]);\r\n\r\n  const handleTakeChat = async () => {\r\n    try {\r\n      const response = await fetch(`/api/operator-chat/${chatId}`, {\r\n        method: 'PATCH',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ action: 'take' }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        alert.success('Вы взяли чат', 'Успех');\r\n        loadChat();\r\n      } else {\r\n        alert.error('Не удалось взять чат', 'Ошибка');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error taking chat:', error);\r\n      alert.error('Ошибка при взятии чата', 'Ошибка');\r\n    }\r\n  };\r\n\r\n  const handleCloseChat = async () => {\r\n    try {\r\n      const response = await fetch(`/api/operator-chat/${chatId}`, {\r\n        method: 'PATCH',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ status: 'CLOSED' }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        alert.success('Чат закрыт', 'Успех');\r\n        onClose();\r\n      } else {\r\n        alert.error('Не удалось закрыть чат', 'Ошибка');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error closing chat:', error);\r\n      alert.error('Ошибка при закрытии чата', 'Ошибка');\r\n    }\r\n  };\r\n\r\n  const handleBlockUser = () => {\r\n    if (!chat) return;\r\n    setShowBlockConfirm(true);\r\n  };\r\n\r\n  const confirmBlockUser = async () => {\r\n    if (!chat || blocking) return;\r\n\r\n    const action = chat.patient.is_messages_blocked ? 'unblock' : 'block';\r\n    setBlocking(true);\r\n\r\n    try {\r\n      const response = await fetch(`/api/operator-chat/${chatId}/block`, {\r\n        method: 'PATCH',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ action }),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (response.ok) {\r\n        alert.success(\r\n          action === 'block' ? 'Пользователь заблокирован и все его чаты удалены' : 'Пользователь разблокирован',\r\n          'Успех'\r\n        );\r\n        if (action === 'block') {\r\n          // Чат удален, закрываем модалку\r\n          onClose();\r\n        } else {\r\n          await loadChat();\r\n          setShowBlockConfirm(false);\r\n        }\r\n      } else {\r\n        alert.error(data.error || 'Не удалось ' + (action === 'block' ? 'заблокировать' : 'разблокировать') + ' пользователя', 'Ошибка');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error blocking/unblocking user:', error);\r\n      alert.error('Ошибка при блокировке/разблокировке', 'Ошибка');\r\n    } finally {\r\n      setBlocking(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteChat = () => {\r\n    setShowDeleteConfirm(true);\r\n  };\r\n\r\n  const confirmDeleteChat = async () => {\r\n    if (!chat || deleting) return;\r\n\r\n    setDeleting(true);\r\n\r\n    try {\r\n      const response = await fetch(`/api/operator-chat/${chatId}`, {\r\n        method: 'DELETE',\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (response.ok) {\r\n        alert.success('Чат удален', 'Успех');\r\n        onClose();\r\n      } else {\r\n        alert.error(data.error || 'Не удалось удалить чат', 'Ошибка');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting chat:', error);\r\n      alert.error('Ошибка при удалении чата', 'Ошибка');\r\n    } finally {\r\n      setDeleting(false);\r\n    }\r\n  };\r\n\r\n  const handleSendMessage = async () => {\r\n    if (!message.trim() || sending) return;\r\n\r\n    setSending(true);\r\n    try {\r\n      const response = await fetch(`/api/operator-chat/${chatId}`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ content: message.trim() }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        setMessage('');\r\n        loadChat();\r\n      } else {\r\n        const data = await response.json();\r\n        alert.error(data.error || 'Не удалось отправить сообщение', 'Ошибка');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error sending message:', error);\r\n      alert.error('Ошибка при отправке сообщения', 'Ошибка');\r\n    } finally {\r\n      setSending(false);\r\n    }\r\n  };\r\n\r\n  const handleKeyPress = (e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSendMessage();\r\n    }\r\n  };\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    switch (status) {\r\n      case 'WAITING':\r\n        return <Badge variant=\"outline\" className=\"border-amber-400 text-amber-700 bg-amber-50\">Ожидает</Badge>;\r\n      case 'ACTIVE':\r\n        return <Badge variant=\"default\" className=\"bg-emerald-500 text-white border-transparent shadow-sm\">Активный</Badge>;\r\n      case 'CLOSED':\r\n        return <Badge variant=\"secondary\" className=\"bg-gray-200 text-gray-700\">Закрыт</Badge>;\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  const formatTime = (date: string) => {\r\n    const d = new Date(date);\r\n    return d.toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' });\r\n  };\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4\">\r\n        {/* Overlay */}\r\n        <motion.div\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          exit={{ opacity: 0 }}\r\n          onClick={onClose}\r\n          className=\"absolute inset-0 bg-black/50 backdrop-blur-sm\"\r\n        />\r\n\r\n        {/* Modal */}\r\n        <motion.div\r\n          initial={{ opacity: 0, scale: 0.95, y: 20 }}\r\n          animate={{ opacity: 1, scale: 1, y: 0 }}\r\n          exit={{ opacity: 0, scale: 0.95, y: 20 }}\r\n          className=\"relative z-10 w-full max-w-3xl bg-white rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[80vh]\"\r\n        >\r\n          {loading ? (\r\n            <div className=\"flex items-center justify-center h-96\">\r\n              <Loader2 className=\"w-8 h-8 text-[#18A36C] animate-spin\" />\r\n            </div>\r\n          ) : chat ? (\r\n            <>\r\n              {/* Header */}\r\n              <div className=\"bg-white border-b border-gray-200 p-4 sm:p-6 flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\r\n                <div className=\"flex items-center gap-3 sm:gap-4 min-w-0\">\r\n                  {chat.patient.avatar_url ? (\r\n                    <img\r\n                      src={chat.patient.avatar_url}\r\n                      alt={chat.patient.name}\r\n                      className=\"w-12 h-12 sm:w-14 sm:h-14 rounded-full object-cover border-2 border-gray-200 flex-shrink-0\"\r\n                    />\r\n                  ) : (\r\n                    <div className=\"w-12 h-12 sm:w-14 sm:h-14 bg-gradient-to-br from-[#18A36C] to-[#15905f] rounded-full flex items-center justify-center shadow-md flex-shrink-0\">\r\n                      <User className=\"w-6 h-6 sm:w-7 sm:h-7 text-white\" />\r\n                    </div>\r\n                  )}\r\n                  <div className=\"min-w-0 flex-1\">\r\n                    <h2 className=\"text-lg sm:text-xl font-bold text-gray-900 truncate\">{chat.patient.name}</h2>\r\n                    <p className=\"text-gray-600 text-xs sm:text-sm truncate\">{chat.patient.email}</p>\r\n                    <div className=\"mt-1.5 flex items-center gap-2 flex-wrap\">\r\n                      {getStatusBadge(chat.status)}\r\n                      {chat.patient.is_messages_blocked && (\r\n                        <Badge variant=\"secondary\" className=\"bg-gray-700 text-white text-xs\">\r\n                          <Ban className=\"w-3 h-3 mr-1\" />\r\n                          Заблокирован\r\n                        </Badge>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-center gap-2 flex-shrink-0\">\r\n                  {chat.status !== 'CLOSED' && (\r\n                    <>\r\n                      {chat.status === 'WAITING' && (\r\n                        <Button\r\n                          onClick={handleTakeChat}\r\n                          className=\"bg-[#18A36C] text-white hover:bg-[#15905f] shadow-sm\"\r\n                        >\r\n                          Взять чат\r\n                        </Button>\r\n                      )}\r\n                      {chat.status === 'ACTIVE' && (\r\n                        <Button\r\n                          onClick={handleCloseChat}\r\n                          variant=\"outline\"\r\n                          className=\"text-gray-700 border-gray-300\"\r\n                        >\r\n                          Закрыть чат\r\n                        </Button>\r\n                      )}\r\n                    </>\r\n                  )}\r\n                  <button\r\n                    onClick={handleDeleteChat}\r\n                    title=\"Удалить чат\"\r\n                    className=\"w-10 h-10 rounded-lg flex items-center justify-center transition-all bg-red-50 text-red-600 hover:bg-red-100\"\r\n                  >\r\n                    <Trash2 className=\"w-5 h-5\" />\r\n                  </button>\r\n                  <button\r\n                    onClick={handleBlockUser}\r\n                    title={chat.patient.is_messages_blocked ? 'Разблокировать' : 'Заблокировать'}\r\n                    className={`w-10 h-10 rounded-lg flex items-center justify-center transition-all ${chat.patient.is_messages_blocked\r\n                      ? 'bg-blue-50 text-blue-600 hover:bg-blue-100'\r\n                      : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\r\n                      }`}\r\n                  >\r\n                    {chat.patient.is_messages_blocked ? (\r\n                      <UserX className=\"w-5 h-5\" />\r\n                    ) : (\r\n                      <Ban className=\"w-5 h-5\" />\r\n                    )}\r\n                  </button>\r\n                  <button\r\n                    onClick={onClose}\r\n                    className=\"w-10 h-10 rounded-lg bg-gray-100 hover:bg-gray-200 flex items-center justify-center text-gray-600 transition-colors\"\r\n                  >\r\n                    <X className=\"w-5 h-5\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Messages */}\r\n              <div className=\"flex-1 overflow-y-auto p-6 space-y-4 bg-gradient-to-b from-gray-50 to-white\">\r\n                {chat.messages.map((msg) => (\r\n                  <motion.div\r\n                    key={msg.id}\r\n                    initial={{ opacity: 0, y: 10 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    className={`flex gap-3 ${msg.sender_type === 'operator' ? 'flex-row-reverse' : ''}`}\r\n                  >\r\n                    {msg.sender.avatar_url ? (\r\n                      <img\r\n                        src={msg.sender.avatar_url}\r\n                        alt={msg.sender.name}\r\n                        className=\"w-10 h-10 rounded-full object-cover flex-shrink-0 shadow-sm\"\r\n                      />\r\n                    ) : (\r\n                      <div\r\n                        className={`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 shadow-sm ${msg.sender_type === 'operator'\r\n                          ? 'bg-gradient-to-br from-emerald-500 to-emerald-600'\r\n                          : 'bg-gradient-to-br from-gray-400 to-gray-500'\r\n                          }`}\r\n                      >\r\n                        {msg.sender_type === 'operator' ? (\r\n                          <Bot className=\"w-5 h-5 text-white\" />\r\n                        ) : (\r\n                          <User className=\"w-5 h-5 text-white\" />\r\n                        )}\r\n                      </div>\r\n                    )}\r\n                    <div className={`max-w-[70%] ${msg.sender_type === 'operator' ? 'items-end' : 'items-start'} flex flex-col`}>\r\n                      <div\r\n                        className={`rounded-2xl p-4 shadow-sm ${msg.sender_type === 'operator'\r\n                          ? 'bg-gradient-to-br from-emerald-500 to-emerald-600 text-white'\r\n                          : 'bg-white text-gray-800 border border-gray-200'\r\n                          }`}\r\n                      >\r\n                        <p className=\"text-sm leading-relaxed whitespace-pre-wrap\">{msg.content}</p>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-2 mt-1.5 px-2\">\r\n                        <Clock className=\"w-3 h-3 text-gray-400\" />\r\n                        <span className=\"text-xs text-gray-500\">{formatTime(msg.created_at)}</span>\r\n                        {msg.sender_type === 'operator' && msg.is_read && (\r\n                          <CheckCheck className=\"w-4 h-4 text-emerald-500\" />\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </motion.div>\r\n                ))}\r\n                <div ref={messagesEndRef} />\r\n              </div>\r\n\r\n              {/* Input */}\r\n              {chat.status !== 'CLOSED' && (\r\n                <div className=\"p-4 bg-white border-t border-gray-200\">\r\n                  <div className=\"flex gap-3\">\r\n                    <input\r\n                      type=\"text\"\r\n                      value={message}\r\n                      onChange={(e) => setMessage(e.target.value)}\r\n                      onKeyPress={handleKeyPress}\r\n                      placeholder=\"Напишите сообщение...\"\r\n                      disabled={sending}\r\n                      className=\"flex-1 px-4 py-3 bg-gray-50 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all disabled:opacity-50\"\r\n                    />\r\n                    <button\r\n                      onClick={handleSendMessage}\r\n                      disabled={sending || !message.trim()}\r\n                      className=\"w-12 h-12 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-xl flex items-center justify-center text-white hover:shadow-md hover:scale-105 transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100\"\r\n                    >\r\n                      {sending ? (\r\n                        <Loader2 className=\"w-5 h-5 animate-spin\" />\r\n                      ) : (\r\n                        <Send className=\"w-5 h-5\" />\r\n                      )}\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </>\r\n          ) : (\r\n            <div className=\"flex items-center justify-center h-96\">\r\n              <p className=\"text-gray-600\">Чат не найден</p>\r\n            </div>\r\n          )}\r\n        </motion.div>\r\n\r\n        {/* Block Confirmation Modal */}\r\n        {showBlockConfirm && chat && (\r\n          <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            className=\"absolute inset-0 z-20 flex items-center justify-center bg-black/40 backdrop-blur-sm\"\r\n            onClick={() => setShowBlockConfirm(false)}\r\n          >\r\n            <motion.div\r\n              initial={{ opacity: 0, scale: 0.9, y: 20 }}\r\n              animate={{ opacity: 1, scale: 1, y: 0 }}\r\n              exit={{ opacity: 0, scale: 0.9, y: 20 }}\r\n              onClick={(e) => e.stopPropagation()}\r\n              className=\"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 overflow-hidden\"\r\n            >\r\n              {/* Header */}\r\n              <div className={`p-6 ${chat.patient.is_messages_blocked\r\n                ? 'bg-gradient-to-r from-[#18A36C] to-[#15905f]'\r\n                : 'bg-gradient-to-r from-[#18A36C] to-[#15905f]'\r\n                }`}>\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className=\"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center\">\r\n                    {chat.patient.is_messages_blocked ? (\r\n                      <UserX className=\"w-6 h-6 text-white\" />\r\n                    ) : (\r\n                      <Ban className=\"w-6 h-6 text-white\" />\r\n                    )}\r\n                  </div>\r\n                  <div>\r\n                    <h3 className=\"text-lg font-bold text-white\">\r\n                      {chat.patient.is_messages_blocked ? 'Разблокировать пользователя?' : 'Заблокировать пользователя?'}\r\n                    </h3>\r\n                    <p className=\"text-sm text-white/80\">{chat.patient.name}</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Content */}\r\n              <div className=\"p-6\">\r\n                <p className=\"text-gray-700 leading-relaxed\">\r\n                  {chat.patient.is_messages_blocked\r\n                    ? 'Пользователь сможет снова создавать новые чаты и отправлять сообщения.'\r\n                    : 'Пользователь не сможет создавать новые чаты и отправлять сообщения. Все его чаты будут удалены.'}\r\n                </p>\r\n              </div>\r\n\r\n              {/* Actions */}\r\n              <div className=\"px-6 pb-6 flex gap-3 justify-end\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  onClick={() => setShowBlockConfirm(false)}\r\n                  disabled={blocking}\r\n                  className=\"border-gray-300 text-gray-700 hover:bg-gray-50\"\r\n                >\r\n                  Отмена\r\n                </Button>\r\n                <Button\r\n                  onClick={confirmBlockUser}\r\n                  disabled={blocking}\r\n                  className={\r\n                    chat.patient.is_messages_blocked\r\n                      ? 'bg-blue-500 hover:bg-blue-600 text-white shadow-md flex items-center gap-2'\r\n                      : 'bg-gray-700 hover:bg-gray-800 text-white shadow-md flex items-center gap-2'\r\n                  }\r\n                >\r\n                  {blocking && <Loader2 className=\"w-4 h-4 animate-spin\" />}\r\n                  {chat.patient.is_messages_blocked ? 'Разблокировать' : 'Заблокировать'}\r\n                </Button>\r\n              </div>\r\n            </motion.div>\r\n          </motion.div>\r\n        )}\r\n\r\n        {/* Delete Confirmation Modal */}\r\n        {showDeleteConfirm && chat && (\r\n          <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            className=\"absolute inset-0 z-20 flex items-center justify-center bg-black/40 backdrop-blur-sm\"\r\n            onClick={() => setShowDeleteConfirm(false)}\r\n          >\r\n            <motion.div\r\n              initial={{ opacity: 0, scale: 0.9, y: 20 }}\r\n              animate={{ opacity: 1, scale: 1, y: 0 }}\r\n              exit={{ opacity: 0, scale: 0.9, y: 20 }}\r\n              onClick={(e) => e.stopPropagation()}\r\n              className=\"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 overflow-hidden\"\r\n            >\r\n              {/* Header */}\r\n              <div className=\"p-6 bg-gradient-to-r from-red-500 to-red-600\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className=\"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center\">\r\n                    <Trash2 className=\"w-6 h-6 text-white\" />\r\n                  </div>\r\n                  <div>\r\n                    <h3 className=\"text-lg font-bold text-white\">\r\n                      Удалить чат?\r\n                    </h3>\r\n                    <p className=\"text-sm text-white/80\">{chat.patient.name}</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Content */}\r\n              <div className=\"p-6\">\r\n                <p className=\"text-gray-700 leading-relaxed\">\r\n                  Все сообщения в этом чате будут удалены безвозвратно. Это действие нельзя отменить.\r\n                </p>\r\n              </div>\r\n\r\n              {/* Actions */}\r\n              <div className=\"px-6 pb-6 flex gap-3 justify-end\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  onClick={() => setShowDeleteConfirm(false)}\r\n                  disabled={deleting}\r\n                  className=\"border-gray-300 text-gray-700 hover:bg-gray-50\"\r\n                >\r\n                  Отмена\r\n                </Button>\r\n                <Button\r\n                  onClick={confirmDeleteChat}\r\n                  disabled={deleting}\r\n                  className=\"bg-red-500 hover:bg-red-600 text-white shadow-md flex items-center gap-2\"\r\n                >\r\n                  {deleting && <Loader2 className=\"w-4 h-4 animate-spin\" />}\r\n                  Удалить\r\n                </Button>\r\n              </div>\r\n            </motion.div>\r\n          </motion.div>\r\n        )}\r\n      </div>\r\n    </AnimatePresence>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { useSession } from 'next-auth/react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { AdminAccessSkeleton } from '@/components/SMAdmin/SMAdminSkeleton';\r\nimport { MessagesSquare, Clock, User, CheckCheck, MessageCircle, Ban, UserX, Loader2, ArrowLeft } from 'lucide-react';\r\nimport { Badge } from '@/components/common/SMBadge/SMBadge';\r\nimport { Button } from '@/components/common/SMButton/SMButton';\r\nimport { ChatModal } from '@/components/SMAdmin/ChatModal';\r\nimport { useAlert } from '@/components/common/SMAlert/AlertProvider';\r\nimport { Pagination } from '@/components/common/SMPagination/SMPagination';\r\nimport { useUrlPagination } from '@/hooks/useUrlPagination';\r\n\r\ninterface ChatMessage {\r\n  id: number;\r\n  chat_id: number;\r\n  sender_id: number;\r\n  sender_type: 'patient' | 'operator';\r\n  content: string;\r\n  created_at: string;\r\n  is_read: boolean;\r\n}\r\n\r\ninterface Chat {\r\n  id: number;\r\n  patient_id: number;\r\n  operator_id: number | null;\r\n  status: 'WAITING' | 'ACTIVE' | 'CLOSED';\r\n  created_at: string;\r\n  updated_at: string;\r\n  last_message_at: string | null;\r\n  has_unread_operator: boolean;\r\n  has_unread_patient: boolean;\r\n  patient: {\r\n    id: number;\r\n    name: string;\r\n    email: string;\r\n    avatar_url: string | null;\r\n    is_messages_blocked: boolean;\r\n  };\r\n  operator: {\r\n    id: number;\r\n    name: string;\r\n  } | null;\r\n  messages: ChatMessage[];\r\n}\r\n\r\ninterface BlockedUser {\r\n  id: number;\r\n  name: string;\r\n  email: string;\r\n  avatar_url: string | null;\r\n  phone: string | null;\r\n  registration_date: string;\r\n}\r\n\r\nexport default function AdminChatPage() {\r\n  const { data: session, status } = useSession();\r\n  const router = useRouter();\r\n  const alert = useAlert();\r\n\r\n  const [hasAdminRole, setHasAdminRole] = useState<boolean | null>(null);\r\n  const [isCheckingRole, setIsCheckingRole] = useState(true);\r\n  const [chats, setChats] = useState<Chat[]>([]);\r\n  const [blockedUsers, setBlockedUsers] = useState<BlockedUser[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedChatId, setSelectedChatId] = useState<number | null>(null);\r\n  const [filterStatus, setFilterStatus] = useState<'ALL' | 'WAITING' | 'ACTIVE' | 'CLOSED' | 'BLOCKED'>('ALL');\r\n  const [unblockingUserId, setUnblockingUserId] = useState<number | null>(null);\r\n  // Pagination hook\r\n  const { currentPage, setPage, paginateData } = useUrlPagination(9);\r\n  const ITEMS_PER_PAGE = 9;\r\n\r\n  // Check admin role\r\n  const checkAdminRole = useCallback(async () => {\r\n    setIsCheckingRole(true);\r\n    try {\r\n      const res = await fetch('/api/admin/auth');\r\n      const data = await res.json();\r\n      setHasAdminRole(data.isAdmin || false);\r\n    } catch (error) {\r\n      console.error('Error checking admin role:', error);\r\n      setHasAdminRole(false);\r\n    } finally {\r\n      setIsCheckingRole(false);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (status === 'authenticated') {\r\n      checkAdminRole();\r\n    } else if (status === 'unauthenticated') {\r\n      setIsCheckingRole(false);\r\n      setHasAdminRole(false);\r\n    }\r\n  }, [status, checkAdminRole]);\r\n\r\n  // Load chats\r\n  const loadChats = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await fetch('/api/operator-chat');\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setChats(data.chats || []);\r\n      } else {\r\n        alert.error('Не удалось загрузить чаты', 'Ошибка');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading chats:', error);\r\n      alert.error('Ошибка при загрузке чатов', 'Ошибка');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [alert]);\r\n\r\n  // Load blocked users\r\n  const loadBlockedUsers = useCallback(async () => {\r\n    try {\r\n      const response = await fetch('/api/admin/blocked-users');\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setBlockedUsers(data.users || []);\r\n      } else {\r\n        alert.error('Не удалось загрузить заблокированных пользователей', 'Ошибка');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading blocked users:', error);\r\n      alert.error('Ошибка при загрузке заблокированных пользователей', 'Ошибка');\r\n    }\r\n  }, [alert]);\r\n\r\n  // Unblock user\r\n  const handleUnblockUser = async (userId: number) => {\r\n    setUnblockingUserId(userId);\r\n    try {\r\n      const response = await fetch('/api/admin/blocked-users', {\r\n        method: 'PATCH',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ patientId: userId }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        alert.success('Пользователь разблокирован', 'Успех');\r\n        loadBlockedUsers(); // Reload blocked users\r\n      } else {\r\n        const data = await response.json();\r\n        alert.error(data.error || 'Не удалось разблокировать пользователя', 'Ошибка');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error unblocking user:', error);\r\n      alert.error('Ошибка при разблокировке пользователя', 'Ошибка');\r\n    } finally {\r\n      setUnblockingUserId(null);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (hasAdminRole) {\r\n      loadChats();\r\n      loadBlockedUsers();\r\n      // Автообновление убрано - список обновляется через уведомления и при закрытии модалки\r\n    }\r\n  }, [hasAdminRole, loadChats, loadBlockedUsers]);\r\n\r\n  // Redirect if not authenticated\r\n  useEffect(() => {\r\n    if (status === 'unauthenticated') {\r\n      router.push('/account?section=login');\r\n    }\r\n  }, [status, router]);\r\n\r\n  // Reset page when filter changes\r\n  useEffect(() => {\r\n    setPage(1);\r\n  }, [filterStatus]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  // Show loading skeleton while checking role\r\n  if (status === 'loading' || hasAdminRole === null || isCheckingRole) {\r\n    return <AdminAccessSkeleton />;\r\n  }\r\n\r\n  // Redirect to home if no admin access\r\n  if (!hasAdminRole) {\r\n    router.push('/');\r\n    return <AdminAccessSkeleton />;\r\n  }\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    switch (status) {\r\n      case 'WAITING':\r\n        return <Badge variant=\"outline\" className=\"border-amber-400 text-amber-700 bg-amber-50\">Ожидает</Badge>;\r\n      case 'ACTIVE':\r\n        return <Badge variant=\"default\" className=\"bg-emerald-500 text-white border-transparent shadow-sm\">Активный</Badge>;\r\n      case 'CLOSED':\r\n        return <Badge variant=\"secondary\" className=\"bg-gray-200 text-gray-700\">Закрыт</Badge>;\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  const getTimeAgo = (date: string) => {\r\n    const now = new Date();\r\n    const messageDate = new Date(date);\r\n    const diffInMinutes = Math.floor((now.getTime() - messageDate.getTime()) / 60000);\r\n\r\n    if (diffInMinutes < 1) return 'только что';\r\n    if (diffInMinutes < 60) return `${diffInMinutes} мин назад`;\r\n    const diffInHours = Math.floor(diffInMinutes / 60);\r\n    if (diffInHours < 24) return `${diffInHours} ч назад`;\r\n    const diffInDays = Math.floor(diffInHours / 24);\r\n    return `${diffInDays} д назад`;\r\n  };\r\n\r\n  // Фильтрация - исключаем заблокированных из обычных чатов\r\n  let filteredChats = filterStatus === 'ALL'\r\n    ? chats\r\n    : chats.filter(chat => chat.status === filterStatus);\r\n\r\n  const waitingCount = chats.filter(c => c.status === 'WAITING').length;\r\n  const activeCount = chats.filter(c => c.status === 'ACTIVE').length;\r\n  const blockedCount = blockedUsers.length;\r\n\r\n  // Pagination for chats\r\n  const totalChatPages = Math.ceil(filteredChats.length / ITEMS_PER_PAGE);\r\n  const paginatedChats = filteredChats.slice(\r\n    (currentPage - 1) * ITEMS_PER_PAGE,\r\n    currentPage * ITEMS_PER_PAGE\r\n  );\r\n\r\n  // Pagination for blocked users\r\n  const totalBlockedPages = Math.ceil(blockedUsers.length / ITEMS_PER_PAGE);\r\n  const paginatedBlockedUsers = blockedUsers.slice(\r\n    (currentPage - 1) * ITEMS_PER_PAGE,\r\n    currentPage * ITEMS_PER_PAGE\r\n  );\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      <div className=\"max-w-7xl mx-auto px-4 py-6 lg:py-8\">\r\n        {/* Header */}\r\n        <div className=\"mb-6\">\r\n          <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-xl flex items-center justify-center shadow-md\">\r\n                <MessagesSquare className=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" />\r\n              </div>\r\n              <div>\r\n                <h1 className=\"text-xl sm:text-2xl font-bold text-gray-900\">Чат с пациентами</h1>\r\n                <p className=\"text-xs sm:text-sm text-gray-600\">Управление обращениями</p>\r\n              </div>\r\n            </div>\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={() => router.push('/admin')}\r\n              className=\"flex items-center gap-2 hover:bg-gray-50 self-start sm:self-auto\"\r\n            >\r\n              <ArrowLeft className=\"w-4 h-4\" />\r\n              <span className=\"hidden sm:inline\">Назад в админ-панель</span>\r\n              <span className=\"sm:hidden\">Назад</span>\r\n            </Button>\r\n          </div>\r\n\r\n          {/* Filters */}\r\n          <div className=\"flex flex-wrap gap-2\">\r\n            <Button\r\n              variant={filterStatus === 'ALL' ? 'default' : 'outline'}\r\n              onClick={() => setFilterStatus('ALL')}\r\n              className={filterStatus === 'ALL' ? 'bg-emerald-500 hover:bg-emerald-600 shadow-sm text-white' : 'hover:bg-gray-50'}\r\n            >\r\n              Все ({chats.length})\r\n            </Button>\r\n            <Button\r\n              variant={filterStatus === 'WAITING' ? 'default' : 'outline'}\r\n              onClick={() => setFilterStatus('WAITING')}\r\n              className={filterStatus === 'WAITING' ? 'bg-emerald-500 hover:bg-emerald-600 shadow-sm text-white' : 'hover:bg-gray-50'}\r\n            >\r\n              Ожидают ({waitingCount})\r\n            </Button>\r\n            <Button\r\n              variant={filterStatus === 'ACTIVE' ? 'default' : 'outline'}\r\n              onClick={() => setFilterStatus('ACTIVE')}\r\n              className={filterStatus === 'ACTIVE' ? 'bg-emerald-500 hover:bg-emerald-600 shadow-sm text-white' : 'hover:bg-gray-50'}\r\n            >\r\n              Активные ({activeCount})\r\n            </Button>\r\n            <Button\r\n              variant={filterStatus === 'CLOSED' ? 'default' : 'outline'}\r\n              onClick={() => setFilterStatus('CLOSED')}\r\n              className={filterStatus === 'CLOSED' ? 'bg-emerald-500 hover:bg-emerald-600 shadow-sm text-white' : 'hover:bg-gray-50'}\r\n            >\r\n              Закрытые\r\n            </Button>\r\n            <Button\r\n              variant={filterStatus === 'BLOCKED' ? 'default' : 'outline'}\r\n              onClick={() => setFilterStatus('BLOCKED')}\r\n              className={filterStatus === 'BLOCKED' ? 'bg-red-500 hover:bg-red-600 shadow-sm text-white' : 'hover:bg-gray-50 text-red-600 border-red-300'}\r\n            >\r\n              Заблокированные ({blockedCount})\r\n            </Button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        {loading ? (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n            {[1, 2, 3, 4, 5, 6].map((i) => (\r\n              <div key={i} className=\"bg-white rounded-lg p-6 border border-gray-200 animate-pulse\">\r\n                <div className=\"h-4 bg-gray-200 rounded w-3/4 mb-4\" />\r\n                <div className=\"h-3 bg-gray-200 rounded w-1/2\" />\r\n              </div>\r\n            ))}\r\n          </div>\r\n        ) : filterStatus === 'BLOCKED' ? (\r\n          // Blocked Users Cards\r\n          blockedUsers.length === 0 ? (\r\n            <div className=\"bg-white rounded-lg p-12 text-center border border-gray-200\">\r\n              <MessageCircle className=\"w-16 h-16 text-gray-300 mx-auto mb-4\" />\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\r\n                Нет заблокированных пользователей\r\n              </h3>\r\n              <p className=\"text-gray-600\">\r\n                Заблокированные пользователи появятся здесь\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                {paginatedBlockedUsers.map((user) => (\r\n                <div\r\n                  key={user.id}\r\n                  className=\"bg-white rounded-xl p-5 border-2 border-red-300 bg-red-50/20 shadow-sm\"\r\n                >\r\n                  {/* Header */}\r\n                  <div className=\"flex items-start justify-between mb-4\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                      {user.avatar_url ? (\r\n                        <img\r\n                          src={user.avatar_url}\r\n                          alt={user.name}\r\n                          className=\"w-12 h-12 rounded-full object-cover shadow-sm\"\r\n                        />\r\n                      ) : (\r\n                        <div className=\"w-12 h-12 bg-gradient-to-br from-gray-400 to-gray-500 rounded-full flex items-center justify-center shadow-sm\">\r\n                          <User className=\"w-6 h-6 text-white\" />\r\n                        </div>\r\n                      )}\r\n                      <div>\r\n                        <h3 className=\"font-semibold text-gray-900\">{user.name}</h3>\r\n                        <p className=\"text-xs text-gray-500\">{user.email}</p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Info */}\r\n                  <div className=\"mb-4\">\r\n                    <Badge variant=\"secondary\" className=\"bg-red-100 text-red-700 border-red-300 mb-2\">\r\n                      <Ban className=\"w-3 h-3 mr-1\" />\r\n                      Заблокирован\r\n                    </Badge>\r\n                    {user.phone && (\r\n                      <p className=\"text-sm text-gray-600 mt-2\">{user.phone}</p>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* Footer */}\r\n                  <div className=\"flex items-center justify-between pt-4 border-t border-gray-200\">\r\n                    <div className=\"flex items-center gap-1.5 text-xs text-gray-500\">\r\n                      <Clock className=\"w-3.5 h-3.5\" />\r\n                      <span>{new Date(user.registration_date).toLocaleDateString('ru-RU')}</span>\r\n                    </div>\r\n                    <Button\r\n                      onClick={() => handleUnblockUser(user.id)}\r\n                      disabled={unblockingUserId === user.id}\r\n                      className=\"bg-blue-500 hover:bg-blue-600 text-white text-xs px-3 py-1.5 flex items-center gap-1.5\"\r\n                    >\r\n                      {unblockingUserId === user.id ? (\r\n                        <Loader2 className=\"w-3.5 h-3.5 animate-spin\" />\r\n                      ) : (\r\n                        <UserX className=\"w-3.5 h-3.5\" />\r\n                      )}\r\n                      Разблокировать\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            {/* Pagination for blocked users */}\r\n            {totalBlockedPages > 1 && (\r\n              <Pagination\r\n                currentPage={currentPage}\r\n                totalPages={totalBlockedPages}\r\n                onPageChange={setPage}\r\n                className=\"mt-6\"\r\n              />\r\n            )}\r\n          </>\r\n          )\r\n        ) : (\r\n          // Chat Cards\r\n          filteredChats.length === 0 ? (\r\n            <div className=\"bg-white rounded-lg p-12 text-center border border-gray-200\">\r\n              <MessageCircle className=\"w-16 h-16 text-gray-300 mx-auto mb-4\" />\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\r\n                {filterStatus === 'ALL' && 'Нет чатов'}\r\n                {filterStatus === 'WAITING' && 'Нет ожидающих чатов'}\r\n                {filterStatus === 'ACTIVE' && 'Нет активных чатов'}\r\n                {filterStatus === 'CLOSED' && 'Нет закрытых чатов'}\r\n              </h3>\r\n              <p className=\"text-gray-600\">\r\n                {filterStatus === 'WAITING' && 'Когда пациенты напишут, их чаты появятся здесь'}\r\n                {filterStatus === 'ACTIVE' && 'Нет активных чатов в данный момент'}\r\n                {filterStatus === 'CLOSED' && 'Нет закрытых чатов'}\r\n                {filterStatus === 'ALL' && 'Чаты появятся когда пациенты начнут писать'}\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                {paginatedChats.map((chat) => (\r\n                <div\r\n                  key={chat.id}\r\n                  className={`bg-white rounded-xl p-5 border-2 transition-all cursor-pointer ${\r\n                    chat.has_unread_operator\r\n                      ? 'border-emerald-400 bg-emerald-50/30 shadow-sm hover:shadow-md'\r\n                      : 'border-gray-200 hover:border-emerald-300 hover:shadow-md'\r\n                  }`}\r\n                  onClick={() => setSelectedChatId(chat.id)}\r\n                >\r\n                  {/* Header */}\r\n                  <div className=\"flex items-start justify-between mb-4\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                      {chat.patient.avatar_url ? (\r\n                        <img\r\n                          src={chat.patient.avatar_url}\r\n                          alt={chat.patient.name}\r\n                          className=\"w-12 h-12 rounded-full object-cover shadow-sm\"\r\n                        />\r\n                      ) : (\r\n                        <div className=\"w-12 h-12 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-full flex items-center justify-center shadow-sm\">\r\n                          <User className=\"w-6 h-6 text-white\" />\r\n                        </div>\r\n                      )}\r\n                      <div>\r\n                        <h3 className=\"font-semibold text-gray-900\">{chat.patient.name}</h3>\r\n                        <p className=\"text-xs text-gray-500\">{chat.patient.email}</p>\r\n                      </div>\r\n                    </div>\r\n                    {chat.has_unread_operator && (\r\n                      <div className=\"w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse\" />\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* Status */}\r\n                  <div className=\"flex items-center gap-2 mb-3 flex-wrap\">\r\n                    {getStatusBadge(chat.status)}\r\n                    {chat.operator && (\r\n                      <span className=\"text-xs text-gray-500\">\r\n                        Оператор: {chat.operator.name}\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* Last Message */}\r\n                  {chat.messages.length > 0 && (\r\n                    <div className=\"mb-3\">\r\n                      <p className=\"text-sm text-gray-700 line-clamp-2\">\r\n                        {chat.messages[0].content}\r\n                      </p>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Footer */}\r\n                  <div className=\"flex items-center justify-between text-xs text-gray-500 pt-3 border-t border-gray-100\">\r\n                    <div className=\"flex items-center gap-1.5\">\r\n                      <Clock className=\"w-3.5 h-3.5\" />\r\n                      <span>{chat.last_message_at ? getTimeAgo(chat.last_message_at) : 'Нет сообщений'}</span>\r\n                    </div>\r\n                    {chat.has_unread_operator ? (\r\n                      <span className=\"text-emerald-600 font-semibold\">Новое</span>\r\n                    ) : (\r\n                      <CheckCheck className=\"w-4 h-4 text-gray-400\" />\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            {/* Pagination for chats */}\r\n            {totalChatPages > 1 && (\r\n              <Pagination\r\n                currentPage={currentPage}\r\n                totalPages={totalChatPages}\r\n                onPageChange={setPage}\r\n                className=\"mt-6\"\r\n              />\r\n            )}\r\n          </>\r\n          )\r\n        )}\r\n      </div>\r\n\r\n      {/* Chat Modal */}\r\n      {selectedChatId && (\r\n        <ChatModal\r\n          chatId={selectedChatId}\r\n          onClose={() => {\r\n            setSelectedChatId(null);\r\n            loadChats(); // Перезагружаем список чатов после закрытия\r\n            loadBlockedUsers(); // Перезагружаем заблокированных пользователей\r\n          }}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2', key: '1yyitq' }],\n  ['circle', { cx: '9', cy: '7', r: '4', key: 'nufk8' }],\n  ['line', { x1: '17', x2: '22', y1: '8', y2: '13', key: '3nzzx3' }],\n  ['line', { x1: '22', x2: '17', y1: '8', y2: '13', key: '1swrse' }],\n];\n\n/**\n * @component @name UserX\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTYgMjF2LTJhNCA0IDAgMCAwLTQtNEg2YTQgNCAwIDAgMC00IDR2MiIgLz4KICA8Y2lyY2xlIGN4PSI5IiBjeT0iNyIgcj0iNCIgLz4KICA8bGluZSB4MT0iMTciIHgyPSIyMiIgeTE9IjgiIHkyPSIxMyIgLz4KICA8bGluZSB4MT0iMjIiIHgyPSIxNyIgeTE9IjgiIHkyPSIxMyIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/user-x\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst UserX = createLucideIcon('user-x', __iconNode);\n\nexport default UserX;\n"],"names":[],"mappings":"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","ignoreList":[3]}