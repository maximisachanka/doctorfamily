{"version":3,"sources":["turbopack:///[project]/src/app/admin/feedbacks/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useMemo } from 'react';\nimport { useSession } from 'next-auth/react';\nimport { AnimatePresence, motion } from 'framer-motion';\nimport { MessageSquare, Loader2, Star, Calendar, CheckCircle, Clock, Check, Eye, X } from 'lucide-react';\nimport { Pagination } from '@/components/common/SMPagination/SMPagination';\nimport { ImageUploader } from '@/components/ImageUploader';\nimport { AdminMenu } from '@/components/SMAdmin/SMAdminMenu';\nimport {\n  AdminSection,\n  EmptyState,\n  ItemCard,\n  CardActions,\n  FormModal,\n  FormField,\n  FormInput,\n  FormTextarea,\n  FormSelect,\n  FormDateInput,\n  Badge,\n} from '@/components/SMAdmin/SMAdminSection';\nimport NotFound from '../../not-found';\nimport { AdminAuthForm } from '@/components/SMAdmin/SMAdminAuthForm';\nimport { useAdminSession } from '@/hooks/useAdminSession';\nimport { AdminAccessSkeleton, AdminFeedbacksGridSkeleton } from '@/components/SMAdmin/SMAdminSkeleton';\nimport { ConfirmDialog } from '@/components/SMAdmin/SMConfirmDialog';\nimport { useConfirmDialog } from '@/hooks/useConfirmDialog';\nimport { useAlert } from '@/components/common/SMAlert';\nimport { useServerPagination } from '@/hooks/useServerPagination';\nimport { useUnreadCountsContext } from '@/contexts/UnreadCountsContext';\n\ninterface Feedback {\n  id: number;\n  name: string;\n  text: string;\n  date: string;\n  grade: number;\n  image_url: string;\n  verified: boolean;\n  service_id: number | null;\n  service: {\n    id: number;\n    title: string;\n  } | null;\n}\n\ninterface Service {\n  id: number;\n  title: string;\n}\n\nexport default function AdminFeedbacksPage() {\n  const { status } = useSession();\n  const { sessionVerified, isLoading: sessionLoading, verifySession } = useAdminSession();\n  const [hasAdminRole, setHasAdminRole] = useState<boolean | null>(null);\n  const [isCheckingRole, setIsCheckingRole] = useState(true);\n  const confirmDialog = useConfirmDialog();\n  const { success, error: showError } = useAlert();\n  const { refetch: refetchUnreadCounts } = useUnreadCountsContext();\n\n  // Pagination hook\n  const { currentPage, setPage, buildApiUrl, itemsPerPage } = useServerPagination(12);\n  const ITEMS_PER_PAGE = itemsPerPage;\n\n  // Data states\n  const [feedbacks, setFeedbacks] = useState<Feedback[]>([]);\n  const [totalPages, setTotalPages] = useState(1);\n  const [totalCount, setTotalCount] = useState(0);\n  const [pendingCount, setPendingCount] = useState(0);\n  const [approvedCount, setApprovedCount] = useState(0);\n  const [services, setServices] = useState<Service[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [filterStatus, setFilterStatus] = useState<'pending' | 'approved'>('pending');\n  const [viewingFeedback, setViewingFeedback] = useState<Feedback | null>(null);\n  const [approvingFeedback, setApprovingFeedback] = useState<Feedback | null>(null);\n  const [approveData, setApproveData] = useState({ service_id: '', verified: true });\n  const [approveLoading, setApproveLoading] = useState(false);\n\n  // Form states\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [editingFeedback, setEditingFeedback] = useState<Feedback | null>(null);\n  const [formLoading, setFormLoading] = useState(false);\n  const [formData, setFormData] = useState({\n    name: '',\n    text: '',\n    date: '',\n    grade: '5',\n    image_url: '',\n    verified: false,\n    service_id: '',\n  });\n\n  // Check admin role\n  useEffect(() => {\n    if (status === 'authenticated') {\n      checkAdminRole();\n    } else if (status === 'unauthenticated') {\n      setHasAdminRole(false);\n    }\n  }, [status]);\n\n  // Load data when session is verified\n  useEffect(() => {\n    if (sessionVerified && hasAdminRole) {\n      loadData();\n    }\n  }, [sessionVerified, hasAdminRole]);\n\n  const checkAdminRole = async () => {\n    setIsCheckingRole(true);\n    try {\n      const res = await fetch('/api/admin/auth');\n      const data = await res.json();\n      setHasAdminRole(data.isAdmin);\n    } catch (error) {\n      setHasAdminRole(false);\n    } finally {\n      setIsCheckingRole(false);\n    }\n  };\n\n  const handleAuthSuccess = () => {\n    verifySession();\n  };\n\n  const loadCounts = async () => {\n    try {\n      // Fetch counts for both statuses\n      const [pendingRes, approvedRes] = await Promise.all([\n        fetch('/api/admin/feedbacks?page=1&limit=1&status=pending'),\n        fetch('/api/admin/feedbacks?page=1&limit=1&status=approved'),\n      ]);\n\n      if (pendingRes.ok) {\n        const data = await pendingRes.json();\n        setPendingCount(data.totalCount || 0);\n      }\n\n      if (approvedRes.ok) {\n        const data = await approvedRes.json();\n        setApprovedCount(data.totalCount || 0);\n      }\n    } catch (error) {\n      console.error('Error loading counts:', error);\n    }\n  };\n\n  const loadData = async () => {\n    setLoading(true);\n    try {\n      const apiUrl = buildApiUrl('/api/admin/feedbacks', searchQuery) +\n        `&status=${filterStatus}`;\n\n      const [feedbacksRes, servicesRes] = await Promise.all([\n        fetch(apiUrl),\n        fetch('/api/services'),\n        loadCounts(), // Load counts in parallel\n      ]);\n\n      if (feedbacksRes.ok) {\n        const response = await feedbacksRes.json();\n        setFeedbacks(response.data || []);\n        setTotalPages(response.totalPages || 1);\n        setTotalCount(response.totalCount || 0);\n      }\n\n      if (servicesRes.ok) {\n        const data = await servicesRes.json();\n        setServices(data);\n      }\n    } catch (error) {\n      console.error('Error loading data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Load data when session is verified or page/search/filter changes\n  useEffect(() => {\n    if (sessionVerified && hasAdminRole) {\n      loadData();\n    }\n  }, [sessionVerified, hasAdminRole, currentPage, searchQuery, filterStatus]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  // Reset page when search or filter changes\n  useEffect(() => {\n    setPage(1);\n  }, [searchQuery, filterStatus]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  // Form handlers\n  const resetForm = () => {\n    setFormData({\n      name: '',\n      text: '',\n      date: '',\n      grade: '5',\n      image_url: '',\n      verified: false,\n      service_id: '',\n    });\n    setEditingFeedback(null);\n    setIsModalOpen(false);\n  };\n\n  const handleAdd = () => {\n    resetForm();\n    setFormData(prev => ({\n      ...prev,\n      date: new Date().toISOString().split('T')[0],\n      verified: true, // Отзывы созданные через админку сразу одобрены\n    }));\n    setIsModalOpen(true);\n  };\n\n  const handleEdit = (feedback: Feedback) => {\n    setEditingFeedback(feedback);\n    setFormData({\n      name: feedback.name,\n      text: feedback.text,\n      date: new Date(feedback.date).toISOString().split('T')[0],\n      grade: feedback.grade.toString(),\n      image_url: feedback.image_url,\n      verified: feedback.verified,\n      service_id: feedback.service_id?.toString() || '',\n    });\n    setIsModalOpen(true);\n  };\n\n  const handleSave = async () => {\n    setFormLoading(true);\n    try {\n      const url = editingFeedback\n        ? `/api/admin/feedbacks/${editingFeedback.id}`\n        : '/api/admin/feedbacks';\n\n      const method = editingFeedback ? 'PUT' : 'POST';\n\n      const res = await fetch(url, {\n        method,\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(formData),\n      });\n\n      if (res.ok) {\n        await loadData();\n        resetForm();\n        success(editingFeedback ? 'Отзыв обновлен' : 'Отзыв создан');\n      } else {\n        const error = await res.json();\n        showError(error.error || 'Ошибка сохранения');\n      }\n    } catch (error) {\n      showError('Ошибка сохранения');\n    } finally {\n      setFormLoading(false);\n    }\n  };\n\n  const openApproveModal = (feedback: Feedback) => {\n    setApprovingFeedback(feedback);\n    setApproveData({ service_id: '', verified: true });\n  };\n\n  const handleApproveSubmit = async () => {\n    if (!approvingFeedback) return;\n\n    setApproveLoading(true);\n    try {\n      const res = await fetch(`/api/admin/feedbacks/${approvingFeedback.id}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          verified: approveData.verified,\n          service_id: approveData.service_id || null,\n        }),\n      });\n\n      if (res.ok) {\n        await loadData();\n        setApprovingFeedback(null);\n        success('Отзыв одобрен');\n        // Обновляем счетчики непрочитанных\n        await refetchUnreadCounts();\n      } else {\n        const error = await res.json();\n        showError(error.error || 'Ошибка одобрения');\n      }\n    } catch (error) {\n      showError('Ошибка одобрения');\n    } finally {\n      setApproveLoading(false);\n    }\n  };\n\n  const handleDelete = async (id: number, feedbackAuthor: string) => {\n    const confirmed = await confirmDialog.confirm({\n      title: 'Удаление отзыва',\n      message: `Вы уверены, что хотите удалить отзыв от \"${feedbackAuthor}\"? Это действие нельзя отменить.`,\n      confirmText: 'Удалить',\n      cancelText: 'Отмена',\n      variant: 'danger',\n    });\n\n    if (!confirmed) return;\n\n    try {\n      const res = await fetch(`/api/admin/feedbacks/${id}`, {\n        method: 'DELETE',\n      });\n\n      if (res.ok) {\n        await loadData();\n        success('Отзыв удален');\n        // Обновляем счетчики непрочитанных\n        await refetchUnreadCounts();\n      } else {\n        const error = await res.json();\n        showError(error.error || 'Ошибка удаления');\n      }\n    } catch (error) {\n      showError('Ошибка удаления');\n    }\n  };\n\n  // Render stars\n  const renderStars = (grade: number) => {\n    return (\n      <div className=\"flex items-center gap-0.5\">\n        {[1, 2, 3, 4, 5].map((star) => (\n          <Star\n            key={star}\n            className={`w-4 h-4 ${star <= grade ? 'text-yellow-400 fill-yellow-400' : 'text-gray-300'}`}\n          />\n        ))}\n      </div>\n    );\n  };\n\n  // Loading state - показываем skeleton с блюром пока проверяем права\n  if (status === 'loading' || hasAdminRole === null || sessionLoading || isCheckingRole) {\n    return <AdminAccessSkeleton />;\n  }\n\n  // Not admin - show 404 (только после завершения проверки)\n  if (status === 'unauthenticated' || hasAdminRole === false) {\n    return <NotFound />;\n  }\n\n  // Admin login form (only if session not verified)\n  if (!sessionVerified) {\n    return <AdminAuthForm onSuccess={handleAuthSuccess} />;\n  }\n\n  return (\n    <div className=\"flex min-h-screen bg-gray-50\">\n      <AdminMenu />\n\n      <div className=\"flex-1 p-4 lg:p-8 overflow-auto\">\n        <div className=\"max-w-7xl mx-auto\">\n          <AdminSection\n            title=\"Отзывы\"\n            icon={MessageSquare}\n            count={totalCount}\n            loading={loading}\n            searchValue={searchQuery}\n            onSearchChange={setSearchQuery}\n            onAdd={handleAdd}\n            addButtonText=\"Добавить отзыв\"\n            loadingSkeleton={<AdminFeedbacksGridSkeleton count={ITEMS_PER_PAGE} />}\n          >\n            {/* Filter Tabs */}\n            <div className=\"flex items-center gap-2 mb-6\">\n              <button\n                onClick={() => setFilterStatus('pending')}\n                className={`px-4 py-2 rounded-lg text-sm font-medium transition-all flex items-center gap-2 ${filterStatus === 'pending'\n                    ? 'bg-amber-500 text-white shadow-md'\n                    : 'bg-white text-gray-600 hover:bg-gray-100 border border-gray-200'\n                  }`}\n              >\n                <Clock className=\"w-4 h-4\" />\n                На модерации\n                {pendingCount > 0 && (\n                  <span className={`px-2 py-0.5 rounded-full text-xs font-bold ${filterStatus === 'pending'\n                      ? 'bg-white/20 text-white'\n                      : 'bg-amber-100 text-amber-700'\n                    }`}>\n                    {pendingCount}\n                  </span>\n                )}\n              </button>\n              <button\n                onClick={() => setFilterStatus('approved')}\n                className={`px-4 py-2 rounded-lg text-sm font-medium transition-all flex items-center gap-2 ${filterStatus === 'approved'\n                    ? 'bg-[#18A36C] text-white shadow-md'\n                    : 'bg-white text-gray-600 hover:bg-gray-100 border border-gray-200'\n                  }`}\n              >\n                <CheckCircle className=\"w-4 h-4\" />\n                Одобренные\n              </button>\n            </div>\n\n            {feedbacks.length === 0 ? (\n              <EmptyState\n                icon={MessageSquare}\n                title=\"Отзывы не найдены\"\n                description={searchQuery ? 'Попробуйте изменить поисковый запрос' : 'Добавьте первый отзыв'}\n                actionText={!searchQuery ? 'Добавить отзыв' : undefined}\n                onAction={!searchQuery ? handleAdd : undefined}\n              />\n            ) : (\n              <>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <AnimatePresence>\n                    {feedbacks.map((feedback) => {\n                      // Генерация инициалов из имени\n                      const getInitials = (name: string) => {\n                        const parts = name.trim().split(/\\s+/);\n                        if (parts.length >= 2) {\n                          return (parts[0][0] + parts[1][0]).toUpperCase();\n                        }\n                        return name.slice(0, 2).toUpperCase();\n                      };\n\n                      return (\n                        <ItemCard key={feedback.id}>\n                          <div className=\"flex gap-4\">\n                            {/* Avatar */}\n                            <div className=\"w-14 h-14 rounded-full overflow-hidden flex-shrink-0 bg-gray-100 flex items-center justify-center\">\n                              {feedback.image_url ? (\n                                <img\n                                  src={feedback.image_url}\n                                  alt={feedback.name}\n                                  className=\"w-full h-full object-cover\"\n                                />\n                              ) : (\n                                <span className=\"text-lg font-semibold text-gray-500\">\n                                  {getInitials(feedback.name)}\n                                </span>\n                              )}\n                            </div>\n\n                            {/* Content */}\n                            <div className=\"flex-1 min-w-0\">\n                              <div className=\"flex items-center gap-2 mb-1\">\n                                <h3 className=\"font-semibold text-gray-800\">{feedback.name}</h3>\n                                {feedback.verified && (\n                                  <CheckCircle className=\"w-4 h-4 text-[#18A36C]\" />\n                                )}\n                              </div>\n\n                              <div className=\"flex items-center gap-3 mb-2\">\n                                {renderStars(feedback.grade)}\n                                <span className=\"text-xs text-gray-400 flex items-center gap-1\">\n                                  <Calendar className=\"w-3 h-3\" />\n                                  {new Date(feedback.date).toLocaleDateString('ru-RU', {\n                                    day: 'numeric',\n                                    month: 'long',\n                                    year: 'numeric',\n                                  })}\n                                </span>\n                              </div>\n\n                              <p className=\"text-sm text-gray-500 line-clamp-2\">{feedback.text}</p>\n                            </div>\n                          </div>\n\n                          {/* Tags */}\n                          <div className=\"flex items-center gap-2 mt-3\">\n                            {feedback.service && (\n                              <Badge variant=\"secondary\">{feedback.service.title}</Badge>\n                            )}\n                            {!feedback.service && (\n                              <Badge variant=\"primary\">Без услуги</Badge>\n                            )}\n                            {feedback.verified ? (\n                              <Badge variant=\"success\">Опубликован</Badge>\n                            ) : (\n                              <Badge variant=\"warning\">На модерации</Badge>\n                            )}\n                          </div>\n\n                          {/* Actions */}\n                          <div className=\"flex items-center justify-between mt-4 pt-4 border-t border-gray-100\">\n                            {!feedback.verified ? (\n                              <button\n                                onClick={() => openApproveModal(feedback)}\n                                className=\"flex items-center gap-1.5 px-3 py-1.5 bg-[#18A36C] text-white text-sm font-medium rounded-lg hover:bg-[#15905f] transition-colors\"\n                              >\n                                <Check className=\"w-4 h-4\" />\n                                Одобрить\n                              </button>\n                            ) : (\n                              <div />\n                            )}\n                            <div className=\"flex items-center gap-2\">\n                              {!feedback.verified ? (\n                                <button\n                                  onClick={() => setViewingFeedback(feedback)}\n                                  className=\"p-2 text-gray-400 hover:text-[#18A36C] hover:bg-[#18A36C]/10 rounded-lg transition-colors\"\n                                  title=\"Просмотреть\"\n                                >\n                                  <Eye className=\"w-4 h-4\" />\n                                </button>\n                              ) : (\n                                <CardActions\n                                  onEdit={() => handleEdit(feedback)}\n                                  onDelete={() => handleDelete(feedback.id, feedback.name)}\n                                />\n                              )}\n                              {!feedback.verified && (\n                                <button\n                                  onClick={() => handleDelete(feedback.id, feedback.name)}\n                                  className=\"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors\"\n                                  title=\"Удалить\"\n                                >\n                                  <X className=\"w-4 h-4\" />\n                                </button>\n                              )}\n                            </div>\n                          </div>\n                        </ItemCard>\n                      );\n                    })}\n                  </AnimatePresence>\n                </div>\n\n                {/* Pagination */}\n                {totalPages > 1 && (\n                  <Pagination\n                    currentPage={currentPage}\n                    totalPages={totalPages}\n                    onPageChange={setPage}\n                    className=\"mt-6\"\n                  />\n                )}\n              </>\n            )}\n          </AdminSection>\n\n          {/* Form Modal */}\n          <FormModal\n            isOpen={isModalOpen}\n            onClose={resetForm}\n            title={editingFeedback ? 'Редактирование отзыва' : 'Новый отзыв'}\n            onSubmit={handleSave}\n            loading={formLoading}\n            disabled={!formData.name || !formData.text}\n          >\n            <div className=\"space-y-6\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <FormField label=\"Имя автора\" required>\n                  <FormInput\n                    type=\"text\"\n                    value={formData.name}\n                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                    placeholder=\"Иван Иванов\"\n                  />\n                </FormField>\n\n                <FormField label=\"Дата\" required>\n                  <FormDateInput\n                    value={formData.date}\n                    onChange={(date) => setFormData({ ...formData, date })}\n                  />\n                </FormField>\n              </div>\n\n              <FormField label=\"Текст отзыва\" required>\n                <FormTextarea\n                  value={formData.text}\n                  onChange={(e) => setFormData({ ...formData, text: e.target.value })}\n                  rows={4}\n                  placeholder=\"Текст отзыва\"\n                />\n              </FormField>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <FormField label=\"Оценка (1-5)\" required>\n                  <FormSelect\n                    value={formData.grade}\n                    onChange={(e) => setFormData({ ...formData, grade: e.target.value })}\n                  >\n                    <option value=\"5\">5 - Отлично</option>\n                    <option value=\"4\">4 - Хорошо</option>\n                    <option value=\"3\">3 - Нормально</option>\n                    <option value=\"2\">2 - Плохо</option>\n                    <option value=\"1\">1 - Ужасно</option>\n                  </FormSelect>\n                </FormField>\n\n                <FormField label=\"Привязка к услуге\">\n                  <FormSelect\n                    value={formData.service_id}\n                    onChange={(e) => setFormData({ ...formData, service_id: e.target.value })}\n                  >\n                    <option value=\"\">Без привязки к услуге</option>\n                    {services.map((service) => (\n                      <option key={service.id} value={service.id}>\n                        {service.title}\n                      </option>\n                    ))}\n                  </FormSelect>\n                </FormField>\n              </div>\n\n              <FormField label=\"Фото автора\">\n                <ImageUploader\n                  value={formData.image_url}\n                  onChange={(url) => setFormData({ ...formData, image_url: url })}\n                  folder=\"smartmedical/feedbacks\"\n                  placeholder=\"Загрузите фото автора отзыва\"\n                  maxSizeMB={5}\n                />\n              </FormField>\n\n              <div className=\"flex items-center gap-3\">\n                <button\n                  type=\"button\"\n                  onClick={() => setFormData({ ...formData, verified: !formData.verified })}\n                  className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${formData.verified ? 'bg-[#18A36C]' : 'bg-gray-300'\n                    }`}\n                >\n                  <span\n                    className={`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${formData.verified ? 'translate-x-6' : 'translate-x-1'\n                      }`}\n                  />\n                </button>\n                <span className=\"text-sm text-gray-700\">\n                  {formData.verified ? 'Показывать в общих отзывах клиники' : 'Не показывать в общих отзывах клиники'}\n                </span>\n              </div>\n            </div>\n          </FormModal>\n\n          {/* View Modal for pending reviews */}\n          <AnimatePresence>\n            {viewingFeedback && (\n              <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\n                <motion.div\n                  initial={{ opacity: 0 }}\n                  animate={{ opacity: 1 }}\n                  exit={{ opacity: 0 }}\n                  onClick={() => setViewingFeedback(null)}\n                  className=\"absolute inset-0 bg-black/50 backdrop-blur-sm\"\n                />\n                <motion.div\n                  initial={{ opacity: 0, scale: 0.95, y: 20 }}\n                  animate={{ opacity: 1, scale: 1, y: 0 }}\n                  exit={{ opacity: 0, scale: 0.95, y: 20 }}\n                  className=\"relative w-full max-w-lg mx-4 bg-white rounded-2xl shadow-2xl overflow-hidden\"\n                >\n                  {/* Header */}\n                  <div className=\"bg-[#18A36C] px-6 py-4\">\n                    <div className=\"flex items-center justify-between\">\n                      <h2 className=\"text-xl font-semibold text-white\">Просмотр отзыва</h2>\n                      <button\n                        onClick={() => setViewingFeedback(null)}\n                        className=\"p-1.5 hover:bg-white/20 rounded-lg transition-colors\"\n                      >\n                        <X className=\"w-5 h-5 text-white\" />\n                      </button>\n                    </div>\n                  </div>\n\n                  {/* Content */}\n                  <div className=\"p-6\">\n                    <div className=\"flex items-start gap-4 mb-4\">\n                      <div className=\"w-14 h-14 rounded-full overflow-hidden flex-shrink-0 bg-gray-100 flex items-center justify-center\">\n                        {viewingFeedback.image_url ? (\n                          <img\n                            src={viewingFeedback.image_url}\n                            alt={viewingFeedback.name}\n                            className=\"w-full h-full object-cover\"\n                          />\n                        ) : (\n                          <span className=\"text-lg font-semibold text-gray-500\">\n                            {viewingFeedback.name.trim().split(/\\s+/).length >= 2\n                              ? (viewingFeedback.name.trim().split(/\\s+/)[0][0] + viewingFeedback.name.trim().split(/\\s+/)[1][0]).toUpperCase()\n                              : viewingFeedback.name.slice(0, 2).toUpperCase()}\n                          </span>\n                        )}\n                      </div>\n                      <div>\n                        <h3 className=\"font-semibold text-gray-800 text-lg\">{viewingFeedback.name}</h3>\n                        <div className=\"flex items-center gap-2 mt-1\">\n                          {renderStars(viewingFeedback.grade)}\n                          <span className=\"text-sm text-gray-500\">\n                            {new Date(viewingFeedback.date).toLocaleDateString('ru-RU', {\n                              day: 'numeric',\n                              month: 'long',\n                              year: 'numeric',\n                            })}\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div className=\"bg-gray-50 rounded-xl p-4 mb-4\">\n                      <p className=\"text-gray-700 whitespace-pre-wrap\">{viewingFeedback.text}</p>\n                    </div>\n\n                    {viewingFeedback.service && (\n                      <div className=\"mb-4\">\n                        <span className=\"text-sm text-gray-500\">Услуга: </span>\n                        <span className=\"text-sm font-medium text-gray-700\">{viewingFeedback.service.title}</span>\n                      </div>\n                    )}\n\n                    {/* Actions */}\n                    <div className=\"flex items-center gap-3 pt-4 border-t border-gray-100\">\n                      <button\n                        onClick={() => {\n                          openApproveModal(viewingFeedback);\n                          setViewingFeedback(null);\n                        }}\n                        className=\"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-[#18A36C] text-white font-medium rounded-xl hover:bg-[#15905f] transition-colors\"\n                      >\n                        <Check className=\"w-4 h-4\" />\n                        Одобрить\n                      </button>\n                      <button\n                        onClick={() => {\n                          handleDelete(viewingFeedback.id, viewingFeedback.name);\n                          setViewingFeedback(null);\n                        }}\n                        className=\"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-red-500 text-white font-medium rounded-xl hover:bg-red-600 transition-colors\"\n                      >\n                        <X className=\"w-4 h-4\" />\n                        Отклонить\n                      </button>\n                    </div>\n                  </div>\n                </motion.div>\n              </div>\n            )}\n          </AnimatePresence>\n\n          {/* Approve Modal */}\n          <AnimatePresence>\n            {approvingFeedback && (\n              <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\n                <motion.div\n                  initial={{ opacity: 0 }}\n                  animate={{ opacity: 1 }}\n                  exit={{ opacity: 0 }}\n                  onClick={() => !approveLoading && setApprovingFeedback(null)}\n                  className=\"absolute inset-0 bg-black/50 backdrop-blur-sm\"\n                />\n                <motion.div\n                  initial={{ opacity: 0, scale: 0.95, y: 20 }}\n                  animate={{ opacity: 1, scale: 1, y: 0 }}\n                  exit={{ opacity: 0, scale: 0.95, y: 20 }}\n                  className=\"relative w-full max-w-md bg-white rounded-2xl shadow-2xl overflow-hidden\"\n                >\n                  {/* Header */}\n                  <div className=\"bg-[#18A36C] px-6 py-4\">\n                    <div className=\"flex items-center justify-between\">\n                      <h2 className=\"text-xl font-semibold text-white\">Одобрение отзыва</h2>\n                      <button\n                        onClick={() => !approveLoading && setApprovingFeedback(null)}\n                        className=\"p-1.5 hover:bg-white/20 rounded-lg transition-colors\"\n                      >\n                        <X className=\"w-5 h-5 text-white\" />\n                      </button>\n                    </div>\n                  </div>\n\n                  {/* Content */}\n                  <div className=\"p-6 space-y-5\">\n                    {/* Preview */}\n                    <div className=\"p-4 bg-gray-50 rounded-xl\">\n                      <p className=\"text-sm text-gray-500 mb-1\">Отзыв от</p>\n                      <p className=\"font-medium text-gray-800\">{approvingFeedback.name}</p>\n                      <p className=\"text-sm text-gray-600 mt-2 line-clamp-2\">{approvingFeedback.text}</p>\n                    </div>\n\n                    {/* Service select */}\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1.5\">\n                        Привязка к услуге\n                      </label>\n                      <select\n                        value={approveData.service_id}\n                        onChange={(e) => setApproveData({ ...approveData, service_id: e.target.value })}\n                        className=\"w-full px-4 py-2.5 border border-gray-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-[#18A36C]/20 focus:border-[#18A36C] transition-all\"\n                      >\n                        <option value=\"\">Без привязки к услуге</option>\n                        {services.map((service) => (\n                          <option key={service.id} value={service.id}>\n                            {service.title}\n                          </option>\n                        ))}\n                      </select>\n                    </div>\n\n                    {/* Show in clinic reviews toggle */}\n                    <div className=\"flex items-center gap-3\">\n                      <button\n                        type=\"button\"\n                        onClick={() => setApproveData({ ...approveData, verified: !approveData.verified })}\n                        className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${approveData.verified ? 'bg-[#18A36C]' : 'bg-gray-300'\n                          }`}\n                      >\n                        <span\n                          className={`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${approveData.verified ? 'translate-x-6' : 'translate-x-1'\n                            }`}\n                        />\n                      </button>\n                      <span className=\"text-sm text-gray-700\">\n                        Показывать в общих отзывах клиники\n                      </span>\n                    </div>\n\n                    {/* Actions */}\n                    <div className=\"flex items-center gap-3 pt-2\">\n                      <button\n                        onClick={() => setApprovingFeedback(null)}\n                        disabled={approveLoading}\n                        className=\"flex-1 px-4 py-2.5 border border-gray-200 text-gray-700 font-medium rounded-xl hover:bg-gray-50 transition-colors disabled:opacity-50\"\n                      >\n                        Отмена\n                      </button>\n                      <button\n                        onClick={handleApproveSubmit}\n                        disabled={approveLoading}\n                        className=\"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-[#18A36C] text-white font-medium rounded-xl hover:bg-[#15905f] transition-colors disabled:opacity-50\"\n                      >\n                        {approveLoading ? (\n                          <Loader2 className=\"w-4 h-4 animate-spin\" />\n                        ) : (\n                          <Check className=\"w-4 h-4\" />\n                        )}\n                        Одобрить\n                      </button>\n                    </div>\n                  </div>\n                </motion.div>\n              </div>\n            )}\n          </AnimatePresence>\n\n          {/* Confirm Dialog */}\n          <ConfirmDialog\n            isOpen={confirmDialog.isOpen}\n            onClose={confirmDialog.handleCancel}\n            onConfirm={confirmDialog.handleConfirm}\n            title={confirmDialog.options.title}\n            message={confirmDialog.options.message}\n            confirmText={confirmDialog.options.confirmText}\n            cancelText={confirmDialog.options.cancelText}\n            variant={confirmDialog.options.variant}\n            loading={confirmDialog.loading}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}